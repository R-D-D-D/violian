(function(e){function t(t){for(var r,a,o=t[0],l=t[1],c=t[2],d=0,p=[];d<o.length;d++)a=o[d],Object.prototype.hasOwnProperty.call(n,a)&&n[a]&&p.push(n[a][0]),n[a]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);u&&u(t);while(p.length)p.shift()();return i.push.apply(i,c||[]),s()}function s(){for(var e,t=0;t<i.length;t++){for(var s=i[t],r=!0,o=1;o<s.length;o++){var l=s[o];0!==n[l]&&(r=!1)}r&&(i.splice(t--,1),e=a(a.s=s[0]))}return e}var r={},n={app:0},i=[];function a(t){if(r[t])return r[t].exports;var s=r[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,a),s.l=!0,s.exports}a.m=e,a.c=r,a.d=function(e,t,s){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(s,r,function(t){return e[t]}.bind(null,r));return s},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=l;i.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"00de":function(e,t,s){"use strict";var r=s("90ba"),n=s.n(r);n.a},"034f":function(e,t,s){"use strict";var r=s("8a23"),n=s.n(r);n.a},"0374":function(e,t,s){"use strict";var r=s("7341"),n=s.n(r);n.a},1:function(e,t){},"1f6f":function(e,t,s){"use strict";var r=s("28b8"),n=s.n(r);n.a},"28b8":function(e,t,s){},"2f18":function(e,t,s){"use strict";var r=s("6679"),n=s.n(r);n.a},"31dc":function(e,t,s){},"359f":function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es_array_fill__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("cb29"),core_js_modules_es_array_fill__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_array_fill__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es_array_includes__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("caad"),core_js_modules_es_array_includes__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_array_includes__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_array_index_of__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("c975"),core_js_modules_es_array_index_of__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_array_index_of__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es_array_splice__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("a434"),core_js_modules_es_array_splice__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_array_splice__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es_object_keys__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("b64b"),core_js_modules_es_object_keys__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_object_keys__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es_object_to_string__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("d3b7"),core_js_modules_es_object_to_string__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es_object_to_string__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_es_regexp_exec__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("ac1f"),core_js_modules_es_regexp_exec__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_es_regexp_exec__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_es_string_includes__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("2532"),core_js_modules_es_string_includes__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_es_string_includes__WEBPACK_IMPORTED_MODULE_7__),core_js_modules_es_string_match__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("466d"),core_js_modules_es_string_match__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(core_js_modules_es_string_match__WEBPACK_IMPORTED_MODULE_8__),core_js_modules_es_string_replace__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("5319"),core_js_modules_es_string_replace__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(core_js_modules_es_string_replace__WEBPACK_IMPORTED_MODULE_9__),core_js_modules_es_string_split__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("1276"),core_js_modules_es_string_split__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(core_js_modules_es_string_split__WEBPACK_IMPORTED_MODULE_10__),core_js_modules_web_dom_collections_iterator__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("ddb0"),core_js_modules_web_dom_collections_iterator__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(core_js_modules_web_dom_collections_iterator__WEBPACK_IMPORTED_MODULE_11__);Vex.UI={};var VF=Vex.Flow;function getRandomInt(e){return Math.floor(Math.random()*Math.floor(e))}function getStyle(e,t){var s=null,r=document.getElementById(e);return r.currentStyle?s=r.currentStyle[t]:window.getComputedStyle&&(s=document.defaultView.getComputedStyle(r,null).getPropertyValue(t)),s}function getMousePositionInCanvas(e,t){var s=getStyle(e.id,"border-left-width"),r=null!=s?s.substring(0,s.indexOf(s.match(/\D/))):0,n=getStyle(e.id,"padding-left"),i=null!=n?n.substring(0,n.indexOf(n.match(/\D/))):0,a=e.getBoundingClientRect();return{x:(t.clientX-a.left-r-i)/Vex.UI.scale,y:(t.clientY-a.top-r-i)/Vex.UI.scale}}function getAbsoluteMousePositionInCanvas(e,t){var s=getStyle(e.id,"border-left-width"),r=null!=s?s.substring(0,s.indexOf(s.match(/\D/))):0,n=getStyle(e.id,"padding-left"),i=null!=n?n.substring(0,n.indexOf(n.match(/\D/))):0,a=e.getBoundingClientRect();return{x:t.clientX-a.left-r-i,y:t.clientY-a.top-r-i}}function isCursorWithinRectangle(e,t,s,r,n,i){return n>e&&n<e+s&&i>t&&i<t+r}function getFirstTickableAfterXPosition(e,t){for(var s=null,r=0;r<e.getTickables().length;r++)if(t<e.getTickables()[r].getAbsoluteX()&&(s=e.getTickables()[r]),null!=s)break;return s}function getLastTickableBeforeXPosition(e,t){for(var s=null,r=e.getTickables().length-1;r>=0;r--)if(t>e.getTickables()[r].getAbsoluteX()&&(s=e.getTickables()[r]),null!=s)break;return s}function mergeProperties(e,t){var s={};for(var r in e)s[r]=e[r];for(var r in t)s[r]=t[r];return s}function getStemDirection(e,t){var s=e.getYForLine(2);return t<s?Vex.Flow.StaveNote.STEM_DOWN:Vex.Flow.StaveNote.STEM_UP}Vex.UI.provisoryTickableStyle={shadowBlur:0,shadowColor:"gray",fillStyle:"gray",strokeStyle:"gray"},Vex.UI.highlightNoteStyle={shadowBlur:15,shadowColor:"red",fillStyle:"black",strokeStyle:"black"},Vex.UI.defaultNoteStyle={shadowBlur:0,shadowColor:"black",fillStyle:"black",strokeStyle:"black"},Vex.UI.scale=1.5,Vex.UI.Handler=function(e,t,s){this.container=s||document.getElementById(e);var r={canEdit:!0,canPlay:!0,canAddStaves:!0,canChangeNoteValue:!0,showToolbar:!0,numberOfStaves:4,lessStaveHeight:!1,canvasProperties:{id:e+"-canvas",width:.9*window.innerWidth,tabindex:1}};this.options=mergeProperties(r,t||{}),this.canvas=this.createCanvas(),this.renderer=new Vex.Flow.Renderer(this.canvas,Vex.Flow.Renderer.Backends.CANVAS),this.ctx=this.renderer.getContext(),this.staveList=this.createStaves(),this.ctx.scale(Vex.UI.scale,Vex.UI.scale),this.currentNote=null,this.currentStave=null,this.provisoryTickable=null,this.mouseListener=new Vex.UI.MouseListener(this,this.canvas,this.staveList),this.noteMenu=new Vex.UI.NoteMenu(this,this.canvas,this.ctx),this.noteMenu.init(),this.tipRenderer=new Vex.UI.TipRenderer(this.canvas),this.tipRenderer.init()},Vex.UI.Handler.prototype.numBars=4,Vex.UI.Handler.prototype.timeSignature="4/4",Vex.UI.Handler.prototype.createCanvas=function(){for(var e=document.createElement("canvas"),t=Object.keys(this.options.canvasProperties),s=0;s<t.length;s++)e[t[s]]=this.options.canvasProperties[t[s]];return this.options.lessStaveHeight?e.height=90*Vex.UI.scale:e.height=130*Math.ceil(this.options.numberOfStaves/2)*Vex.UI.scale,this.container.appendChild(e),e},Vex.UI.Handler.prototype.createStaves=function(){var e=[],t=0;this.options.lessStaveHeight&&(t=-20);for(var s=(this.canvas.width/Vex.UI.scale-20)/2,r=0;r<this.options.numberOfStaves;r++){var n={};(r+1)%2==0?(n=new Vex.Flow.Stave(10+s,t,s),t+=130):(n=new Vex.Flow.Stave(10,t,s),n.addClef("treble").addTimeSignature("4/4")),n.font={family:"sans-serif",size:12,weight:""},e.push(n),n.setContext(this.ctx),n.setTickables([])}return e},Vex.UI.Handler.prototype.init=function(){return this.redraw(),this.options.canEdit&&this.mouseListener.startListening(),this},Vex.UI.Handler.prototype.resize=function(e){var t={id:this.canvas.id,width:e,height:this.canvas.height,tabindex:1};this.options.canvasProperties=t;for(var s=document.createElement("canvas"),r=Object.keys(t),n=0;n<r.length;n++)s[r[n]]=t[r[n]];this.container.removeChild(this.container.childNodes[0]),this.container.appendChild(s),this.convas=s,this.renderer=new Vex.Flow.Renderer(this.canvas,Vex.Flow.Renderer.Backends.CANVAS),this.ctx=this.renderer.getContext(),this.staveList=this.createStaves(),this.ctx.scale(Vex.UI.scale,Vex.UI.scale),this.currentNote=null,this.currentStave=null,this.provisoryTickable=null,this.mouseListener=new Vex.UI.MouseListener(this,this.canvas,this.staveList),this.noteMenu=new Vex.UI.NoteMenu(this,this.canvas,this.ctx),this.noteMenu.init(),this.tipRenderer=new Vex.UI.TipRenderer(this.canvas),this.tipRenderer.init(),this.redraw(),this.options.canEdit&&this.mouseListener.startListening()},Vex.UI.Handler.prototype.redraw=function(e){this.ctx.clear(),this.drawStaves(),e?this.drawNotes(void 0,!0):this.drawNotes()},Vex.UI.Handler.prototype.redrawStave=function(e){var t=e.getBoundingBox(),s=this.staveList.indexOf(e);(s+1)%2==0?this.ctx.clearRect(t.getX(),t.getY(),t.getW()+15,t.getH()+5):this.ctx.clearRect(t.getX()-15,t.getY(),t.getW()+16,t.getH()),this.drawStaves(e,!0),this.drawNotes(e)},Vex.UI.Handler.prototype.drawStaves=function(e){if(e)e.draw();else for(var t=0;t<this.staveList.length;t++)this.staveList[t].draw()},Vex.UI.Handler.prototype.drawNotes=function(e,t){if(void 0===e)for(var s=0;s<this.staveList.length;s++)this.drawNotes(this.staveList[s],t);else{var r=new Vex.Flow.Voice(Vex.Flow.TIME4_4).setMode(Vex.Flow.Voice.Mode.SOFT);r.setStrict(!1),r.addTickables(e.getTickables());var n=new Vex.Flow.Formatter;0!=e.getTickables().length&&(n.joinVoices([r]),n.formatToStave([r],e),r.draw(this.ctx,e),t?this.drawBeams(e,!0):this.drawBeams(e))}},Vex.UI.Handler.prototype.drawBeams=function(e,t){(t||null==e.beams)&&(e.beams=Vex.Flow.Beam.generateBeams(e.getTickables()));for(var s=0;s<e.beams.length;s++)e.beams[s].setContext(this.ctx).draw()},Vex.UI.Handler.prototype.updateProvisoryKey=function(e){if(null==this.provisoryTickable&&(this.provisoryTickable=new Vex.Flow.StaveNote({keys:["d/4"],duration:"4"})),null!=this.currentStave){if(this.provisoryTickable instanceof Vex.Flow.StaveNote&&"r"!=this.provisoryTickable.noteType){var t=NoteMap.getNoteName(this.currentStave,e);t!=this.provisoryTickable.keys[0]&&(this.provisoryTickable=this.provisoryTickable.clone({keys:[t]}),void 0!==this.provisoryTickable&&this.provisoryTickable.setStyle(Vex.UI.provisoryTickableStyle),this.provisoryTickable.setStemDirection(getStemDirection(this.currentStave,e.y)),this.provisoryTickable.setStave(this.currentStave),this.provisoryTickable.setTickContext(new Vex.Flow.TickContext))}else;this.drawProvisoryTickable(e)}},Vex.UI.Handler.prototype.updateProvisoryDuration=function(e){var t=null;this.provisoryTickable&&(t=this.provisoryTickable.x_shift),this.provisoryTickable=this.provisoryTickable.clone({duration:e}),t&&(this.provisoryTickable.x_shift=t),this.provisoryTickable.setStave(this.currentStave||this.staveList[0]),this.provisoryTickable.setTickContext(new Vex.Flow.TickContext),this.drawProvisoryTickable()},Vex.UI.Handler.prototype.updateProvisoryType=function(e){var t=null;switch(this.provisoryTickable&&(t=this.provisoryTickable.x_shift),e){case Vex.UI.TickableType.NOTE:this.provisoryTickable=new Vex.Flow.StaveNote({keys:["d/4"],duration:"4"});break;case Vex.UI.TickableType.REST:var s="4";this.provisoryTickable&&(s=this.provisoryTickable.duration),this.provisoryTickable=new Vex.Flow.StaveNote({keys:["b/4"],duration:s+"r"});break;case Vex.UI.TickableType.BAR:this.provisoryTickable=new Vex.Flow.BarNote;break;case Vex.UI.TickableType.CLEF:this.provisoryTickable=new Vex.Flow.ClefNote("treble"),this.provisoryTickable.clefKey="treble";break}this.provisoryTickable.setStave(this.currentStave||this.staveList[0]),this.provisoryTickable.setTickContext(new Vex.Flow.TickContext),void 0!==this.provisoryTickable.setStyle&&this.provisoryTickable.setStyle(Vex.UI.provisoryTickableStyle),t&&(this.provisoryTickable.x_shift=t),this.drawProvisoryTickable()},Vex.UI.Handler.prototype.drawProvisoryTickable=function(e){if(this.provisoryTickable&&null!=this.currentStave){if(this.redrawStave(this.currentStave),void 0!==e)if(this.provisoryTickable instanceof Vex.Flow.StaveNote)this.provisoryTickable.x_shift=e.x-this.provisoryTickable.getAbsoluteX()-5;else if(this.provisoryTickable instanceof Vex.Flow.BarNote){var t=new Vex.Flow.Barline(1);t.setX(e.x),t.draw(this.currentStave)}else this.provisoryTickable.getTickContext().setX(e.x-this.currentStave.getNoteStartX()-this.provisoryTickable.render_options.stave_padding);if(null==this.currentNote){var s=this.ctx.fillStyle,r=this.ctx.strokeStyle;this.ctx.fillStyle="gray",this.ctx.strokeStyle="gray",this.provisoryTickable instanceof Vex.Flow.BarNote||this.provisoryTickable.draw(),this.ctx.fillStyle=s,this.ctx.strokeStyle=r}}},Vex.UI.Handler.prototype.openMenuForKey=function(e,t){this.mouseListener.stopListening(),this.noteMenu.setNote(this.currentNote),this.noteMenu.setKeyIndex(this.currentNote.indexOfKey(e)),this.noteMenu.open(t)},Vex.UI.Handler.prototype.noteMenuClosed=function(){this.redraw(),this.mouseListener.startListening()},Vex.UI.Handler.prototype.addAccidentalToNote=function(e,t,s){void 0!==s&&-1!=s||(s=0);var r=new Vex.Flow.Accidental(e);t.addAccidental(s,r)},Vex.UI.Handler.prototype.addDotToNote=function(e){0==e.dots&&e.addDotToAll()},Vex.UI.Handler.prototype.beamWithNextNote=function(e){var t=this.currentStave.getNextNote(e);if(null!=t){notes=[e,t],t.setStemDirection(e.getStemDirection());var s=new Vex.Flow.Beam(notes);this.currentStave.pushBeam(s)}},Vex.UI.Handler.prototype.deleteNote=function(e){for(var t=0;t<this.staveList.length;t++){var s=this.staveList[t].getNotes(),r=s.indexOf(e);r>-1&&this.staveList[t].removeTickable(e)}},Vex.UI.Handler.prototype.exportNotes=function(){for(var e=[],t=0;t<this.staveList.length;t++)for(var s=0;s<this.staveList[t].getTickables().length;s++){var r=this.staveList[t].getTickables()[s];if(r instanceof Vex.Flow.StaveNote){var n=r.duration,i=r.keys[0],a=r.dots,o=r.noteType,l=i+"/"+n;"r"==o&&(l+="r"),1==a&&(l+="d"),e.push(l)}}return e},Vex.UI.Handler.prototype.importNotes=function(notes,timeSignature){if(notes&&timeSignature){for(var tickables=[],barNum=0,barDuration=eval(timeSignature),accumDuration=0,j=0;j<this.staveList.length;j++)this.staveList[j].setTickables([]);for(var i=0;i<notes.length&&barNum<this.staveList.length;i++){var noteArr=notes[i].split("/"),dur=noteArr[2],isDot=!1,isRest=!1;dur.includes("r")&&(dur=dur.replace("r",""),isRest=!0),dur.includes("d")&&(dur=dur.replace("d",""),isDot=!0);var staveNote=new Vex.Flow.StaveNote({clef:"treble",keys:[noteArr[0]+"/"+noteArr[1]],duration:isRest?dur+"r":dur});staveNote.autoStem(),staveNote.setStyle(Vex.UI.defaultNoteStyle),staveNote.setTickContext(new Vex.Flow.TickContext),dur=1/parseInt(dur),isDot&&(dur*=1.5,staveNote.addDotToAll()),accumDuration+dur>barDuration?(this.staveList[barNum].setTickables(tickables),tickables=[],barNum++,accumDuration=dur):accumDuration+=dur,barNum<this.staveList.length&&staveNote.setStave(this.staveList[barNum]),tickables.push(staveNote)}tickables.length>0&&barNum+1<=this.options.numberOfStaves&&this.staveList[barNum].setTickables(tickables);for(var j=0;j<this.staveList.length;j++)this.drawBeams(this.staveList[j],!0);this.redraw()}},Vex.UI.Handler.prototype.notesToBars=function(notes,timeSignature){if(notes&&timeSignature){for(var tickables=[],barNum=0,barDuration=eval(timeSignature),accumDuration=0,notesInBars=[],i=0;i<notes.length;i++){var noteArr=notes[i].split("/"),dur=noteArr[2],isDot=!1;if(dur.includes("r")&&(dur=dur.replace("r","")),dur.includes("d")&&(dur=dur.replace("d",""),isDot=!0),dur=1/parseInt(dur),isDot&&(dur*=1.5,staveNote.addDotToAll()),accumDuration+dur>barDuration)notesInBars.push(tickables),tickables=[],barNum++,accumDuration=dur;else if(accumDuration+dur==barDuration){if(i==notes.length-1)return tickables.push(notes[i]),notesInBars.push(tickables),barNum++,notesInBars}else accumDuration+=dur;tickables.push(notes[i])}return tickables.length>0&&barNum+1<=this.options.numberOfStaves&&notesInBars.push(tickables),notesInBars}},Vex.UI.Handler.prototype.changeBars=function(e){if(e>this.numBars){for(var t=this.numBars;t<e;t++)this.staveList[t].setTickables([]),this.staveList[t].usable=!0;this.redraw()}else if(e<this.numBars){for(var s=[],r=this.timeSignature.split("/")[1]+"r",n=0;n<parseInt(this.timeSignature.split("/")[0]);n++)s.push(new Vex.Flow.StaveNote({clef:"treble",keys:["b/4"],duration:r}));for(t=e;t<this.staveList.length;t++)this.staveList[t].setTickables(s),this.staveList[t].usable=!1;this.redraw()}this.numBars=e},Vex.UI.Handler.prototype.setTimeSignature=function(e){for(var t=0;t<this.staveList.length;t++)(t+1)%2==1&&this.staveList[t].setTimeSignature(e);this.timeSignature=e,this.redraw()},Vex.UI.Handler.prototype.highlightNote=function(e){if(0==e)this.staveList[0].getTickables()[0].setHighlight(!0),this.redraw();else{var t=0,s=this.staveList[t].getTickables().length;while(e>s)e-=s,t++,s=this.staveList[t].getTickables().length;s>e&&this.staveList[t].getTickables()[e].setHighlight(!0),this.redraw()}},Vex.UI.Handler.prototype.changeNumberOfBars=function(e,t){console.log("called"),this.container.removeChild(this.container.lastElementChild);var s={numberOfStaves:e};this.options=mergeProperties(this.options,s||{}),this.canvas=this.createCanvas(),this.renderer=new Vex.Flow.Renderer(this.canvas,Vex.Flow.Renderer.Backends.CANVAS),this.ctx=this.renderer.getContext(),this.staveList=this.createStaves(),this.ctx.scale(Vex.UI.scale,Vex.UI.scale),this.currentNote=null,this.currentStave=null,this.provisoryTickable=null,this.mouseListener=new Vex.UI.MouseListener(this,this.canvas,this.staveList),this.noteMenu=new Vex.UI.NoteMenu(this,this.canvas,this.ctx),this.noteMenu.init(),this.tipRenderer=new Vex.UI.TipRenderer(this.canvas),this.tipRenderer.init(),this.init(),this.importNotes(t,this.timeSignature)},Vex.UI.NoteMenu=function(e,t,s){this.handler=e,this.canvas=t,this.ctx=s,this.note=null,this.keyIndex=null,this.panelProps=null,this.buttons=[],this.accidentals=["doubleFlat","flat","natural","sharp","doubleSharp"],this.canRender=!1,this.currentButton=null,this.buttonRenderer=new Vex.UI.NoteMenuButtonRenderer},Vex.UI.NoteMenu.prototype.init=function(){},Vex.UI.NoteMenu.prototype.setTipArea=function(){var e=5,t=5,s=5,r=10,n=this.panelProps.x+e,i=this.panelProps.bottomY-s-r,a=this.panelProps.width-e-t,o=r-s;this.handler.tipRenderer.boundingBox={x:n,y:i,width:a,height:o},this.handler.tipRenderer.backgroundColor=this.panelProps.backgroundColor},Vex.UI.NoteMenu.prototype.open=function(e){this.panelProps=this.drawMenuPanel(e),this.buttonRenderer.panel=this.panelProps,this.buttonRenderer.context=this.ctx,this.buttonRenderer.ready&&(this.drawButtons(),this.canvas.addEventListener("mouseup",this,!1),this.canvas.addEventListener("mousemove",this,!1),this.canvas.addEventListener("contextmenu",this,!1),this.setTipArea())},Vex.UI.NoteMenu.prototype.close=function(){this.buttons=[],this.currentButton=null,this.canvas.removeEventListener("mouseup",this,!1),this.canvas.removeEventListener("mousemove",this,!1),this.canvas.removeEventListener("contextmenu",this,!1),this.handler.noteMenuClosed()},Vex.UI.NoteMenu.prototype.handleEvent=function(e){switch(e.preventDefault(),e.type){case"mouseup":this.handleMouseClick(e);break;case"mousemove":this.handleMouseMove(e);break}},Vex.UI.NoteMenu.prototype.setNote=function(e){this.note=e},Vex.UI.NoteMenu.prototype.setKeyIndex=function(e){this.keyIndex=e},Vex.UI.NoteMenu.prototype.drawMenuPanel=function(e){var t=this.canvas,s=200,r=100,n=e.x+30,i=e.y,a="right";(n+s)*Vex.UI.scale>t.width&&(n=e.x-s-30,a="left"),(i+r)*Vex.UI.scale>t.height&&(i=t.height/Vex.UI.scale-r-10);var o=this.ctx;return o.beginPath(),o.rect(n,i,s,r),o.fillStyle="#ddc",o.fill(),o.lineWidth=3,o.strokeStyle="black",o.stroke(),o.beginPath(),o.moveTo(e.x,e.y),"right"==a?o.lineTo(n,i):o.lineTo(n+s,i),o.stroke(),{width:s,height:r,x:n,y:i,rightX:n+s,bottomY:i+r,backgroundColor:"#ddc",position:a}},Vex.UI.NoteMenu.prototype.drawButtons=function(){this.buttons.push(this.buttonRenderer.closeButton());for(var e=0;e<this.accidentals.length;e++)this.buttons.push(this.buttonRenderer.accidentalButton(e));this.buttons.push(this.buttonRenderer.dotButton()),this.buttons.push(this.buttonRenderer.beamButton()),this.buttons.push(this.buttonRenderer.deleteButton())},Vex.UI.NoteMenu.prototype.handleMouseClick=function(e){if(0==e.button)for(var t=getMousePositionInCanvas(this.canvas,e),s=0;s<this.buttons.length;s++){var r=this.buttons[s];if(isCursorWithinRectangle(r.props.x,r.props.y,r.props.width,r.props.height,t.x,t.y)){r.callAction(this);break}}},Vex.UI.NoteMenu.prototype.handleMouseMove=function(e){for(var t=getMousePositionInCanvas(this.canvas,e),s=0;s<this.buttons.length;s++){var r=this.buttons[s];if(isCursorWithinRectangle(r.props.x,r.props.y,r.props.width,r.props.height,t.x,t.y)){null!=this.currentButton&&this.currentButton==r||(null!=this.currentButton&&this.currentButton.highlight(this.canvas,null,this.currentButton),this.currentButton=r,this.currentButton.highlight(this.canvas,"yellow",this.currentButton),this.handler.tipRenderer.showTip(this.currentButton.props.tip));break}r.highlight(this.canvas,null,r)}},Vex.UI.NoteMenu.prototype.addDoubleFlat=function(){this.handler.addAccidentalToNote("bb",this.note,this.keyIndex),this.close()},Vex.UI.NoteMenu.prototype.addFlat=function(){this.handler.addAccidentalToNote("b",this.note,this.keyIndex),this.close()},Vex.UI.NoteMenu.prototype.addNatural=function(){this.handler.addAccidentalToNote("n",this.note,this.keyIndex),this.close()},Vex.UI.NoteMenu.prototype.addSharp=function(){this.handler.addAccidentalToNote("#",this.note,this.keyIndex),this.close()},Vex.UI.NoteMenu.prototype.addDoubleSharp=function(){this.handler.addAccidentalToNote("##",this.note,this.keyIndex),this.close()},Vex.UI.NoteMenu.prototype.addDot=function(){console.log("got here"),this.handler.addDotToNote(this.note),this.close()},Vex.UI.NoteMenu.prototype.addBeam=function(){this.handler.beamWithNextNote(this.note),this.close()},Vex.UI.NoteMenu.prototype.deleteNote=function(){this.handler.deleteNote(this.note),this.close()},Vex.UI.MouseListener=function(e,t,s){this.handler=e,this.canvas=t,this.staveList=s},Vex.UI.MouseListener.prototype.handleEvent=function(e){switch(e.preventDefault(),e.type){case"mouseup":this.handleMouseClick(e);break;case"mousemove":this.handleMouseOver(e);break;case"wheel":this.handleMouseWheel(e);break;case"contextmenu":this.handleRightMouseClick(e);break;case"mouseleave":this.handleMouseLeave(e);break}},Vex.UI.MouseListener.prototype.startListening=function(){this.canvas.addEventListener("mouseup",this,!1),this.canvas.addEventListener("mousemove",this,!1),this.canvas.addEventListener("wheel",this,!1),this.canvas.addEventListener("contextmenu",this,!1),this.canvas.addEventListener("mouseleave",this,!1)},Vex.UI.MouseListener.prototype.stopListening=function(){this.canvas.removeEventListener("mouseup",this,!1),this.canvas.removeEventListener("mousemove",this,!1),this.canvas.removeEventListener("wheel",this,!1),this.canvas.removeEventListener("contextmenu",this,!1),this.canvas.removeEventListener("mouseleave",this,!1)},Vex.UI.MouseListener.prototype.handleMouseLeave=function(e){this.handler.redraw()},Vex.UI.MouseListener.prototype.handleMouseOver=function(e){var t=getMousePositionInCanvas(this.canvas,e),s=r(this.staveList,t);function r(e,t){for(var s=0;s<e.length;s++){var r=e[s].getBoundingBox();if(isCursorWithinRectangle(r.getX(),r.getY(),r.getW(),r.getH(),t.x,t.y)&&e[s].usable)return e[s]}return null}function n(e,t){var s=[];null!=e&&(s=e.getTickables());for(var r=0;r<s.length;r++)if(s[r]instanceof Vex.Flow.StaveNote){void 0!==s[r].setHighlight&&s[r].setHighlight(!1);var n=s[r].getBoundingBox(),i=e.getBoundingBox();if(isCursorWithinRectangle(n.getX(),i.getY(),n.getW(),i.getH(),t.x,t.y))return s[r]}return null}s&&this.handler.currentStave&&s!=this.handler.currentStave&&this.handler.redraw(),this.handler.currentStave=s,this.handler.currentNote=n(this.handler.currentStave,t),this.handler.updateProvisoryKey(t),null!=this.handler.currentNote&&(this.handler.currentNote.setHighlight(!0),this.handler.redraw())},Vex.UI.MouseListener.prototype.handleMouseClick=function(e){switch(e.button){case 0:this.handleLeftMouseClick(e);break;case 1:this.handleMiddleMouseClick(e);break;case 2:break;default:alert("You have a strange Mouse!")}},Vex.UI.MouseListener.prototype.handleMouseWheel=function(e){var t=Math.max(-1,Math.min(1,e.wheelDelta||e.deltaY));if(null!=this.handler.currentNote){var s=this.handler.currentNote.duration,r=void 0!==Vex.Flow.durationAliases[s];r&&(s=Vex.Flow.durationAliases[s]),t>0?s*=2:s/=2,s<1&&(s=1),s=""+s;var n=this.handler.currentNote.clone({duration:s});this.handler.currentStave.replaceTickable(this.handler.currentNote,n),this.handler.currentNote=n,this.handler.currentNote.setHighlight(!0),this.handler.redraw()}else if(null!=this.handler.provisoryTickable)if(this.handler.provisoryTickable instanceof Vex.Flow.StaveNote){s=this.handler.provisoryTickable.duration,r=void 0!==Vex.Flow.durationAliases[s];r&&(s=Vex.Flow.durationAliases[s]),t>0?s*=2:s/=2,s<1&&(s=1),s=""+s,this.handler.updateProvisoryDuration(s)}else if(this.handler.provisoryTickable instanceof Vex.Flow.BarNote){var i=(this.handler.provisoryTickable.type+5+t)%6+1;this.handler.provisoryTickable.setType(i),this.handler.drawProvisoryTickable()}else if(this.handler.provisoryTickable instanceof Vex.Flow.ClefNote){switch(this.handler.provisoryTickable.clefKey){case"treble":this.handler.provisoryTickable.clefKey="bass",this.handler.provisoryTickable.setClef("bass");break;case"bass":this.handler.provisoryTickable.clefKey="treble",this.handler.provisoryTickable.setClef("treble")}this.handler.drawProvisoryTickable()}},Vex.UI.MouseListener.prototype.handleLeftMouseClick=function(e){if(null!=this.handler.currentStave&&this.handler.currentStave.usable){var t=getMousePositionInCanvas(this.canvas,e);if(null==this.handler.currentNote){var s=getLastTickableBeforeXPosition(this.handler.currentStave,t.x),r=getFirstTickableAfterXPosition(this.handler.currentStave,t.x),n=this.handler.provisoryTickable.clone();this.handler.currentStave.insertTickableBetween(n,s,r),this.handler.redraw(!0)}else{var i=NoteMap.getNoteName(this.handler.currentStave,t),a=this.handler.currentNote.indexOfKey(i);if(-1==a){var o=this.handler.currentNote.keys;o.push(i);var l=this.handler.currentNote;n=l.clone({keys:o});this.handler.currentStave.replaceTickable(l,n),this.handler.currentNote=n,this.handler.redraw()}}}},Vex.UI.MouseListener.prototype.handleMiddleMouseClick=function(e){var t=this.handler.provisoryTickable,s=null;t instanceof Vex.Flow.StaveNote?s="n"==t.noteType?Vex.UI.TickableType.REST:Vex.UI.TickableType.BAR:t instanceof Vex.Flow.BarNote&&(s=Vex.UI.TickableType.NOTE),this.handler.updateProvisoryType(s)},Vex.UI.MouseListener.prototype.handleRightMouseClick=function(e){if(null!=this.handler.currentStave&&null!=this.handler.currentNote){var t=getMousePositionInCanvas(this.canvas,e),s=NoteMap.getNoteName(this.handler.currentStave,t);this.handler.openMenuForKey(s,t)}},Vex.Flow.Stave.prototype.tickables=[],Vex.Flow.Stave.prototype.beams=[],Vex.Flow.Stave.prototype.usable=!0,Vex.Flow.Stave.prototype.setTickables=function(e){this.tickables=e},Vex.Flow.Stave.prototype.getTickables=function(){return this.tickables},Vex.Flow.Stave.prototype.getNotes=function(){for(var e=[],t=0;t<this.tickables.length;t++){var s=this.tickables[t];s instanceof Vex.Flow.StaveNote&&e.push(s)}return e},Vex.Flow.Stave.prototype.insertTickableBetween=function(e,t,s){if(e instanceof Vex.Flow.ClefNote){if(this.getClefModifierIndex()<0)return void this.addClef(e.clefKey);if(null==t)return void this.replaceClef(e.clefKey);if(0==this.getNotes().length)return}else if(e instanceof Vex.Flow.BarNote){if(null==s)return void this.setEndBarType(e.type);if(0==this.getNotes().length)return}if(null==s)this.pushTickable(e);else{var r=this.tickables.indexOf(s);this.tickables.splice(r,0,e)}},Vex.Flow.Stave.prototype.getClefModifierIndex=function(){for(var e=0;e<this.modifiers.length;e++){var t=this.modifiers[e];if(t instanceof Vex.Flow.Clef)return e}return-1},Vex.Flow.Stave.prototype.replaceClef=function(e){var t=this.start_x;this.clef=e;new Vex.Flow.Clef(e);this.modifiers.splice(this.getClefModifierIndex(),1),this.glyphs=[],this.addClef(e),this.start_x=t},Vex.Flow.Stave.prototype.getPreviousTickable=function(e){var t=this.tickables.indexOf(e);return 0==t?null:this.tickables[t-1]},Vex.Flow.Stave.prototype.getNextTickable=function(e){var t=this.tickables.indexOf(e);return t==this.tickables.length-1?null:this.tickables[t+1]},Vex.Flow.Stave.prototype.getNextNote=function(e){var t=this.tickables.indexOf(e);while(t<this.tickables.length)if(t++,this.tickables[t]instanceof Vex.Flow.StaveNote)return this.tickables[t];return null},Vex.Flow.Stave.prototype.replaceTickable=function(e,t){if(null!=e.beam){var s=e.beam,r=s.tickables.indexOf(e);s.notes[r]=t}r=this.tickables.indexOf(e);this.tickables[r]=t},Vex.Flow.Stave.prototype.removeTickable=function(e){this.tickables.splice(this.tickables.indexOf(e),1)},Vex.Flow.Stave.prototype.pushTickable=function(e){this.tickables.push(e)},Vex.Flow.Stave.prototype.beams=[],Vex.Flow.Stave.prototype.setBeams=function(e){this.beams=e},Vex.Flow.Stave.prototype.getBeams=function(){return this.beams},Vex.Flow.Stave.prototype.pushBeam=function(e){this.beams.push(e)},Vex.Flow.StaveNote.prototype.indexOfKey=function(e){return this.keys.indexOf(e)},Vex.Flow.StaveNote.prototype.letter="R",Vex.Flow.StaveNote.prototype.getPlayEvents=function(e){for(var t=[],s=0;s<this.keys.length;s++)t.push(MIDI.keyToNote[this.keys[s].replace("/","")]);for(s=0;s<t.length;s++)t[s]+=Vex.UI.ClefOffsets[e.clef];var r=e.defaultTime/this.duration;for(s=0;s<this.modifiers.length;s++){var n=this.modifiers[s];if(n instanceof Vex.Flow.Accidental){var i;switch(n.type){case"bb":i=-2;break;case"b":i=-1;break;case"n":i=0;break;case"#":i=1;break;case"##":i=2;break}t[n.index]+=i}else n instanceof Vex.Flow.Dot&&(r*=1.5)}var a=[];return a.push({type:"channel",channel:0,subtype:1==t.length?"noteOn":"chordOn",noteNumber:1==t.length?t[0]:t,velocity:127,queuedTime:e.delay,note:this}),a.push({type:"channel",channel:0,subtype:1==t.length?"noteOff":"chordOff",noteNumber:1==t.length?t[0]:t,queuedTime:e.delay+r,note:this}),e.delay=e.delay+r,a},Vex.Flow.StaveNote.prototype.clone=function(e){var t={keys:this.keys,stem_direction:this.getStemDirection(),duration:this.duration,noteType:this.noteType},s=mergeProperties(t,e);s.duration=s.duration+s.noteType;var r=new Vex.Flow.StaveNote(s);r.setStyle(this.note_heads[0].style),null!=this.modifierContext&&null!=this.getDots()&&r.addDotToAll(),r.beam=this.beam;for(var n=0;n<this.modifiers.length;n++)this.modifiers[0]instanceof Vex.Flow.Accidental&&r.addAccidental(this.modifiers[n].index,new Vex.Flow.Accidental(this.modifiers[n].type));return r},Vex.Flow.StaveNote.prototype.setHighlight=function(e){e?this.setStyle(Vex.UI.highlightNoteStyle):this.setStyle(Vex.UI.defaultNoteStyle)},Vex.Flow.StaveNote.prototype.change=function(e){var t=new Array;for(var s in this.keys){var r=this.keys[s].split("/");r[0]=r[0].toUpperCase();var n=r[0].substring(0,1),i=r[0].substring(1),a=parseInt(r[1]),o=0;for(var l in NoteMap.noteMap)if(NoteMap.noteMap[l]==n){o=l;break}if("UP"==e)o++;else if("DOWN"==e)o--;else if("SHARP"==e){switch(i){case"":case null:case void 0:i="#";break;case"#":i="##";break}alert(i)}o==NoteMap.noteMap.length?(o=0,a++):o<0&&(o=NoteMap.noteMap.length-1,a--),n=NoteMap.noteMap[o],t.push(n+i+"/"+a)}var c=this.duration,u=this.noteType;if("PAUSE"==e){"n"==u?u="r":"r"==u&&(u="n"),c=Vex.Flow.parseNoteDurationString(this.duration);for(var d="",p=0;p<c.dots;p++)d+="d";c=c.duration+d+u}return this.clone({keys:t,duration:c})},Vex.Flow.StaveNote.prototype.drawFlag=function(){if(!this.context)throw new Vex.RERR("NoCanvasContext","Can't draw without a canvas context.");var e=this.context,t=this.getGlyph(),s=null===this.beam,r=this.getNoteHeadBounds(),n=this.getNoteHeadBeginX(),i=this.getNoteHeadEndX();if(t.flag&&s){var a,o,l=this.stem.getHeight();this.getStemDirection()===Vex.Flow.Stem.DOWN?(a=n,o=r.y_top-l,t.code_flag_downstem):(a=i,o=r.y_bottom-l,t.code_flag_upstem);var c=e.fillStyle;e.fillStyle=this.note_heads[0].style.fillStyle,e.openGroup("flag",null,{pointerBBox:!0}),this.applyStyle(e,this.getFlagStyle()||!1),this.flag.render(e,a,o),this.restoreStyle(e,this.getFlagStyle()||!1),e.closeGroup(),e.fillStyle=c}},Vex.Flow.Dot.prototype.draw=function(){if(!this.context)throw new Vex.RERR("NoContext","Can't draw dot without a context.");if(!this.note||null==this.index)throw new Vex.RERR("NoAttachedNote","Can't draw dot without a note and index.");this.note.stave.options.spacing_between_lines_px;var e=this.note.getModifierStartXY(this.position,this.index);"tabnotes"===this.note.getCategory()&&(e.y=this.note.getStemExtents().baseY);var t=e.x+this.x_shift+this.width-this.radius,s=e.y+this.y_shift,r=this.context;r.beginPath(),r.arc(t,s,this.radius,0,2*Math.PI,!1),r.fill()},Vex.Flow.BarNote.prototype.clone=function(){var e=new Vex.Flow.BarNote;return e.setType(this.getType()),e.setStave(this.getStave()),e.setTickContext(this.getTickContext()),e},Vex.Flow.BarNote.prototype.getPlayEvents=function(e,t){var s=[];function r(){e.beginRepeatIndex=t.length+s.length}function n(){for(var r=e.beginRepeatIndex||0;r<t.length;r++)s.push(t[r])}switch(this.type){case Vex.Flow.Barline.type.REPEAT_BEGIN:r();break;case Vex.Flow.Barline.type.REPEAT_END:n();break;case Vex.Flow.Barline.type.REPEAT_BOTH:n(),r();break}return s},Vex.Flow.ClefNote.prototype.clone=function(){var e=new Vex.Flow.ClefNote(this.clefKey);return e.clefKey=this.clefKey,e.setTickContext(new Vex.Flow.TickContext),e.getTickContext().setX(this.getTickContext().getX()),e},Vex.Flow.ClefNote.prototype.getPlayEvents=function(e){return e.clef=this.clefKey,[]},Vex.UI.NoteMap=function(){this.noteMap=["C","D","E","F","G","A","B"]},Vex.UI.NoteMap.prototype.getNoteName=function(e,t){var s=t.y-e.getBoundingBox().getY(),r=Math.round(s/(e.options.spacing_between_lines_px/2));return this.toNoteName(r,e)},Vex.UI.NoteMap.prototype.toNoteName=function(e,t){var s=this.getBaseNote(t),r=this.noteMap.indexOf(s.note),n=(r-e)%7;while(n<0)n+=7;var i=s.octave-Math.floor(e/7);return 5!=n&&6!=n||i--,this.noteMap[n]+"/"+i},Vex.UI.NoteMap.prototype.getBaseNote=function(e){return{note:"G",octave:6}};var NoteMap=new Vex.UI.NoteMap;Vex.UI.TipRenderer=function(e){this.canvas=e,this.color=null,this.fontSize=null,this.fontName=null,this.style=null,this.context=null,this.lineWidth=null,this.textAlign=null,this.textBaseline=null,this.boundingBox=null,this.showingTip=null,this.backgroundColor=null},Vex.UI.TipRenderer.prototype.init=function(){this.textAlign="left",this.textBaseline="middle",this.color="black",this.fontName="Calibri",this.lineWidth=1,this.style="normal",this.fontSize=10,this.boundingBox={x:0,y:0,width:200,height:20},this.context=this.canvas.getContext("2d"),this.showingTip=!1,this.backgroundColor="white"},Vex.UI.TipRenderer.prototype.showTip=function(e){this.showingTip&&this.hideTip();var t=this.style+" "+this.fontSize+"pt "+this.fontName;this.context.font=t,this.context.fillStyle=this.color,this.context.textAlign=this.textAlign,this.context.lineWidth=this.lineWidth,this.context.textBaseline=this.textBaseline,this.context.fillText(e,this.boundingBox.x,this.boundingBox.y),this.showingTip=!0},Vex.UI.TipRenderer.prototype.hideTip=function(){this.context.beginPath(),this.context.rect(this.boundingBox.x,this.boundingBox.y-5,this.boundingBox.width,this.boundingBox.height+10),this.context.fillStyle=this.backgroundColor,this.context.fill(),this.showingTip=!1},Vex.UI.NoteMenuButtonRenderer=function(e,t){this.ready=!1;var s=this;this.menuButtonsImg=new Image,this.menuButtonsImg.src="https://cdn.jsdelivr.net/gh/R-D-D-D/Ground-Zero/web_frontend/src/resources/noteMenuButtons.gif",this.menuButtonsImg.onload=function(){s.ready=!0}},Vex.UI.NoteMenuButtonRenderer.prototype.closeButton=function(){var e=this.panel,t=this.context,s=5,r=4,n=15,i=e.rightX-n-s,a=e.y+s;return t.beginPath(),t.rect(i,a,n,n),t.fillStyle="red",t.fill(),t.beginPath(),t.lineWidth=3,t.moveTo(i+r,a+r),t.lineTo(i+n-r,a+n-r),t.moveTo(i+r,a+n-r),t.lineTo(i+n-r,a+r),t.strokeStyle="white",t.stroke(),new Vex.UI.Button({backgroundColor:"red",width:n,height:n,x:i,y:a,rightX:i+n,bottomY:a+n,name:"closeButton",action:"close",tip:"Close the menu"})},Vex.UI.NoteMenuButtonRenderer.prototype.closeButton=function(){var e=this.panel,t=this.context,s=5,r=4,n=15,i=e.rightX-n-s,a=e.y+s;return t.beginPath(),t.rect(i,a,n,n),t.fillStyle="red",t.fill(),t.beginPath(),t.lineWidth=3,t.moveTo(i+r,a+r),t.lineTo(i+n-r,a+n-r),t.moveTo(i+r,a+n-r),t.lineTo(i+n-r,a+r),t.strokeStyle="white",t.stroke(),new Vex.UI.Button({backgroundColor:"red",width:n,height:n,x:i,y:a,rightX:i+n,bottomY:a+n,name:"closeButton",action:"close",tip:"Close the menu"})},Vex.UI.NoteMenuButtonRenderer.prototype.accidentalButton=function(e){var t=this.panel,s=this.context,r=this.menuButtonsImg,n=[400,100,200,0,300],i=["addDoubleFlat","addFlat","addNatural","addSharp","addDoubleSharp"],a=["Add double flat to key","Add flat to key","Add natural to key","Add sharp to key","Add double sharp to key"],o=10,l=5,c=10,u=n[e],d=0,p=100,h=100,m=25,v=m,f=t.x+o+e*(l+m),b=t.y+c;return s.drawImage(r,u,d,p,h,f,b,m,v),new Vex.UI.Button({backgroundColor:"white",x:f,y:b,rightX:f+m,bottomY:b+v,width:m,height:v,action:i[e],tip:a[e]})},Vex.UI.NoteMenuButtonRenderer.prototype.dotButton=function(){var e=this.panel,t=this.context,s=this.menuButtonsImg,r=700,n=10,i=10,a=r,o=0,l=100,c=100,u=25,d=u,p=e.x+n,h=e.y+2*i+d;return t.drawImage(s,a,o,l,c,p,h,u,d),new Vex.UI.Button({backgroundColor:"white",x:p,y:h,rightX:p+u,bottomY:h+d,width:u,height:d,action:"addDot",tip:"Add dot to key"})},Vex.UI.NoteMenuButtonRenderer.prototype.beamButton=function(){var e=this.panel,t=this.context,s=this.menuButtonsImg,r=500,n=10,i=5,a=10,o=r,l=0,c=100,u=100,d=25,p=d,h=e.x+n+(i+d),m=e.y+2*a+p;return t.drawImage(s,o,l,c,u,h,m,d,p),new Vex.UI.Button({backgroundColor:"white",x:h,y:m,rightX:h+d,bottomY:m+p,width:d,height:p,action:"addBeam",tip:"Beam with next note"})},Vex.UI.NoteMenuButtonRenderer.prototype.deleteButton=function(){var e=this.panel,t=this.context,s=this.menuButtonsImg,r=800,n=10,i=5,a=10,o=r,l=0,c=100,u=100,d=25,p=d,h=e.x+n+3*(i+d),m=e.y+2*a+p;return t.drawImage(s,o,l,c,u,h,m,d,p),new Vex.UI.Button({backgroundColor:"white",x:h,y:m,rightX:h+d,bottomY:m+p,width:d,height:p,action:"deleteNote",tip:"Remove key"})},Vex.UI.NoteMenuButtonRenderer.prototype.tieButton=function(){var e=this.panel,t=this.context,s=this.menuButtonsImg,r=600,n=10,i=5,a=10,o=r,l=0,c=100,u=100,d=25,p=d,h=e.x+n+2*(i+d),m=e.y+2*a+p;return t.drawImage(s,o,l,c,u,h,m,d,p),new Vex.UI.Button({backgroundColor:"white",x:h,y:m,rightX:h+d,bottomY:m+p,width:d,height:p,action:"addTie",tip:"Tie with next note"})},Vex.UI.Button=function(e){this.props=e},Vex.UI.Button.prototype.highlight=function(e,t,s){null==t&&(t=s.props.backgroundColor);var r=4,n=e.getContext("2d");n.beginPath(),n.lineWidth=r,n.rect(s.props.x,s.props.y,s.props.width,s.props.height),n.strokeStyle=t,n.stroke()},Vex.UI.Button.prototype.showTip=function(){},Vex.UI.Button.prototype.callAction=function(e){e[this.props.action]()},Vex.UI.TickableType={NOTE:"note",REST:"rest",BAR:"bar",CLEF:"clef"},__webpack_exports__["a"]=Vex.UI},"4a1f":function(e,t,s){"use strict";var r=s("b058"),n=s.n(r);n.a},"4ff0":function(e,t,s){},"56d7":function(e,t,s){"use strict";s.r(t);s("e260"),s("e6cf"),s("cca6"),s("a79d");var r=s("2b0e"),n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-app",{attrs:{id:"app"}},[s("page-header"),s("v-main",[s("router-view")],1)],1)},i=[],a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("v-app-bar",{attrs:{light:"",app:"",absolute:"",color:"white"}},[s("v-app-bar-nav-icon",{on:{click:function(t){e.drawer=!0}}}),s("router-link",{staticClass:"pl-3",attrs:{id:"logo",to:"/"}},[s("v-toolbar-title",{staticClass:"font-weight-bold"},[e._v("VIOLIAN")])],1),s("v-spacer"),e.$store.state.isUserLoggedIn?s("v-toolbar-items",[s("v-btn",{attrs:{depressed:"",to:"/course/index",color:"white"}},[e._v("My Courses")]),s("v-btn",{staticStyle:{position:"relative"},attrs:{depressed:"",to:"/courses/threads/index",color:"white"}},[e._v("Notifications"),s("div",{attrs:{id:"notification"}},[e._v(e._s(e.notifications))])]),s("v-btn",{attrs:{depressed:"",color:"white"},on:{click:e.logout}},[e._v("Log Out")])],1):s("v-toolbar-items",[s("v-btn",{attrs:{depressed:"",to:"/register",color:"white"}},[e._v("Register")]),s("v-btn",{attrs:{depressed:"",to:"/login",color:"white"}},[e._v("Log In")])],1)],1),s("v-navigation-drawer",{attrs:{absolute:"",temporary:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[e.$store.state.isUserLoggedIn?s("v-list",{attrs:{nav:"",dense:""}},[s("v-list-item-group",{attrs:{"active-class":"text--accent-4"}},[s("v-list-item",{attrs:{to:"/"}},[s("v-list-item-icon",[s("v-icon",[e._v("mdi-home")])],1),s("v-list-item-title",[e._v("Home")])],1),e.$store.state.user.isStudent?s("v-list-item",{attrs:{to:"/student"}},[s("v-list-item-icon",[s("v-icon",[e._v("mdi-playlist-music")])],1),s("v-list-item-title",[e._v("My Courses")])],1):e._e(),e.$store.state.user.isTutor?s("v-list-item",{attrs:{to:"/course/index"}},[s("v-list-item-icon",[s("v-icon",[e._v("mdi-notebook-outline")])],1),s("v-list-item-title",[e._v("My Courses")])],1):e._e(),e.$store.state.isUserLoggedIn?s("v-list-item",{on:{click:e.logout}},[s("v-list-item-icon",[s("v-icon",[e._v("mdi-logout")])],1),s("v-list-item-title",[e._v("Log Out")])],1):e._e()],1)],1):s("v-list",{attrs:{nav:"",dense:""}},[s("v-list-item-group",{attrs:{"active-class":"text--accent-4"}},[s("v-list-item",{attrs:{to:"/"}},[s("v-list-item-icon",[s("v-icon",[e._v("mdi-home")])],1),s("v-list-item-title",[e._v("Home")])],1),e.$store.state.isUserLoggedIn?e._e():s("v-list-item",{attrs:{to:"/register"}},[s("v-list-item-icon",[s("v-icon",[e._v("mdi-account")])],1),s("v-list-item-title",[e._v("Register")])],1),e.$store.state.isUserLoggedIn?e._e():s("v-list-item",{attrs:{to:"/login"}},[s("v-list-item-icon",[s("v-icon",[e._v("mdi-account")])],1),s("v-list-item-title",[e._v("Log In")])],1)],1)],1)],1)],1)},o=[],l=s("5530"),c=s("2f62"),u={name:"Header",data:function(){return{drawer:!1,messages:0}},methods:{logout:function(){this.$store.dispatch("setToken",null),this.$store.dispatch("setUser",null),this.$router.push("/")}},computed:Object(l["a"])({},Object(c["b"])(["user","notifications"])),mounted:function(){}},d=u,p=(s("e933"),s("2877")),h=s("6544"),m=s.n(h),v=s("40dc"),f=s("5bc1"),b=s("8336"),g=s("132d"),x=s("8860"),_=s("da13"),w=s("1baa"),y=s("34c3"),C=s("5d23"),k=s("f774"),S=s("2fa4"),T=s("2a7f"),V=Object(p["a"])(d,a,o,!1,null,"6000137a",null),O=V.exports;m()(V,{VAppBar:v["a"],VAppBarNavIcon:f["a"],VBtn:b["a"],VIcon:g["a"],VList:x["a"],VListItem:_["a"],VListItemGroup:w["a"],VListItemIcon:y["a"],VListItemTitle:C["b"],VNavigationDrawer:k["a"],VSpacer:S["a"],VToolbarItems:T["a"],VToolbarTitle:T["b"]});var I={name:"App",components:{"page-header":O},data:function(){return{}}},B=I,M=(s("034f"),s("7496")),R=s("f6c4"),P=Object(p["a"])(B,n,i,!1,null,null,null),E=P.exports;m()(P,{VApp:M["a"],VMain:R["a"]});s("b0c0");var N=s("8c4f"),L=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("v-container",[s("v-row",{staticClass:"mt-10"},[s("v-col",{staticClass:"text-left",attrs:{cols:"8"}},[s("h1",[e._v("Welcome to Music Academy")])])],1),s("v-row",{staticClass:"mb-12"},[s("v-col",{attrs:{cols:"8"}},[s("v-autocomplete",{attrs:{items:e.items,loading:e.isLoading,"search-input":e.search,"cache-items":"",multiple:"",clearable:"","hide-details":"","hide-selected":"","item-text":"name","item-value":"symbol",label:"Search for a course...",solo:""},on:{"update:searchInput":function(t){e.search=t},"update:search-input":function(t){e.search=t}},scopedSlots:e._u([{key:"no-data",fn:function(){return[s("v-list-item",[s("v-list-item-title",[e._v("Search for your favorite "),s("strong",[e._v("Course")])])],1)]},proxy:!0},{key:"item",fn:function(t){var r=t.item;return[s("v-list-item",{on:{click:function(t){return e.go_to_course(t,r.id)}}},[s("v-list-item-content",[e._v(e._s(r.name))])],1)]}}]),model:{value:e.model,callback:function(t){e.model=t},expression:"model"}})],1)],1),s("v-divider"),s("v-row",{staticClass:"mt-10"},[s("v-col",{staticClass:"text-left",attrs:{cols:"12"}},[s("h2",[e._v("Popular Courses")])]),e._l(e.allCourses,(function(t){return s("v-col",{attrs:{sm:"6",md:"4",lg:"3"}},[s("v-card",{staticClass:"mx-auto"},[s("v-img",{staticClass:"white--text align-end",attrs:{height:"200px",src:"https://images.pexels.com/photos/1246437/pexels-photo-1246437.jpeg?cs=srgb&dl=close-up-photo-of-person-playing-piano-1246437.jpg&fm=jpg"}},[s("v-card-title",{staticStyle:{"text-shadow":"1px 1px 2px #000000"}},[e._v(e._s(t.name))])],1),s("v-card-subtitle",{staticClass:"pb-0 text-left"},[e._v("Drum")]),s("v-card-text",{staticClass:"text-left text--primary pb-0"},[s("div",[e._v("Whitehaven Beach")])]),s("v-card-actions",[s("v-btn",{attrs:{color:"indigo",text:""},on:{click:function(s){return e.go_to_course(s,t.id)}}},[e._v("Find out more")])],1)],1)],1)}))],2)],1)],1)},U=[],j=(s("96cf"),s("1da1")),D=s("bc3a"),F=s.n(D),A=(s("7db0"),s("c975"),s("d81d"),s("a434"),s("d3b7"),s("3ca3"),s("ddb0"),s("0e44")),$={create:function(e){return W().post("lesson/new",e)},list:function(e){return W().get("lesson/list?cid=".concat(e))},edit:function(e){return W().put("lesson/edit",e)},delete:function(e){return W().delete("lesson/del?lid=".concat(e))}},H={subscribe:function(e){return W().post("subscribe/new",e)},getSubscriptionInfoOfStudent:function(e){return W().get("subscribe/get/student?uid=".concat(e))},getSubscriptionInfoOfCourse:function(e){return W().get("subscribe/get/course?cid=".concat(e))},getAllTutors:function(){return W().get("tutor/list")}};r["a"].use(c["a"]);var q=new c["a"].Store({strict:!0,plugins:[Object(A["a"])()],state:{token:null,user:null,userOwnedCourses:[],userSubscribedCourses:[],allTutors:[],allCourses:[],isUserLoggedIn:!1,notifications:null},getters:{isSubscribed:function(e){return function(t){var s=e.userSubscribedCourses.find((function(e){return e.id===t}));return!!s}},isOwned:function(e){return function(t){var s=e.userOwnedCourses.find((function(e){return e.id===t}));return!!s}}},mutations:{resetState:function(e){Object.assign(e,{token:null,user:null,userOwnedCourses:[],userSubscribedCourses:[],allTutors:[],allCourses:[],isUserLoggedIn:!1,notifications:0})},setToken:function(e,t){e.token=t},setUser:function(e,t){e.user=t},setNotifications:function(e,t){e.notifications=t},logIn:function(e){e.isUserLoggedIn=!0},logOut:function(e){e.isUserLoggedIn=!1},setAllTutors:function(e,t){e.allTutors=t},setUserOwnedCourses:function(e,t){e.userOwnedCourses=t},setUserSubscribedCourses:function(e,t){e.userSubscribedCourses=t},setNav:function(e,t){e.hideNav=t},setAllCourses:function(e,t){e.allCourses=t},addCourse:function(e,t){e.userOwnedCourses.push(t)},deleteCourse:function(e,t){var s=e.userOwnedCourses.find((function(e){return e.id==t})),r=e.userOwnedCourses.indexOf(s);if(!(r>=0))throw new Error("negative index");e.userOwnedCourses.splice(r,1)},deleteAllLessons:function(e,t){var s=e.userOwnedCourses.find((function(e){return e.id==t.id}));s.lessons=[]},addLesson:function(e,t){var s=e.userOwnedCourses.find((function(e){return e.id==t.CourseId}));null==s.lessons&&(s.lessons=[]),s.lessons.push(t)},deleteLesson:function(e,t){var s=e.userOwnedCourses.find((function(e){return e.id==t.CourseId})),r=s.lessons.indexOf(t);s.lessons.splice(r,1)},addExercise:function(e,t){var s=e.userOwnedCourses.find((function(e){return e.id==t.CourseId})),r=s.lessons.find((function(e){return e.id==t.exercise.LessonId}));null==r.exercises&&(r.exercises=[]),r.exercises.push(t.exercise)}},actions:{setToken:function(e,t){var s=e.commit;s("setToken",t),t?s("logIn"):(s("logOut"),s("resetState"))},setUser:function(e,t){var s=e.commit;s("setUser",t)},setNotifications:function(e,t){var s=e.commit;s("setNotifications",t)},addCourse:function(e,t){var s=e.commit;s("addCourse",t)},getAllCourses:function(e){return Object(j["a"])(regeneratorRuntime.mark((function t(){var s,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=e.commit,t.next=3,z.listAll();case 3:r=t.sent,s("setAllCourses",r.data.courses);case 5:case"end":return t.stop()}}),t)})))()},deleteCourse:function(e,t){return Object(j["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,Promise.all(t.lessons.map((function(e){return $.delete(e.id)})));case 2:return e.commit("deleteAllLessons",t),s.next=5,z.delete(t.id);case 5:e.commit("deleteCourse",t.id);case 6:case"end":return s.stop()}}),s)})))()},addLesson:function(e,t){var s=e.commit;s("addLesson",t)},deleteLesson:function(e,t){return Object(j["a"])(regeneratorRuntime.mark((function s(){var r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return r=e.commit,s.next=3,$.delete(t.id);case 3:r("deleteLesson",t);case 4:case"end":return s.stop()}}),s)})))()},addExercise:function(e,t){var s=e.commit;s("addExercise",t)},editRhythm:function(e,t){return Object(j["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,$.edit({lessonObj:t.newLesson});case 3:return s.next=5,e.dispatch("getLessons",e.state.user.id);case 5:s.next=10;break;case 7:s.prev=7,s.t0=s["catch"](0),console.log(s.t0);case 10:case"end":return s.stop()}}),s,null,[[0,7]])})))()},subscribe:function(e,t){return Object(j["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,H.subscribe(t);case 3:e.dispatch("getCoursesForStudent",{id:t.studentId}),s.next=9;break;case 6:s.prev=6,s.t0=s["catch"](0),console.log(s.t0);case 9:case"end":return s.stop()}}),s,null,[[0,6]])})))()},getAllTutors:function(e){return Object(j["a"])(regeneratorRuntime.mark((function t(){var s,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=e.commit,t.prev=1,t.next=4,H.getAllTutors();case 4:r=t.sent,n=r.data.tutors.map((function(e){return e.lessons=null,e})),s("setAllTutors",n),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})))()},getCoursesForTutor:function(e,t){return Object(j["a"])(regeneratorRuntime.mark((function s(){var r,n,i;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return r=e.commit,s.next=3,z.list(t.id);case 3:n=s.sent,i=n.data.courses,r("setUserOwnedCourses",i);case 6:case"end":return s.stop()}}),s)})))()},getCoursesForStudent:function(e,t){return Object(j["a"])(regeneratorRuntime.mark((function s(){var r,n,i;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return r=e.commit,s.next=3,H.getSubscriptionInfoOfStudent(t.id);case 3:n=s.sent,i=n.data.courses,r("setUserSubscribedCourses",i);case 6:case"end":return s.stop()}}),s)})))()}}}),W=function(){return F.a.create({baseURL:"/api/",headers:{Authorization:"Bearer ".concat(q.state.token)}})},z={create:function(e){return W().post("course/new",e)},list:function(e){return W().get("course/list?uid=".concat(e))},listAll:function(e){return e?W().get("course/listall?search=".concat(e)):W().get("course/listall")},show:function(e){return W().get("course/show?cid=".concat(e))},edit:function(e){return W().put("course/edit",e)},delete:function(e){return W().delete("course/del?cid=".concat(e))}},K=s("2ef0"),X=s.n(K),Y={name:"Home",data:function(){return{isLoading:!1,items:[{name:"hey",id:1},{name:"yo",id:2},{name:"yo",id:3}],model:null,search:null}},watch:{model:function(e){console.log(e)},search:X.a.debounce(function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""==t||void 0==t){e.next=13;break}return this.isLoading=!0,e.prev=2,e.next=5,z.listAll(t);case 5:this.items=e.sent.data.courses,this.isLoading=!1,e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](2),this.isLoading=!1,console.log(e.t0);case 13:case"end":return e.stop()}}),e,this,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),700)},computed:Object(c["b"])(["user","allCourses"]),methods:{go_to_course:function(e,t){this.$router.push("/course/show/".concat(t))}},mounted:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("getAllCourses");case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},G=Y,Z=s("c6a6"),Q=s("b0af"),J=s("99d9"),ee=s("62ad"),te=s("a523"),se=s("ce7e"),re=s("adda"),ne=s("0fd9"),ie=Object(p["a"])(G,L,U,!1,null,"1c893ec2",null),ae=ie.exports;m()(ie,{VAutocomplete:Z["a"],VBtn:b["a"],VCard:Q["a"],VCardActions:J["a"],VCardSubtitle:J["b"],VCardText:J["c"],VCardTitle:J["d"],VCol:ee["a"],VContainer:te["a"],VDivider:se["a"],VImg:re["a"],VListItem:_["a"],VListItemContent:C["a"],VListItemTitle:C["b"],VRow:ne["a"]});var oe=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"register"}},[s("panel",{attrs:{title:"Register"}},[s("v-card-text",[s("v-form",{ref:"form",staticClass:"text-center",on:{submit:function(t){return t.preventDefault(),e.register(t)}}},[s("v-text-field",{attrs:{label:"Username",name:"username","prepend-icon":"mdi-account",type:"text",rules:e.nameRules},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),s("v-text-field",{attrs:{label:"Email",name:"email","prepend-icon":"mdi-account",type:"text",rules:e.emailRules},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),s("v-text-field",{attrs:{label:"Password",name:"password","prepend-icon":"mdi-lock",type:"password",rules:e.passwordRules},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),s("v-radio-group",{attrs:{row:""},model:{value:e.role,callback:function(t){e.role=t},expression:"role"}},[s("v-radio",{attrs:{label:"Student",value:"Student",color:"indigo"}}),s("v-radio",{attrs:{label:"Tutor",value:"Tutor",color:"indigo"}})],1),s("v-spacer"),s("v-btn",{staticClass:"mt-5",attrs:{type:"submit",loading:e.loading,disabled:e.loading}},[e._v("Register")]),s("v-spacer")],1)],1),s("v-card-text",[s("div",{staticClass:"error",domProps:{innerHTML:e._s(e.error)}},[e._v(e._s(e.error))])])],1)],1)},le=[],ce=(s("4d63"),s("ac1f"),s("25f0"),{register:function(e){return W().post("register",e)},login:function(e){return W().post("login",e)}}),ue=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"panel"}},[s("v-row",{attrs:{align:"center",justify:"center"}},[s("v-col",{attrs:{cols:"12",sm:"10",md:e.md||6}},[s("v-card",{staticClass:"elevation-8"},[s("v-toolbar",{attrs:{light:""}},[s("v-toolbar-title",{staticClass:"text-h4"},[e._v(e._s(e.title))]),s("v-spacer")],1),e._t("default",[e._v("No slot defined")])],2)],1)],1)],1)},de=[],pe={name:"Panel",props:["title","md"]},he=pe,me=s("71d9"),ve=Object(p["a"])(he,ue,de,!1,null,"b3aee92e",null),fe=ve.exports;m()(ve,{VCard:Q["a"],VCol:ee["a"],VRow:ne["a"],VSpacer:S["a"],VToolbar:me["a"],VToolbarTitle:T["b"]});var be={name:"Register",components:{panel:fe},data:function(){return{username:"",nameRules:[function(e){return!!e||"Username is required"},function(e){return new RegExp(/^[a-zA-Z ]{2,30}$/).test(e)||"Name must be alphanumeric characters and of length 8 - 32"}],email:"",emailRules:[function(e){return!!e||"E-mail is required"},function(e){return/.+@.+\..+/.test(e)||"E-mail must be valid"}],password:"",passwordRules:[function(e){return!!e||"Password is required"},function(e){return new RegExp("^[a-zA-Z0-9]{8,32}$").test(e)||"Password must be alphanumeric characters and of length 8 - 32"}],error:null,loading:!1,role:""}},methods:{register:function(){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$refs.form.validate()){t.next=2;break}return t.abrupt("return");case 2:return e.error="",e.loading=!0,t.prev=4,t.next=7,ce.register({username:e.username,email:e.email,password:e.password,role:e.role});case 7:s=t.sent,e.loading=!1,e.$store.dispatch("setToken",s.data.token),e.$store.dispatch("setUser",s.data.user),e.$router.push("/"),t.next=18;break;case 14:t.prev=14,t.t0=t["catch"](4),e.error=t.t0.response.data.error,e.loading=!1;case 18:case"end":return t.stop()}}),t,null,[[4,14]])})))()}}},ge=be,xe=s("4bd4"),_e=s("67b6"),we=s("43a6"),ye=s("8654"),Ce=Object(p["a"])(ge,oe,le,!1,null,"f931c8aa",null),ke=Ce.exports;m()(Ce,{VBtn:b["a"],VCardText:J["c"],VForm:xe["a"],VRadio:_e["a"],VRadioGroup:we["a"],VSpacer:S["a"],VTextField:ye["a"]});var Se=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"student"}},[s("panel",{attrs:{title:"All Courses"}},[s("v-list",e._l(e.allCourses,(function(t){return s("v-list-item",{key:t.id,on:{click:function(t){return e.go_to_course(t,e.tutor)}}},[s("v-list-item-content",[s("v-list-item-title",{domProps:{textContent:e._s(e.tutor.username)}})],1),s("v-list-item-avatar",[s("v-img",{attrs:{src:e.avatar}})],1)],1)})),1)],1)],1)},Te=[],Ve={name:"Student",data:function(){return{avatar:"https://cdn.vuetifyjs.com/images/lists/2.jpg"}},components:{panel:fe},computed:Object(l["a"])({},Object(c["b"])(["user","allCourses"])),methods:{go_to_lessons:function(e,t){var s=this;return Object(j["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null!=t.lessons){e.next=3;break}return e.next=3,s.$store.dispatch("getLessonsForStudent",t);case 3:s.$router.push("/lesson/index/".concat(t.id));case 4:case"end":return e.stop()}}),e)})))()}}},Oe=Ve,Ie=s("8270"),Be=Object(p["a"])(Oe,Se,Te,!1,null,"f05a6982",null),Me=Be.exports;m()(Be,{VImg:re["a"],VList:x["a"],VListItem:_["a"],VListItemAvatar:Ie["a"],VListItemContent:C["a"],VListItemTitle:C["b"]});var Re=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"login"}},[s("panel",{attrs:{title:"Log In"}},[s("v-card-text",[s("v-form",{ref:"form",staticClass:"text-center",on:{submit:function(t){return t.preventDefault(),e.login(t)}}},[s("v-text-field",{attrs:{label:"Email",name:"email","prepend-icon":"mdi-account",type:"text",rules:e.emailRules},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),s("v-text-field",{attrs:{id:"password",label:"Password",name:"password","prepend-icon":"mdi-lock",type:"password",rules:e.passwordRules},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),s("v-spacer"),s("v-btn",{staticClass:"mt-5",attrs:{loading:e.loading,disabled:e.loading,type:"submit"}},[e._v("Log In")]),s("v-spacer")],1)],1),s("v-card-text",[s("div",{staticClass:"error text-center",domProps:{innerHTML:e._s(e.error)}},[e._v(e._s(e.error))])])],1)],1)},Pe=[],Ee=(s("13d5"),{name:"LogIn",components:{panel:fe},data:function(){return{email:"",emailRules:[function(e){return!!e||"E-mail is required"},function(e){return/.+@.+\..+/.test(e)||"E-mail must be valid"}],password:"",passwordRules:[function(e){return!!e||"Password is required"}],error:null,loading:!1}},methods:{login:function(){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function t(){var s,r,n,i,a,o,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$refs.form.validate()){t.next=2;break}return t.abrupt("return");case 2:return e.error="",e.loading=!0,t.prev=4,t.next=7,ce.login({email:e.email,password:e.password});case 7:if(s=t.sent,e.loading=!1,e.$store.dispatch("setToken",s.data.token),e.$store.dispatch("setUser",s.data.user),!s.data.user.isStudent){t.next=20;break}return t.next=14,H.getSubscriptionInfoOfStudent(s.data.user.id);case 14:r=t.sent,n=r.data.courses,i=function(e,t){return e+t.unreadTutorPost},e.$store.dispatch("setNotifications",n.reduce(i,0)),t.next=26;break;case 20:return t.next=22,z.list(s.data.user.id);case 22:a=t.sent,o=a.data.courses,l=function(e,t){return e+t.unreadStudentPost},e.$store.dispatch("setNotifications",o.reduce(l,0));case 26:if(!s.data.user.isStudent){t.next=33;break}return t.next=29,e.$store.dispatch("getAllCourses");case 29:return t.next=31,e.$store.dispatch("getCoursesForStudent",s.data.user);case 31:t.next=35;break;case 33:return t.next=35,e.$store.dispatch("getCoursesForTutor",s.data.user);case 35:e.$router.push({name:"home"}),t.next=42;break;case 38:t.prev=38,t.t0=t["catch"](4),e.error=t.t0.response.data.error,e.loading=!1;case 42:case"end":return t.stop()}}),t,null,[[4,38]])})))()}}}),Ne=Ee,Le=Object(p["a"])(Ne,Re,Pe,!1,null,"a4138900",null),Ue=Le.exports;m()(Le,{VBtn:b["a"],VCardText:J["c"],VForm:xe["a"],VSpacer:S["a"],VTextField:ye["a"]});var je,De=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.course?r("div",{attrs:{id:"show-course",fluid:""}},[r("v-container",{attrs:{id:"course-info",fluid:""}},[r("v-row",{staticClass:"px-sm-16 mx-md-8 mx-lg-16"},[r("v-col",{attrs:{cols:"12",md:"8"}},[r("v-row",[r("v-col",{staticClass:"text-left"},[r("h1",{staticClass:"font-weight-bold",staticStyle:{"font-size":"40px","line-height":"1.2"}},[e._v(e._s(e.course.name))])])],1),r("v-row",[r("v-col",{staticClass:"pt-0"},[r("h3",[e._v("Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce aliquam orci sed mi tempus ullamcorper. Quisque vitae lacus ut ipsum ultrices rhoncus quis a arcu. Sed placerat nisl sed tellus malesuada, id ornare augue vulputate. Pellentesque laoreet ipsum quis tempor aliquet.")])])],1),r("v-row",[r("v-col",{staticClass:"py-0"},[r("h4",{staticClass:"font-weight-bold"},[e._v("Created by: "+e._s(e.course.TutorId))])])],1),r("v-row",[r("v-col",{attrs:{sm:"4",lg:"3"}},[r("v-row",[r("v-col",{staticClass:"pr-0",attrs:{sm:"4",md:"3"}},[r("v-icon",{attrs:{color:"white",size:"30"}},[e._v("mdi-guitar-acoustic")])],1),r("v-col",{staticClass:"my-auto",attrs:{sm:"8",md:"9"}},[r("p",{staticClass:"ma-0"},[e._v("Instrument: Drum")])])],1)],1),r("v-col",{attrs:{sm:"4",lg:"3"}},[r("v-row",[r("v-col",{staticClass:"pr-0",attrs:{sm:"4",md:"3"}},[r("v-icon",{attrs:{color:"white",size:"24"}},[e._v("mdi-earth")])],1),r("v-col",{staticClass:"my-auto",attrs:{sm:"8",md:"9"}},[r("p",{staticClass:"ma-0"},[e._v("English")])])],1)],1),r("v-col",{attrs:{sm:"4",lg:"3"}},[r("v-row",[r("v-col",{staticClass:"pr-0",attrs:{sm:"4",md:"3"}},[r("v-icon",{attrs:{color:"white",size:"24"}},[e._v("mdi-calendar-clock")])],1),r("v-col",{staticClass:"my-auto",attrs:{sm:"8",md:"9"}},[r("p",{staticClass:"ma-0"},[e._v("Last updated: "+e._s(new Date(e.course.updatedAt).toLocaleString([],{year:"numeric",month:"numeric",day:"numeric"})))])])],1)],1)],1)],1),e.is_student&&!e.isSubscribed?r("v-col",{attrs:{cols:"12",md:"4"}},[r("v-card",[r("v-img",{staticClass:"white--text align-end",staticStyle:{cursor:"pointer"},attrs:{gradient:"to top right, rgba(0,0,0,.5), rgba(0,0,0,.5)",height:"200px",src:"https://images.pexels.com/photos/1246437/pexels-photo-1246437.jpeg?cs=srgb&dl=close-up-photo-of-person-playing-piano-1246437.jpg&fm=jpg"},on:{click:function(t){return e.alert("hey")}}},[r("div",{staticStyle:{position:"absolute",left:"0",top:"0",width:"100%",height:"100%"}},[r("img",{staticStyle:{position:"absolute",width:"60px",left:"calc(50% - 30px)",top:"calc(50% - 30px)",height:"60px"},attrs:{id:"play-button",src:s("b020"),color:"white",size:"62"}}),r("h3",{staticClass:"text--white",staticStyle:{bottom:"12px","text-align":"center",position:"absolute",left:"0",right:"0"}},[e._v("Preview this course")])])]),r("v-row",[r("v-col",{staticClass:"text-left"},[r("h1",{staticClass:"pl-5 font-weight-bold",staticStyle:{"font-size":"36px"}},[e._v("S$"+e._s(e.course.price.toFixed(2)))])])],1),r("v-row",[r("v-col",{staticClass:"text-center"},[0==e.course.price?r("v-btn",{staticStyle:{width:"90%"},attrs:{color:"#ec5252",dark:"","x-large":""},on:{click:e.subscribe}},[e._v("Enroll Now")]):r("v-btn",{staticStyle:{width:"90%"},attrs:{color:"#ec5252",dark:"","x-large":""},on:{click:e.subscribe}},[e._v("Buy Now")])],1)],1)],1)],1):r("v-col",{staticClass:"my-auto",attrs:{cols:"12",md:"4"}},[r("v-row",[r("v-col",{staticClass:"text-center"},[r("v-btn",{staticStyle:{width:"90%"},attrs:{color:"#26A69A",dark:"","x-large":""},on:{click:function(t){return e.goToLesson(t,e.course.lessons[0])}}},[e._v("Start Learning!")])],1)],1)],1)],1)],1),r("v-container",{attrs:{fluid:""}},[r("v-row",{staticClass:"px-sm-16 mx-md-8 mx-lg-16"},[r("v-col",{attrs:{cols:"12"}},[r("v-sheet",{staticClass:"px-16 py-5",staticStyle:{border:"1px solid #E0E0E0"},attrs:{color:"#fbfbf8",rounded:""}},[r("v-row",[r("v-col",{staticClass:"py-0 px-0"},[r("h2",{staticClass:"py-3 pl-0",staticStyle:{color:"#3c3b37","font-size":"30px"}},[e._v("What you will learn")])])],1),r("v-row",[r("v-col",{staticClass:"py-0 px-0",attrs:{cols:"12",md:"6"}},[r("v-row",[r("v-col",{staticClass:"py-2 pr-0",attrs:{cols:"1"}},[r("v-icon",{staticClass:"d-inline mb-2",attrs:{size:"16",color:"#ec5252"}},[e._v("mdi-star")])],1),r("v-col",{staticClass:"py-2 pr-0",attrs:{cols:"10"}},[r("p",{staticClass:"d-inline mb-0 text-uppercase",staticStyle:{"line-height":"1","vertical-align":"middle"}},[e._v("mdi-star")])])],1)],1),r("v-col",{staticClass:"py-0 px-0",attrs:{cols:"12",md:"6"}},[r("v-row",[r("v-col",{staticClass:"py-2 pr-0",attrs:{cols:"1"}},[r("v-icon",{staticClass:"d-inline mb-2",attrs:{size:"16",color:"#ec5252"}},[e._v("mdi-star")])],1),r("v-col",{staticClass:"py-2 pr-0",attrs:{cols:"10"}},[r("div",{staticClass:"d-inline mb-0 text-uppercase",staticStyle:{"line-height":"1","vertical-align":"middle",width:"100%"}},[e._v(" Lorem ipsum dolor sit amet, consectetur adipiscing elit")])])],1)],1)],1)],1)],1)],1)],1),r("v-container",{attrs:{fluid:""}},[r("v-row",{staticClass:"px-sm-16 mx-md-8 mx-lg-16"},[r("v-col",{attrs:{cols:"12"}},[r("v-sheet",{staticClass:"px-10 py-5"},[r("h2",{staticClass:"py-3",staticStyle:{color:"#3c3b37","font-size":"30px"}},[e._v("About the course")]),r("p",[e._v("Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam at urna vitae purus ornare tincidunt vitae nec odio. Quisque dui urna, facilisis a convallis nec, porttitor quis orci. Quisque in condimentum arcu. Sed porta aliquet urna vitae viverra. Curabitur facilisis ullamcorper dapibus. Quisque bibendum, arcu vitae efficitur placerat, est nulla ultricies ligula, ac feugiat ante tellus sed dui. Nunc id lobortis eros. Donec id urna vel ex convallis vehicula. Suspendisse pulvinar non sapien sed aliquet. Morbi dictum condimentum arcu quis auctor. Nulla a nisi purus. In tempor sollicitudin pulvinar. Maecenas cursus sit amet tortor sed mattis. Praesent non lorem nec ipsum cursus vulputate. In at convallis metus. Praesent sit amet condimentum est. Praesent ut dui est. Morbi imperdiet libero vitae massa convallis, sed semper quam facilisis. Vivamus vitae feugiat tortor, eu lacinia sem. Suspendisse aliquam diam non arcu gravida, malesuada mattis elit tempus. Quisque sed arcu enim. Maecenas scelerisque venenatis massa, et vulputate ex tristique sit amet. Etiam eu dolor nec nisi auctor lobortis nec quis neque. Phasellus laoreet eros in placerat aliquet. Duis finibus posuere tortor quis posuere.")])])],1)],1)],1),r("v-container",{attrs:{fluid:""}},[r("v-row",{staticClass:"px-sm-16 mx-md-8 mx-lg-16"},[r("v-col",{attrs:{cols:"12"}},[r("v-sheet",{staticClass:"px-16 py-5"},[r("v-row",[r("v-col",{staticClass:"py-0 px-0"},[r("h2",{staticClass:"pl-0",staticStyle:{color:"#3c3b37","font-size":"30px"}},[e._v("Prerequisites for this Course")])])],1),r("v-row",{attrs:{align:"start"}},[r("v-col",{staticClass:"py-0 px-0",attrs:{cols:"6"}},[r("v-row",[r("v-col",{staticClass:"pr-0",attrs:{cols:"1","align-self":"center"}},[r("v-icon",{staticClass:"d-inline mb-2",attrs:{size:"30",color:"#ec5252"}},[e._v("mdi-square-small")])],1),r("v-col",{staticClass:"pr-0",attrs:{cols:"10","align-self":"center"}},[r("p",{staticClass:"d-inline mb-0",staticStyle:{"line-height":"1"}},[e._v("mdi-star")])])],1)],1),r("v-col",{staticClass:"py-0 px-0",attrs:{cols:"6"}}),r("v-col",{staticClass:"py-0 px-0",attrs:{cols:"6"}},[r("v-row",[r("v-col",{staticClass:"py-2 pr-0",attrs:{cols:"1"}},[r("v-icon",{staticClass:"d-inline mb-2",attrs:{size:"30",color:"#ec5252"}},[e._v("mdi-square-small")])],1),r("v-col",{staticClass:"py-2 pr-0",attrs:{cols:"10","align-self":"center"}},[r("p",{staticClass:"d-inline mb-0",staticStyle:{"line-height":"1","vertical-align":"middle"}},[e._v(" Lorem ipsum dolor sit amet, consectetur adipiscing elit")])])],1)],1)],1)],1)],1)],1)],1),r("v-container",{attrs:{fluid:""}},[r("v-row",{staticClass:"px-sm-16 mx-md-8 mx-lg-16"},[r("v-col",{attrs:{cols:"12"}},[r("v-sheet",{staticClass:"px-16 py-5"},[r("v-row",[r("v-col",{staticClass:"py-0 px-0"},[r("h2",{staticClass:"pl-0",staticStyle:{color:"#3c3b37","font-size":"30px"}},[e._v("Who's suitable for the course")])])],1),r("v-row",{attrs:{align:"start"}},[r("v-col",{staticClass:"py-0 px-0",attrs:{cols:"6"}},[r("v-row",[r("v-col",{staticClass:"pr-0 py-0",attrs:{cols:"1","align-self":"center"}},[r("v-icon",{staticClass:"d-inline mb-2",attrs:{size:"30",color:"#ec5252"}},[e._v("mdi-square-small")])],1),r("v-col",{staticClass:"pr-0",attrs:{cols:"10","align-self":"center"}},[r("p",{staticClass:"d-inline mb-0",staticStyle:{"line-height":"1"}},[e._v("mdi-star")])])],1)],1),r("v-col",{staticClass:"py-0 px-0",attrs:{cols:"6"}}),r("v-col",{staticClass:"py-0 px-0",attrs:{cols:"6"}},[r("v-row",[r("v-col",{staticClass:"py-0 pr-0",attrs:{cols:"1"}},[r("v-icon",{staticClass:"d-inline mb-2",attrs:{size:"30",color:"#ec5252"}},[e._v("mdi-square-small")])],1),r("v-col",{staticClass:"py-2 pr-0",attrs:{cols:"10","align-self":"center"}},[r("p",{staticClass:"d-inline mb-0",staticStyle:{"line-height":"1","vertical-align":"middle"}},[e._v(" Lorem ipsum dolor sit amet, consectetur adipiscing elit")])])],1)],1)],1)],1)],1)],1)],1),r("v-container",{attrs:{fluid:""}},[r("v-row",{staticClass:"px-sm-16 mx-md-8 mx-lg-16"},[r("v-col",{attrs:{cols:"12"}},[r("v-sheet",{staticClass:"px-16 py-5"},[r("v-row",[r("v-col",{staticClass:"py-0 px-0"},[r("h2",{staticClass:"pl-0 pb-2",staticStyle:{color:"#3c3b37","font-size":"30px"}},[e._v("Course Content")]),r("div",{staticStyle:{color:"#9E9E9E","font-size":"16px"}},[e._v(e._s(e.course.lessons.length)+" Lessons  "+e._s(e.timeConverted)+" of video content")])])],1),r("v-row",{attrs:{align:"start"}},[r("v-col",{staticClass:"px-0",attrs:{cols:"12"}},[r("v-card",[r("v-toolbar",{attrs:{color:"grey lighten-2",light:"",flat:""}},[r("v-toolbar-title",[e._v(e._s(e.course.name))]),r("v-spacer"),r("v-btn",{attrs:{icon:""}},[r("v-icon",[e._v("mdi-unfold-more-horizontal")])],1)],1),r("v-list",e._l(e.course.lessons,(function(t,s){return r("v-list-item",{key:t.id,attrs:{shaped:"",disabled:0!=s},on:{click:function(s){return e.goToLesson(s,t)}}},[r("v-list-item-icon",0==s?[r("v-icon",{attrs:{color:"#ec5252"}},[e._v("mdi-play")])]:[r("v-icon",{attrs:{color:"rgba(0, 0, 0, 0.38)"}},[e._v("mdi-play")])],1),r("v-list-item-content",[r("v-list-item-title",{domProps:{textContent:e._s(t.name)}})],1),r("v-spacer"),r("v-list-item-icon",[r("div",[e._v(e._s(t.duration)+" mins")])])],1)})),1)],1)],1)],1)],1)],1)],1)],1),r("v-container",{attrs:{fluid:""}},[r("v-row",{staticClass:"justify-center",attrs:{"no-gutters":""}},[r("v-col",{staticClass:"pa-0",attrs:{cols:"12",md:"9"}},[r("lesson",{attrs:{lesson:e.course.lessons[0]}})],1),r("v-col",{staticClass:"pa-0",attrs:{cols:"12",md:"3"}})],1)],1)],1):e._e()},Fe=[],Ae=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.course&&e.lesson?s("div",[s("v-container",{staticClass:"pa-0",attrs:{fluid:""}},[s("v-row",{attrs:{"no-gutters":""}},[s("v-col",{staticClass:"text-left pa-0",attrs:{cols:"9"}},[s("v-row",{staticClass:"ma-0",staticStyle:{width:"100%"}},[s("v-col",{staticClass:"pa-0",attrs:{id:"title"}},[s("h1",{staticClass:"font-weight-bold pl-8 py-2"},[e._v(e._s(e.course.name))])])],1),s("v-row",{staticClass:"ma-0",staticStyle:{width:"100%"}},[s("v-col",{staticClass:"pa-0"},[s("video-player",{attrs:{exercise:this.lesson.exercises[0],videoSrc:e.src}})],1)],1),e.user.isStudent?s("v-container",{attrs:{id:"dicussion"}},[s("v-row",{staticClass:"justify-center"},[s("v-col",{staticClass:"text-left pb-0",attrs:{cols:"11"}},[s("h1",{staticClass:"font-weight-bold pt-2 pl-4"},[e._v("Ask your tutor!")])]),e.lesson.thread?s("v-col",{staticClass:"pb-0",attrs:{cols:"11"}},[e.lesson.thread.posts?s("v-list",e._l(e.lesson.thread.posts,(function(t,r){return s("v-list-item",{key:t.id},[s("v-list-item-content",{staticClass:"pb-0"},[s("v-container",{staticClass:"pt-0 pb-4 px-0",attrs:{fluid:""}},[0==r||t.updatedAt.substring(0,10)!=e.lesson.thread.posts[r-1].updatedAt.substring(0,10)?s("v-row",{staticClass:"py-0"},[s("v-col",{staticClass:"py-0"},[s("v-chip",{staticStyle:{"font-size":"12px"},attrs:{label:"",color:"indigo darken-3",dark:""}},[e._v(e._s(new Date(t.updatedAt).toLocaleString([],{year:"numeric",month:"numeric",day:"numeric"})))])],1)],1):e._e(),s("v-row",{staticClass:"mt-5"},[s("v-col",{staticClass:"pb-0",staticStyle:{"margin-bottom":"-3px"}},[s("video",{attrs:{width:"100%",height:"audo",controls:""}},[s("source",{attrs:{src:t.videoUrl,type:"video/mp4"}}),e._v("Your browser does not support HTML video.")])])],1),t.UserId!=e.user.id?s("v-row",{staticClass:"justify-end bottom-border mx-0 py-3"},[s("v-col",{staticClass:"pr-8 py-0",attrs:{cols:"6"}},[s("div",{staticClass:"speech-bubble-other"},[s("v-row",{staticClass:"ma-0",staticStyle:{width:"100%"}},[s("v-col",{staticClass:"text-left"},[s("div",[e._v(e._s(t.message))])])],1),s("div",{staticClass:"timestamp"},[e._v(e._s(new Date(t.updatedAt).toLocaleString([],{hour:"2-digit",minute:"2-digit"})))])],1)]),s("v-col",{staticClass:"text-center pa-0",attrs:{cols:"1"}},[s("v-avatar",{attrs:{color:"grey",size:"40"}},[s("v-icon",[e._v("mdi-account")])],1)],1)],1):s("v-row",{staticClass:"justify-start bottom-border mx-0 py-3"},[s("v-col",{staticClass:"text-center pa-0",attrs:{cols:"1"}},[s("v-avatar",{attrs:{color:"grey",size:"40"}},[s("v-icon",[e._v("mdi-account")])],1)],1),s("v-col",{staticClass:"pl-8 py-0",attrs:{cols:"6"}},[s("div",{staticClass:"speech-bubble-self"},[s("v-row",{staticClass:"ma-0",staticStyle:{width:"100%"}},[s("v-col",{staticClass:"text-left"},[s("div",[e._v(e._s(t.message))])])],1),s("div",{staticClass:"timestamp"},[e._v(e._s(new Date(t.updatedAt).toLocaleString([],{hour:"2-digit",minute:"2-digit"})))])],1)])],1)],1)],1)],1)})),1):e._e()],1):e._e()],1),s("v-row",{staticClass:"justify-center"},[s("v-col",{staticClass:"pt-0",attrs:{cols:"11"}},[s("v-form",{ref:"form",staticClass:"px-4"},[s("v-row",[s("v-col",{staticClass:"pt-0",attrs:{cols:"12"}},[s("v-textarea",{attrs:{outlined:"",name:"input-7-4",label:"Type your thoughts here..."},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}})],1),s("v-col",{attrs:{cols:"6"}},[s("v-file-input",{attrs:{accept:"video/mp4, video/ogg",placeholder:"Upload","prepend-icon":"mdi-video",label:"Upload Video"},model:{value:e.file,callback:function(t){e.file=t},expression:"file"}})],1)],1),s("v-row",[s("v-col",[s("v-btn",{attrs:{large:"",color:"#ec5252",dark:""},on:{click:e.create_post}},[e._v("Submit practice video")])],1)],1)],1)],1)],1)],1):e._e()],1),s("v-col",{staticClass:"pa-0",class:{"full-height":e.fullHeight,"partial-height":!e.fullHeight},staticStyle:{"border-bottom":"1px solid #BDBDBD","border-left":"1px solid #BDBDBD",position:"fixed",right:"0"},attrs:{cols:"3"}},[s("h1",{staticClass:"font-weight-bold pl-4 py-2",staticStyle:{"background-color":"#EEEEEE"}},[e._v("Lessons")]),s("v-list",{staticClass:"py-0"},e._l(e.course.lessons,(function(t,r){return s("v-list-item",{key:r,staticClass:"px-0"},[t==e.lesson?s("v-expansion-panels",{staticClass:"px-0",attrs:{accordion:"",flat:"",hover:"",tile:"",dense:"",multiple:""},model:{value:e.opened,callback:function(t){e.opened=t},expression:"opened"}},[s("v-expansion-panel",[s("v-expansion-panel-header",{staticClass:"py-0 pl-4 pr-2",staticStyle:{"font-size":"16px","background-color":"#B2DFDB"}},[e._v(e._s(r+1)+". "+e._s(t.name))]),s("v-expansion-panel-content",{staticClass:"pa-0"},[s("v-list",{staticClass:"py-0"},[s("v-list-item-group",{staticClass:"py-0"},[t.exercises[0].videoUrl?s("v-list-item",{staticClass:"px-0",on:{click:function(t){e.src="video"}}},[s("v-list-item-content",[s("div",{staticClass:"pl-4 text-decoration-underline",staticStyle:{"font-size":"14px",color:"#00897B"}},[e._v("Explanation")])])],1):e._e(),t.exercises[0].demoUrl?s("v-list-item",{staticClass:"px-0",on:{click:function(t){e.src="demo"}}},[s("v-list-item-content",[s("div",{staticClass:"pl-4 text-decoration-underline",staticStyle:{"font-size":"14px",color:"#00897B"}},[e._v("Demonstration")])])],1):e._e()],1)],1)],1)],1)],1):s("v-list-item-content",{staticClass:"py-0 link"},[s("a",{staticClass:"link pl-4 py-5",staticStyle:{"font-size":"16px"},on:{click:function(s){return e.goToLesson(s,t)}}},[e._v(e._s(r+1)+". "+e._s(t.name))])])],1)})),1)],1)],1),s("v-row",{directives:[{name:"show",rawName:"v-show",value:e.useScore,expression:"useScore"}],staticClass:"justify-center"},[e.useXml?s("v-col",{attrs:{cols:"12"}},[s("div",{attrs:{id:"osmd-wrapper-"+e.lesson.id}})]):s("v-col",{attrs:{cols:"12"}},[s("div",{attrs:{id:"vexflow-wrapper-"+e.lesson.id}})])],1)],1)],1):e._e()},$e=[],He=(s("99af"),s("4160"),s("caad"),s("90d7"),s("2532"),s("5319"),s("1276"),s("159b"),s("2b3d"),s("ade3")),qe=s("8cc4"),We=s.n(qe),ze=(je={lowPass:new We.a.Filter({frequency:11e3}),noise:new We.a.NoiseSynth({volume:-12,noise:{type:"pink",playbackRate:3},envelope:{attack:.001,decay:.13,sustain:0,release:.03}}),poly:new We.a.PolySynth(6,We.a.Synth,{volume:-10,oscillator:{partials:[0,2,3,4]},envelope:{attack:.001,decay:.17,sustain:0,release:.05}}),freqEnv:[],started:!1,player:null},Object(He["a"])(je,"started",!1),Object(He["a"])(je,"initiated",!1),Object(He["a"])(je,"idx",0),Object(He["a"])(je,"notesToEvents",(function(e){var t=[],s=0;return e.forEach((function(e){var r=e.split("/")[2],n=!1,i=!1;(r.includes("d")||r.includes("r"))&&(r.includes("r")&&(r=r.replace("r",""),n=!0),r.includes("d")&&(r=r.replace("d",""),i=!0)),r+="n",i&&(r+="."),n||t.push(s),s+=We.a.Time(r)})),t})),Object(He["a"])(je,"init",(function(){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.initiated){t.next=2;break}return t.abrupt("return");case 2:if(e.initiated=!0,e.poly.voices.forEach((function(t,s){var r=new We.a.FrequencyEnvelope({attack:.001,decay:.08,release:.08,baseFrequency:We.a.Frequency("A4"),octaves:Math.log2(13),releaseCurve:"exponential",exponent:3.5});r.connect(t.oscillator.frequency),e.freqEnv[s]=r})),e.noise.connect(e.lowPass),e.lowPass.toMaster(),e.poly.toMaster(),null!=e.player){t.next=12;break}return e.player=new We.a.Player,t.next=11,e.player.load("https://cdn.jsdelivr.net/gh/R-D-D-D/Ground-Zero/web_frontend/src/resources/metronome_click.mp3");case 11:e.player.toMaster();case 12:case"end":return t.stop()}}),t)})))()})),Object(He["a"])(je,"playSequence",(function(e,t,s,r,n){this.createAndRecordSequence(e,t,s,r,void 0,!0,n)})),Object(He["a"])(je,"createAndRecordSequence",(function(e,t,s,r,n,i,a){var o=this;if(!this.started&&0!=r){this.started=!0,We.a.Transport.bpm.value=parseInt(t),this.notesToEvents([]);var l=e.split("/");We.a.Transport.timeSignature=[parseInt(l[0]),parseInt(l[1])],We.a.Context.latencyHint="fastest";var c=new We.a.Part((function(e){o.poly.voices.forEach((function(t,s){o.freqEnv[s].triggerAttackRelease("16n",e),t.envelope.triggerAttackRelease("16n",e)})),o.noise.triggerAttackRelease("16n",e)}),this.notesToEvents(s));c.start("1m");var u=r+"m";if(We.a.Transport.scheduleRepeat((function(){o.player.restart()}),"4n","0m"),i)We.a.Transport.schedule((function(e){console.log("stopped"),We.a.Transport.stop(),We.a.Transport.cancel(0),o.started=!1,o.idx=0}),u),We.a.Transport.start();else{var d=We.a.context,p=d.createMediaStreamDestination(),h=new MediaRecorder(p.stream);this.lowPass.connect(p),this.poly.connect(p),this.player.connect(p);var m=[];h.ondataavailable=function(e){return m.push(e.data)},h.onstop=function(e){var t=new Blob(m,{type:"audio/ogg; codecs=opus"});n.src=URL.createObjectURL(t)},We.a.Transport.schedule((function(e){h.stop(),console.log("stopped"),We.a.Transport.stop(),We.a.Transport.cancel(0),o.started=!1,o.idx=0}),u),h.start(),We.a.Transport.start()}}})),s("359f")),Ke=(s("a15b"),s("2909")),Xe={generateRhythmString:function(e){return void 0!=e?e.id.toString()+"&"+e.title+"&"+e.timeSignature+"&"+e.noOfBars.toString()+"&"+e.bpm.toString()+"&"+e.rhythm.join("-"):""},generateRhythmsString:function(e){for(var t="",s=0;s<e.length;s++)s==e.length-1?t+=this.generateRhythmString(e[s]):t+=this.generateRhythmString(e[s])+"$";return t},parseRhythmString:function(e){var t=e.split("&"),s={id:parseInt(t[0]),title:t[1],timeSignature:t[2],noOfBars:t[3],bpm:t[4],rhythm:t[5]?t[5].split("-"):[]};return s},parseRhythmsString:function(e){var t=this;if(0==e.length)return[];var s=e.split("$").map((function(e){return t.parseRhythmString(e)}));return s},cloneRhythms:function(e){for(var t=[],s=0;s<e.length;s++){var r={};r.id=e[s].id,r.title=e[s].title,r.timeSignature=e[s].timeSignature,r.noOfBars=e[s].noOfBars,r.bpm=e[s].bpm,r.rhythm=Object(Ke["a"])(e[s].rhythm),t.push(r)}return t},cloneLesson:function(e){return{id:e.id,name:e.name,TutorId:e.TutorId,rhythms:this.cloneRhythms(e.rhythms),date:e.date}}},Ye=s("f0e2"),Ge={create:function(e){var t=W();return t.defaults.headers.post["Content-Type"]="multipart/form-data",t.post("post/new",e)},list:function(e){return W().get("post/list?tid=".concat(e))},edit:function(e){var t=W();return t.defaults.headers.post["Content-Type"]="multipart/form-data",t.post("post/edit",e)},delete:function(e){return W().delete("post/del?pid=".concat(e))}},Ze=(s("6922"),s("2938")),Qe=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("video",{ref:"videoPlayer",staticClass:"vjs-big-play-centered video-js",attrs:{id:"video"}}),s("v-row",{directives:[{name:"show",rawName:"v-show",value:!e.hide,expression:"!hide"}],staticClass:"bpm-control pt-2",attrs:{id:"slider"}},[s("v-icon",{attrs:{color:"white",large:""}},[e._v("$vuetify.icons.custom_bpm")]),s("v-slider",{staticClass:"pb-2",attrs:{min:"20",max:"180",vertical:"",color:"white","track-color":"rgba(115, 133, 159, 0.5)","thumb-label":"always"},model:{value:e.playbackBpm,callback:function(t){e.playbackBpm=t},expression:"playbackBpm"}})],1)],1)},Je=[],et={name:"VideoPlayer",props:["exercise","videoSrc"],data:function(){return{numberOfBars:null,bpm:null,timeSignature:null,description:"",melody:[],useScore:!1,useXml:!1,notesInBars:null,playbackBpm:0,videoHandler:null,player:null,hide:!0,timePerTwoBars:0,timePerBar:0,demoStartTime:0,demoEndTime:null,currentDisplayedBar:0,videoOsmd:null,from:1,to:2}},methods:{timeUpdated:function(){var e=this.player.currentTime(),t=e-this.demoStartTime,s=Math.floor(t/this.timePerTwoBars);s!=this.currentDisplayedBar&&(s>=0&&s<Math.floor(this.numberOfBars/2)?(this.currentDisplayedBar=s,this.videoHandler.importNotes(this.notesInBars[2*s].concat(this.notesInBars[2*s+1]),this.timeSignature)):s<0&&0!=this.currentDisplayedBar?(this.currentDisplayedBar=0,this.videoHandler.importNotes(this.notesInBars[0].concat(this.notesInBars[1]),this.timeSignature)):s>Math.floor(this.numberOfBars/2)&&(this.numberOfBars<2?(this.currentDisplayedBar=0,this.videoHandler.importNotes(this.notesInBars[0].concat(this.notesInBars[1]),this.timeSignature)):(this.currentDisplayedBar=Math.floor(this.numberOfBars/2),this.videoHandler.importNotes(this.notesInBars[this.numberOfBars-1].concat(this.notesInBars[this.numberOfBars-1]),this.timeSignature))))},timeUpdatedOsmd:function(){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function t(){var s,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(s=e.player.currentTime(),r=s-e.demoStartTime,n=Math.floor(r/e.timePerTwoBars),n==e.currentDisplayedBar){t.next=25;break}if(!(n>=0&&n<Math.floor(e.numberOfBars/2))){t.next=12;break}return console.log(n),e.videoOsmd.setOptions({drawFromMeasureNumber:2*n+1,drawUpToMeasureNumber:2*n+2}),e.currentDisplayedBar=n,t.next=10,e.videoOsmd.render();case 10:t.next=25;break;case 12:if(!(n<0&&0!=e.currentDisplayedBar)){t.next=20;break}return console.log(n),e.videoOsmd.setOptions({drawFromMeasureNumber:1,drawUpToMeasureNumber:2}),e.currentDisplayedBar=0,t.next=18,e.videoOsmd.render();case 18:t.next=25;break;case 20:if(!(n>Math.floor(e.numberOfBars/2))){t.next=25;break}return console.log(n,"from third clause"),e.numberOfBars<2?(e.videoOsmd.setOptions({drawFromMeasureNumber:0,drawUpToMeasureNumber:0}),e.currentDisplayedBar=0):(e.videoOsmd.setOptions({drawFromMeasureNumber:e.numberOfBars-1,drawUpToMeasureNumber:e.numberOfBars}),e.currentDisplayedBar=Math.floor((s-e.demoStartTime)/e.timePerTwoBars)),t.next=25,e.videoOsmd.render();case 25:case"end":return t.stop()}}),t)})))()},drawOsmdScores:function(){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function t(){var s,r,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=document.createElement("div"),s.setAttribute("id","video-overlay-background"),s.style.position="absolute",s.style.background="#FAFAFA",s.style.top="0",s.style.left="0",s.style.right="0",s.style.height="130px",s.style.overflow="hidden",r=document.createElement("div"),r.setAttribute("id","video-osmd-wrapper"),r.style.position="absolute",r.style.background="#FAFAFA",r.style.top="0",r.style.left="0",r.style.right="0",n=document.createElement("div"),s.appendChild(r),r.appendChild(n),document.getElementById("video").appendChild(s),e.videoOsmd=new Ze["OpenSheetMusicDisplay"](n,{drawFromMeasureNumber:e.from,drawUpToMeasureNumber:e.to,drawComposer:!1,drawTitle:!1,renderSingleHorizontalStaffline:!0,drawPartNames:!1,autoResize:!1,drawMetronomeMarks:!1,backend:"Canvas",drawingParameters:"compacttight"}),t.next=23,F.a.get(e.exercise.musicXmlUrl);case 23:return i=t.sent,t.next=26,e.videoOsmd.load(i.data);case 26:return t.next=28,e.$nextTick();case 28:return e.videoOsmd.zoom=1.2,t.next=31,e.videoOsmd.render();case 31:console.log(e.videoOsmd.graphic),console.log(e.videoOsmd.graphic.music);case 33:case"end":return t.stop()}}),t)})))()},drawScores:function(){var e=document.createElement("div");e.setAttribute("id","video-vexflow-wrapper"),e.style.position="absolute",e.style.background="#FAFAFA",e.style.top="0",e.style.left="0",e.style.right="0",this.videoHandler=new ze["a"].Handler("video-vexflow-wrapper",{canEdit:!1,numberOfStaves:2,lessStaveHeight:!0,canvasProperties:{id:"video-vexflow-wrapper-canvas",width:this.$refs.videoPlayer.offsetWidth,height:80*ze["a"].scale,tabindex:1}},e).init(),this.notesInBars=this.videoHandler.notesToBars(this.melody,this.timeSignature),this.videoHandler.importNotes(this.notesInBars[0].concat(this.notesInBars[1]),this.timeSignature),document.getElementById("video").appendChild(e)}},watch:{playbackBpm:function(e){this.bpm&&this.player.playbackRate(e/this.bpm)},videoSrc:function(e){"video"==e&&this.exercise.videoUrl?this.player.src()!=this.exercise.videoUrl&&this.player.src(this.exercise.videoUrl):"demo"==e&&this.exercise.demoUrl&&this.player.src()!=this.exercise.demoUrl&&this.player.src(this.exercise.demoUrl)}},mounted:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(){var t,s,r,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=Object(Ye["default"])(this.$refs.videoPlayer,{controls:!0,fluid:!0,sources:[{src:this.exercise.demoUrl,type:"video/mp4"}],playbackRates:[.8,.9,1,1.1,1.2],poster:this.exercise.demoPosterUrl?this.exercise.demoPosterUrl:null},(function(){t.hotkeys({volumeStep:.1,seekStep:2,enableModifiersForNumbers:!1,enableHoverScroll:!0}),n.exercise.useScore&&(t.on("userinactive",(function(){t.paused()?n.hide=!1:n.hide=!0})),t.on("useractive",(function(){n.hide=!1})),t.on("play",(function(){n.hide=!1})),t.on("firstplay",(function(){n.hide=!1})),t.on("ratechange",(function(){n.playbackBpm=n.bpm*n.player.playbackRate()})),n.exercise.useXml?t.on("timeupdate",(function(e){n.timeUpdatedOsmd(e)})):t.on("timeupdate",(function(e){n.timeUpdated(e)})))})),this.player=t,s=this.exercise,!s.useScore){e.next=29;break}if(this.useScore=s.useScore,this.useXml=s.useXml,this.bpm=parseInt(s.bpm),this.playbackBpm=this.bpm,this.demoStartTime=s.demoStartTime,!s.useXml){e.next=17;break}return e.next=12,this.drawOsmdScores();case 12:r=this.videoOsmd.sheet.sourceMeasures[0].activeTimeSignature,this.timeSignature="".concat(r.numerator,"/").concat(r.denominator),this.numberOfBars=this.videoOsmd.sheet.sourceMeasures.length,e.next=21;break;case 17:this.melody=s.melody.split("-"),this.timeSignature=s.timeSignature,this.numberOfBars=parseInt(s.numberOfBars),this.drawScores();case 21:this.timePerBar=parseInt(this.timeSignature.split("/")[0])/this.bpm*60,this.timePerTwoBars=2*this.timePerBar,this.demoEndTime=this.demoStartTime+this.timePerBar*this.numberOfBars,document.getElementById("video").appendChild(document.getElementById("slider")),document.getElementsByClassName("v-slider__track-container")[0].style.width="5px",document.getElementsByClassName("v-slider__thumb-label")[0].style.color="black",document.getElementsByClassName("v-slider__thumb-label")[0].style.boxShadow="0px 0px 5px black",this.hide=!1;case 29:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},tt=et,st=(s("4a1f"),s("ba0d")),rt=Object(p["a"])(tt,Qe,Je,!1,null,"593b3adb",null),nt=rt.exports;m()(rt,{VIcon:g["a"],VRow:ne["a"],VSlider:st["a"]});var it={create:function(e){return W().post("thread/new",e)},list:function(e){return W().get("thread/list?lid=".concat(e))},show:function(e,t){return W().get("thread/show?lid=".concat(e,"&uid=").concat(t))},delete:function(e){return W().delete("thread/del?tid=".concat(e))},getUnread:function(e,t){return W().get("thread/unread?cid=".concat(e,"&uid=").concat(t))}},at={name:"ShowLesson",components:{"video-player":nt},data:function(){return{numberOfBars:null,bpm:null,timeSignature:null,disable:!0,save_btn_loading:!1,add_btn_loading:!1,description:"",melody:[],useScore:!1,useXml:!1,notesInBars:null,playbackBpm:0,handler:{},videoHandler:null,thread:null,dialog:!1,requiredRules:[function(e){return!!e||"This field is required"}],message:"",file:null,grade:"",avatar:"https://cdn.vuetifyjs.com/images/lists/2.jpg",error:null,hide:!0,timePerTwoBars:0,timePerBar:0,demoStartTime:0,demoEndTime:null,currentDisplayedBar:0,osmd:null,videoOsmd:null,from:1,to:2,selected:null,course:null,lesson:null,fullHeight:!1,opened:[0],src:"video"}},watch:{bpm:function(e){this.bpm_label="BPM: "+e},no_bars:function(e){this.bars_label="No. Bars: "+e},"$route.params.lesson_id":function(e){this.$router.go()}},computed:Object(l["a"])({tutor:function(){return this.user.isStudent?this.$store.getters.tutorFromSubscribedTutors:null},is_student:function(){return this.user.isStudent}},Object(c["b"])(["user","students","subscribedTutors"])),methods:{timeUpdated:function(e){var t=this.player.currentTime(),s=t-this.demoStartTime,r=Math.floor(s/this.timePerTwoBars);r!=this.currentDisplayedBar&&(r>=0&&r<Math.floor(this.numberOfBars/2)?(this.currentDisplayedBar=r,this.videoHandler.importNotes(this.notesInBars[2*r].concat(this.notesInBars[2*r+1]),this.timeSignature)):r<0&&0!=this.currentDisplayedBar?(this.currentDisplayedBar=0,this.videoHandler.importNotes(this.notesInBars[0].concat(this.notesInBars[1]),this.timeSignature)):r>Math.floor(this.numberOfBars/2)&&(this.numberOfBars<2?(this.currentDisplayedBar=0,this.videoHandler.importNotes(this.notesInBars[0].concat(this.notesInBars[1]),this.timeSignature)):(this.currentDisplayedBar=Math.floor(this.numberOfBars/2),this.videoHandler.importNotes(this.notesInBars[this.numberOfBars-1].concat(this.notesInBars[this.numberOfBars-1]),this.timeSignature))))},timeUpdatedOsmd:function(e){var t=this;return Object(j["a"])(regeneratorRuntime.mark((function e(){var s,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s=t.player.currentTime(),r=s-t.demoStartTime,n=Math.floor(r/t.timePerTwoBars),n==t.currentDisplayedBar){e.next=25;break}if(!(n>=0&&n<Math.floor(t.numberOfBars/2))){e.next=12;break}return console.log(n),t.videoOsmd.setOptions({drawFromMeasureNumber:2*n+1,drawUpToMeasureNumber:2*n+2}),t.currentDisplayedBar=n,e.next=10,t.videoOsmd.render();case 10:e.next=25;break;case 12:if(!(n<0&&0!=t.currentDisplayedBar)){e.next=20;break}return console.log(n),t.videoOsmd.setOptions({drawFromMeasureNumber:1,drawUpToMeasureNumber:2}),t.currentDisplayedBar=0,e.next=18,t.videoOsmd.render();case 18:e.next=25;break;case 20:if(!(n>Math.floor(t.numberOfBars/2))){e.next=25;break}return console.log(n,"from third clause"),t.numberOfBars<2?(t.videoOsmd.setOptions({drawFromMeasureNumber:0,drawUpToMeasureNumber:0}),t.currentDisplayedBar=0):(t.videoOsmd.setOptions({drawFromMeasureNumber:t.numberOfBars-1,drawUpToMeasureNumber:t.numberOfBars}),t.currentDisplayedBar=Math.floor((s-t.demoStartTime)/t.timePerTwoBars)),e.next=25,t.videoOsmd.render();case 25:case"end":return e.stop()}}),e)})))()},update_rhythms:function(){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function t(){var s,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.save_btn_loading=!0,s=e.lesson.rhythms.indexOf(e.active_rhythm),r={id:e.active_rhythm.id,title:e.active_rhythm_title,timeSignature:e.time_signature,noOfBars:e.no_bars,bpm:e.bpm,rhythm:e.handler.exportNotes()},n=Xe.cloneLesson(e.lesson),n.rhythms[s]=r,n.rhythms=Xe.generateRhythmsString(n.rhythms),t.next=8,e.$store.dispatch("editRhythm",{lesson:e.lesson,newLesson:n});case 8:e.save_btn_loading=!1,e.display_rhythm({},e.lesson.rhythms[s]);case 10:case"end":return t.stop()}}),t)})))()},enable_save_btn:function(){this.disable=!1},create_post:function(){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function t(){var s,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.$refs.form.validate()){t.next=14;break}return s=new FormData,s.set("tid",e.lesson.thread.id),s.set("message",e.message),s.set("grade",e.grade),s.append("video",e.file),t.next=8,Ge.create(s);case 8:r=t.sent,e.lesson.thread.posts.splice(e.lesson.thread.posts.length,0,r.data.post),e.message="",e.file=null,t.next=15;break;case 14:return t.abrupt("return");case 15:case"end":return t.stop()}}),t)})))()},drawOsmdScores:function(){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function t(){var s,r,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=document.createElement("div"),s.setAttribute("id","video-overlay-background-".concat(e.lesson.id)),s.style.position="absolute",s.style.background="#FAFAFA",s.style.top="0",s.style.left="0",s.style.right="0",s.style.height="130px",s.style.overflow="hidden",r=document.createElement("div"),r.setAttribute("id","video-osmd-wrapper-".concat(e.lesson.id)),r.style.position="absolute",r.style.background="#FAFAFA",r.style.top="0",r.style.left="0",r.style.right="0",n=document.createElement("div"),s.appendChild(r),r.appendChild(n),document.getElementById("video-".concat(e.lesson.id)).appendChild(s),e.videoOsmd=new Ze["OpenSheetMusicDisplay"](n,{drawFromMeasureNumber:e.from,drawUpToMeasureNumber:e.to,drawComposer:!1,drawTitle:!1,renderSingleHorizontalStaffline:!0,drawPartNames:!1,autoResize:!1,drawMetronomeMarks:!1,backend:"Canvas",drawingParameters:"compacttight"}),t.next=23,F.a.get(e.lesson.exercises[0].musicXmlUrl);case 23:return i=t.sent,t.next=26,e.videoOsmd.load(i.data);case 26:return t.next=28,e.$nextTick();case 28:return e.videoOsmd.zoom=1.2,t.next=31,e.videoOsmd.render();case 31:return console.log(e.videoOsmd.graphic),console.log(e.videoOsmd.graphic.music),e.osmd=new Ze["OpenSheetMusicDisplay"]("osmd-wrapper-".concat(e.lesson.id),{drawPartNames:!1,drawComposer:!1}),t.next=36,e.osmd.load(i.data);case 36:return t.next=38,e.$nextTick();case 38:return e.osmd.zoom=1.2,t.next=41,e.osmd.render();case 41:case"end":return t.stop()}}),t)})))()},drawScores:function(e){this.user.isStudent?this.handler=new ze["a"].Handler("vexflow-wrapper-".concat(this.lesson.id),{numberOfStaves:parseInt(this.lesson.exercises[0].numberOfBars),canEdit:!1}).init():(console.log("vexflow-wrapper-".concat(this.lesson.id)),console.log(document.getElementById("vexflow-wrapper-".concat(this.lesson.id))),this.handler=new ze["a"].Handler("vexflow-wrapper-".concat(this.lesson.id),{numberOfStaves:parseInt(this.lesson.exercises[0].numberOfBars)}).init()),this.handler.importNotes(this.melody,this.timeSignature),this.notesInBars=this.handler.notesToBars(this.melody,this.timeSignature);var t=document.createElement("div");t.setAttribute("id","video-vexflow-wrapper-".concat(this.lesson.id)),t.style.position="absolute",t.style.background="#FAFAFA",t.style.top="0",t.style.left="0",t.style.right="0",this.videoHandler=new ze["a"].Handler("video-vexflow-wrapper-".concat(this.lesson.id),{canEdit:!1,numberOfStaves:2,lessStaveHeight:!0,canvasProperties:{id:"video-vexflow-wrapper-".concat(this.lesson.id)+"-canvas",width:this.$refs.videoPlayer.offsetWidth,height:80*ze["a"].scale,tabindex:1}},t).init(),this.videoHandler.importNotes(this.notesInBars[0].concat(this.notesInBars[1]),this.timeSignature),document.getElementById("video-".concat(this.lesson.id)).appendChild(t)},goToLesson:function(e,t){this.$router.push({name:"showlesson",params:{course_id:this.course.id,lesson_id:t.id,course:this.course,lesson:t}})}},mounted:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(){var t,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.course&&this.lesson){e.next=15;break}return e.next=3,z.show(this.$route.params.course_id);case 3:return t=e.sent,e.prev=4,e.next=7,Promise.all(t.data.course.lessons.map(function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(r){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=null,s.$store.dispatch("setNotifications",s.$store.state.notifications-t.data.course.unreadTutorPost),e.next=4,it.show(r.id,s.user.id);case 4:return n=e.sent,r.thread=n.data.thread,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 7:t.data.course.lessons=e.sent,this.course=t.data.course,e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](4),console.log(e.t0);case 14:this.lesson=this.course.lessons.find((function(e){return e.id==s.$route.params.lesson_id}));case 15:this.selected=this.course.lessons.indexOf(this.lesson),window.addEventListener("scroll",X.a.debounce((function(){0==window.pageYOffset?s.fullHeight=!1:window.pageYOffset>64&&(s.fullHeight=!0)}),200));case 17:case"end":return e.stop()}}),e,this,[[4,11]])})));function t(){return e.apply(this,arguments)}return t}(),beforeDestroy:function(){this.player&&this.player.dispose()}},ot=at,lt=(s("662c"),s("8212")),ct=s("cc20"),ut=s("cd55"),dt=s("49e2"),pt=s("c865"),ht=s("0393"),mt=s("23a7"),vt=s("a844"),ft=Object(p["a"])(ot,Ae,$e,!1,null,"71e804a6",null),bt=ft.exports;m()(ft,{VAvatar:lt["a"],VBtn:b["a"],VChip:ct["a"],VCol:ee["a"],VContainer:te["a"],VExpansionPanel:ut["a"],VExpansionPanelContent:dt["a"],VExpansionPanelHeader:pt["a"],VExpansionPanels:ht["a"],VFileInput:mt["a"],VForm:xe["a"],VIcon:g["a"],VList:x["a"],VListItem:_["a"],VListItemContent:C["a"],VListItemGroup:w["a"],VRow:ne["a"],VTextarea:vt["a"]});var gt={name:"ShowCourse",data:function(){return{course:null,dialog:!1,error:null,recording:!1,tab:null,new_name:"",new_duration:"",new_melody:[],nameRules:[function(e){return!!e||"Title is required"}],durationRules:[function(e){return!!e||"Duration is required"},function(e){return new RegExp(/^\d+$/).test(e)||"Please input numbers only"}],add_btn_loading:!1}},components:{panel:fe,lesson:bt},computed:Object(l["a"])({is_student:function(){return this.user.isStudent},isSubscribed:function(){return this.is_student?this.$store.getters.isSubscribed(this.course.id):null},isOwned:function(){return this.is_student?null:this.$store.getters.isOwned(this.course.id)},timeConverted:function(){var e=this.course.duration,t=e/60,s=Math.floor(t),r=60*(t-s),n=Math.round(r);return 0==s?n+" minute(s)":s+" hour(s) and "+n+" minute(s)"}},Object(c["b"])(["user","userSubscribedCourses","userOwnedCourses"])),methods:{goToLesson:function(e,t){this.$router.push({name:"showlesson",params:{course_id:this.course.id,lesson_id:t.id,course:this.course,lesson:t}})},edit_rhythm_name:function(){this.name_editable=!0},add_lesson:function(){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.$refs.form.validate()){t.next=6;break}return e.add_btn_loading=!0,s={name:e.new_name,duration:parseInt(e.new_duration),cid:e.course.id},t.next=5,e.$store.dispatch("addLesson",s);case 5:e.add_btn_loading=!1;case 6:case"end":return t.stop()}}),t)})))()},open_dialogue:function(){this.dialog=!0},subscribe:function(){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!=e.course.price){t.next=8;break}return t.next=3,Promise.all(e.course.lessons.map(function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(t){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,it.create({lid:t.id});case 2:return s=e.sent,s.data.thread.posts=[],t.thread=s.data.thread,e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:return t.next=5,e.$store.dispatch("subscribe",{studentId:e.$store.state.user.id,courseId:e.course.id});case 5:e.$router.push({name:"showlesson",params:{course_id:e.course.id,lesson_id:e.course.lessons[0].id}}),t.next=9;break;case 8:e.$router.push("/payment/".concat(e.course.id));case 9:case"end":return t.stop()}}),t)})))()}},created:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(){var t,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,z.show(this.$route.params.course_id);case 2:return t=e.sent,e.prev=3,e.next=6,Promise.all(t.data.course.lessons.map(function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(r){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=null,s.$store.dispatch("setNotifications",s.$store.state.notifications-t.data.course.unreadTutorPost),e.next=4,it.show(r.id,s.user.id);case 4:return n=e.sent,r.thread=n.data.thread,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 6:t.data.course.lessons=e.sent,this.course=t.data.course,e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](3),console.log(e.t0);case 13:case"end":return e.stop()}}),e,this,[[3,10]])})));function t(){return e.apply(this,arguments)}return t}(),mounted:function(){}},xt=gt,_t=(s("8223"),s("8dd9")),wt=Object(p["a"])(xt,De,Fe,!1,null,"58d3c073",null),yt=wt.exports;m()(wt,{VBtn:b["a"],VCard:Q["a"],VCol:ee["a"],VContainer:te["a"],VIcon:g["a"],VImg:re["a"],VList:x["a"],VListItem:_["a"],VListItemContent:C["a"],VListItemIcon:y["a"],VListItemTitle:C["b"],VRow:ne["a"],VSheet:_t["a"],VSpacer:S["a"],VToolbar:me["a"],VToolbarTitle:T["b"]});var Ct=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"mt-5",attrs:{id:"courses"}},[s("panel",{attrs:{title:"All Courses",md:"9"}},[e.is_student?s("v-list",e._l(e.userSubscribedCourses,(function(t){return s("v-list-item",{key:t.id,on:{click:function(s){return e.showCourse(s,t.id,t.lessons[0].id)}}},[s("v-list-item-content",[s("v-list-item-title",{staticClass:"text-h5 py-0",domProps:{textContent:e._s(t.name)}})],1),s("v-list-item-content",[s("v-list-item-title",{domProps:{textContent:e._s(t.date)}})],1)],1)})),1):s("v-list",e._l(e.userOwnedCourses,(function(t){return s("v-list-item",{key:t.id},[s("v-list-item-content",[s("v-list-item-title",{staticClass:"text-h5 py-0",domProps:{textContent:e._s(t.name)}})],1),s("v-list-item-icon",[s("v-btn",{attrs:{outlined:"",color:"indigo"},on:{click:function(s){return e.showCourse(s,t.id)}}},[s("v-icon",[e._v("mdi-pencil")])],1)],1),s("v-list-item-icon",[s("v-btn",{attrs:{outlined:"",color:"indigo"},on:{click:function(s){return e.deleteCourse(s,t)}}},[s("v-icon",[e._v("mdi-trash-can-outline")])],1)],1)],1)})),1)],1),e.is_student?e._e():s("v-row",{attrs:{justify:"center"}},[s("v-btn",{staticClass:"mt-5",attrs:{"x-large":"",to:"/course/new"}},[s("v-icon",{attrs:{left:"",dark:""}},[e._v("mdi-plus-thick")]),e._v("New Course")],1)],1)],1)},kt=[],St={data:function(){return{dialog:!1,name:"",nameRules:[function(e){return!!e||"Name is required"}],validation:{namePassed:!1},error:null,loading:!1,price:"0.0",priceRules:[function(e){return!!e||"Price is required"},function(e){return new RegExp(/^\d+(?:\.\d{0,2})$/).test(e)||"Price must be a number with maximum 2 decimal places"}]}},computed:Object(l["a"])({is_student:function(){return this.user.isStudent}},Object(c["b"])(["user","userOwnedCourses","userSubscribedCourses"])),components:{panel:fe},methods:{showCourse:function(e,t,s){this.$router.push({name:"showlesson",params:{course_id:t,lesson_id:s}})},deleteCourse:function(e,t){var s=this;return Object(j["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!confirm("Are you sure?")){e.next=3;break}return e.next=3,s.$store.dispatch("deleteCourse",t);case 3:case"end":return e.stop()}}),e)})))()}},mounted:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},Tt=St,Vt=Object(p["a"])(Tt,Ct,kt,!1,null,null,null),Ot=Vt.exports;m()(Vt,{VBtn:b["a"],VIcon:g["a"],VList:x["a"],VListItem:_["a"],VListItemContent:C["a"],VListItemIcon:y["a"],VListItemTitle:C["b"],VRow:ne["a"]});var It=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"new-course"}},[s("v-stepper",{model:{value:e.e1,callback:function(t){e.e1=t},expression:"e1"}},[s("v-stepper-header",[s("v-stepper-step",{attrs:{complete:e.e1>1,step:"1",color:"indigo"}},[e._v("Course Details")]),s("v-divider"),s("v-stepper-step",{attrs:{complete:e.e1>2,step:"2",color:"indigo"}},[e._v("Plan the Lessons")]),s("v-divider"),s("v-stepper-step",{attrs:{step:"3",color:"indigo"}},[e._v("Review and Confirm")])],1),s("v-stepper-items",[s("v-stepper-content",{attrs:{step:"1"}},[s("panel",{staticClass:"mb-5",attrs:{title:"Basic Info",md:"10"}},[s("v-card-text",[s("v-form",{ref:"courseForm"},[s("v-row",[s("v-col",{attrs:{cols:"12",md:"4"}},[s("v-text-field",{attrs:{label:"Title*",name:"title",type:"text",rules:e.nameRules,solo:"",clearable:"",color:"indigo"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),s("v-col",{attrs:{cols:"12",md:"4"}},[s("v-text-field",{attrs:{label:"Price*",name:"price","prepend-icon":"mdi-currency-usd",rules:e.priceRules,solo:"",clearable:"",color:"indigo"},model:{value:e.price,callback:function(t){e.price=t},expression:"price"}})],1),s("v-col",{attrs:{cols:"12",md:"4"}},[s("v-select",{attrs:{label:"Language",items:e.languages,solo:""},model:{value:e.language,callback:function(t){e.language=t},expression:"language"}})],1)],1),s("v-row",[s("v-col",{attrs:{cols:"12"}},[s("v-textarea",{attrs:{label:"Description","auto-grow":"",solo:""},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}})],1)],1),s("v-row",[s("v-col",{attrs:{cols:"12",md:"4"}},[s("v-select",{attrs:{label:"Level",items:e.levels,solo:""},model:{value:e.level,callback:function(t){e.level=t},expression:"level"}})],1),s("v-col",{attrs:{cols:"12",md:"4"}},[s("v-select",{attrs:{label:"Instrument",items:e.instruments,solo:""},model:{value:e.instrument,callback:function(t){e.instrument=t},expression:"instrument"}})],1)],1)],1)],1)],1),s("v-row",{staticClass:"justify-center"},[s("v-col",[s("v-btn",{attrs:{color:"indigo",dark:""},on:{click:e.goStepTwo}},[e._v("Continue")]),s("v-btn",{attrs:{to:"/course/index"}},[e._v("Cancel")])],1)],1)],1),s("v-stepper-content",{attrs:{step:"2"}},[s("v-row",{staticClass:"justify-center"},[s("v-col",{attrs:{cols:"12",md:"11"}},[s("v-expansion-panels",{staticClass:"mb-5",attrs:{multiple:"",focusable:""},model:{value:e.lesson,callback:function(t){e.lesson=t},expression:"lesson"}},[e._l(e.lessons,(function(t,r){return s("v-expansion-panel",{key:r,on:{click:function(e){}}},[s("v-expansion-panel-header",{staticClass:"text-h4"},[e._v("Lesson "+e._s(r+1)+": "+e._s(t.name))]),s("v-expansion-panel-content",{staticClass:"px-6"},[s("v-form",{ref:"lessonForm"+r,refInFor:!0,staticClass:"mt-5"},[s("v-row",[s("v-col",{attrs:{cols:"12",md:"4"}},[s("v-text-field",{attrs:{label:"Name",name:"name",type:"text",rules:e.requiredRules,solo:"",clearable:"",color:"indigo"},model:{value:e.lessons[r].name,callback:function(t){e.$set(e.lessons[r],"name",t)},expression:"lessons[idx].name"}},[e._v("Title*")])],1),s("v-col",{attrs:{cols:"12",md:"4"}},[s("v-text-field",{attrs:{label:"Duration in minutes",name:"duration",rules:e.durationRules,solo:"",clearable:"",color:"indigo"},model:{value:e.lessons[r].duration,callback:function(t){e.$set(e.lessons[r],"duration",t)},expression:"lessons[idx].duration"}})],1)],1),s("v-row",[s("v-col",{attrs:{cols:"12"}},[s("v-textarea",{attrs:{label:"Description","auto-grow":""},model:{value:e.lessons[r].description,callback:function(t){e.$set(e.lessons[r],"description",t)},expression:"lessons[idx].description"}})],1)],1),s("v-row",[s("v-col",{attrs:{cols:"12",md:"6"}},[s("v-file-input",{attrs:{accept:"video/mp4, video/ogg",placeholder:"Choose Explanation Video","prepend-icon":"mdi-video",label:"Explanation Video"},model:{value:e.lessons[r].video,callback:function(t){e.$set(e.lessons[r],"video",t)},expression:"lessons[idx].video"}})],1),s("v-col",{attrs:{cols:"12",md:"6"}},[s("v-file-input",{attrs:{accept:"image/*",placeholder:"Choose coverpage for video","prepend-icon":"mdi-image",label:"Explanation Video Poster"},model:{value:e.lessons[r].videoPoster,callback:function(t){e.$set(e.lessons[r],"videoPoster",t)},expression:"lessons[idx].videoPoster"}})],1)],1),s("v-row",[s("v-col",{attrs:{cols:"12",md:"6"}},[s("v-file-input",{attrs:{accept:"video/mp4, video/ogg",placeholder:"Choose Explanation Video","prepend-icon":"mdi-video",label:"Demo Video"},model:{value:e.lessons[r].demo,callback:function(t){e.$set(e.lessons[r],"demo",t)},expression:"lessons[idx].demo"}})],1),s("v-col",{attrs:{cols:"12",md:"6"}},[s("v-file-input",{attrs:{accept:"image/*",placeholder:"Choose coverpage for demo video","prepend-icon":"mdi-image",label:"Demo Video Poster"},model:{value:e.lessons[r].demoPoster,callback:function(t){e.$set(e.lessons[r],"demoPoster",t)},expression:"lessons[idx].demoPoster"}})],1)],1),s("v-row",[s("v-col",{attrs:{cols:"12",md:"6"}},[s("v-switch",{attrs:{label:"Overlay score on your demo video"},on:{change:function(t){return e.showVex(t,r)}},model:{value:e.lessons[r].useScore,callback:function(t){e.$set(e.lessons[r],"useScore",t)},expression:"lessons[idx].useScore"}})],1)],1),s("v-row",[e.lessons[r].useScore?s("v-col",{attrs:{cols:"12",md:"6"}},[s("v-radio-group",{attrs:{mandatory:!0},model:{value:e.lessons[r].scoreOption,callback:function(t){e.$set(e.lessons[r],"scoreOption",t)},expression:"lessons[idx].scoreOption"}},[s("v-radio",{attrs:{label:"Upload musicXML file",value:"xml"}}),s("v-radio",{attrs:{label:"Design your own score",value:"vex"}})],1)],1):e._e(),e.lessons[r].useScore?s("v-col",{attrs:{cols:"12",md:"6"}},[s("v-text-field",{attrs:{label:"Demo Start Time",clearable:"",color:"indigo","prepend-icon":"mdi-alarm","persistent-hint":"",hint:"At roughly which second did you start playing in demo video",rules:e.demoStartTimeRules},model:{value:e.lessons[r].demoStartTime,callback:function(t){e.$set(e.lessons[r],"demoStartTime",t)},expression:"lessons[idx].demoStartTime"}})],1):e._e()],1)],1),s("div",{directives:[{name:"show",rawName:"v-show",value:"vex"==e.lessons[r].scoreOption&&e.lessons[r].useScore,expression:"(lessons[idx].scoreOption == 'vex' && lessons[idx].useScore)"}],attrs:{id:"optionvex"}},[s("v-row",[s("v-col",{attrs:{id:"pannel-content-"+r},on:{click:function(t){return e.changeMelody(t,r)}}})],1),s("v-row",[s("v-col",{attrs:{cols:"12",md:"6"}},[s("v-subheader",{staticClass:"pl-0"},[e._v("No. Bars")]),s("v-slider",{attrs:{min:"0",max:"16","thumb-label":"","thumb-size":24},on:{change:function(t){return e.changeBars(t,r)}},model:{value:e.lessons[r].numberOfBars,callback:function(t){e.$set(e.lessons[r],"numberOfBars",t)},expression:"lessons[idx].numberOfBars"}})],1),s("v-col",{attrs:{cols:"12",md:"6"}},[s("v-subheader",{staticClass:"pl-0"},[e._v("BPM")]),s("v-slider",{attrs:{min:"60",max:"120","thumb-label":"","thumb-size":24},model:{value:e.lessons[r].bpm,callback:function(t){e.$set(e.lessons[r],"bpm",t)},expression:"lessons[idx].bpm"}})],1),s("v-col",{attrs:{cols:"12",md:"6"}},[s("v-select",{attrs:{items:e.time_signatures,label:"Time Signature"},on:{change:function(t){return e.changeTimeSignature(t,r)}},model:{value:e.lessons[r].timeSignature,callback:function(t){e.$set(e.lessons[r],"timeSignature",t)},expression:"lessons[idx].timeSignature"}})],1)],1)],1),s("div",{directives:[{name:"show",rawName:"v-show",value:"xml"==e.lessons[r].scoreOption&&e.lessons[r].useScore,expression:"(lessons[idx].scoreOption == 'xml' && lessons[idx].useScore)"}],attrs:{id:"optionxml"}},[s("v-row",[s("v-col",{attrs:{cols:"12",md:"6"}},[s("v-file-input",{attrs:{accept:"text/xml, .musicxml",placeholder:"Music XML file","prepend-icon":"mdi-file-document-outline",label:"Upload musicxml file"},model:{value:e.lessons[r].musicXml,callback:function(t){e.$set(e.lessons[r],"musicXml",t)},expression:"lessons[idx].musicXml"}})],1)],1),s("v-row",[s("v-col",{attrs:{cols:"12",md:"6"}},[s("v-subheader",{staticClass:"pl-0"},[e._v("BPM")]),s("v-slider",{attrs:{min:"60",max:"120","thumb-label":"","thumb-size":24},model:{value:e.lessons[r].bpm,callback:function(t){e.$set(e.lessons[r],"bpm",t)},expression:"lessons[idx].bpm"}})],1)],1)],1)],1)],1)})),s("v-expansion-panel",{attrs:{readonly:""},on:{click:e.newLesson}},[s("v-expansion-panel-header",{staticClass:"text-h5",attrs:{"disable-icon-rotate":""},scopedSlots:e._u([{key:"actions",fn:function(){return[s("v-icon",[e._v("mdi-plus")])]},proxy:!0}])},[e._v("Add Lesson ")])],1)],2)],1)],1),s("v-row",{staticClass:"justify-center"},[s("v-col",{staticClass:"text-center"},[s("v-btn",{attrs:{color:"indigo",dark:""},on:{click:e.goStepThree}},[e._v("Continue")]),s("v-btn",{attrs:{to:"/course/index"}},[e._v("Cancel")])],1)],1)],1),s("v-stepper-content",{attrs:{step:"3"}},[s("v-row",{staticClass:"justify-center"},[s("v-col",{attrs:{cols:"12",md:"11"}},[s("v-card",{staticClass:"text-left mb-12",attrs:{outlined:""}},[s("v-card-title",{staticClass:"display-1"},[e._v("Course Info"),s("v-spacer"),s("v-btn",{attrs:{outlined:"",color:"indigo",right:""},on:{click:function(t){e.e1=1}}},[s("v-icon",{attrs:{color:"indigo"}},[e._v("mdi-pencil")])],1)],1),s("v-card-text",[s("v-row",[s("v-col",{attrs:{cols:"12",md:"4"}},[s("p",{staticClass:"text-h6"},[e._v("Title: "+e._s(e.name))])]),s("v-col",{attrs:{cols:"12",md:"4"}},[s("p",{staticClass:"text-h6"},[e._v("Price: "+e._s(e.price))])]),s("v-col",{attrs:{cols:"12",md:"4"}},[s("p",{staticClass:"text-h6"},[e._v("Language: "+e._s(e.language))])])],1),s("v-row",[s("v-col",{attrs:{cols:"12"}},[s("p",{staticClass:"text-h6"},[e._v("Description: "+e._s(e.description))])])],1),s("v-row",[s("v-col",{attrs:{cols:"12",md:"4"}},[s("p",{staticClass:"text-h6"},[e._v("Level: "+e._s(e.level))])]),s("v-col",{attrs:{cols:"12",md:"4"}},[s("p",{staticClass:"text-h6"},[e._v("Instrument: "+e._s(e.instrument))])])],1)],1)],1)],1)],1),s("v-row",{staticClass:"justify-center mt-5"},[s("v-col",{attrs:{cols:"12",md:"11"}},[s("v-card",{staticClass:"text-left mb-12",attrs:{outlined:""}},[s("v-card-title",{staticClass:"display-1"},[e._v("Lessons"),s("v-spacer"),s("v-btn",{attrs:{outlined:"",color:"indigo",right:""},on:{click:function(t){e.e1=2}}},[s("v-icon",{attrs:{color:"indigo"}},[e._v("mdi-pencil")])],1)],1),s("v-divider"),e._l(e.lessons,(function(t,r){return s("v-card-text",[s("v-row",[s("v-col",{attrs:{cols:"12",md:"4"}},[s("p",{staticClass:"text-h6"},[e._v("Name: "+e._s(t.name))])]),s("v-col",{attrs:{cols:"12",md:"4"}},[s("p",{staticClass:"text-h6"},[e._v("Duration: "+e._s(t.duration))])])],1),s("v-row",[s("v-col",{attrs:{cols:"12"}},[s("p",{staticClass:"text-h6"},[e._v("Description: "+e._s(t.description))])])],1),t.video&&t.videoPoster?s("v-row",[s("v-col",{attrs:{cols:"12",md:"6"}},[s("p",{staticClass:"text-h6"},[e._v("Explanation Video: "+e._s(t.video.name))])]),s("v-col",{attrs:{cols:"12",md:"6"}},[s("p",{staticClass:"text-h6"},[e._v("Video Poster: "+e._s(t.videoPoster.name))])])],1):e._e(),t.demo&&t.demoPoster?s("v-row",[s("v-col",{attrs:{cols:"12",md:"6"}},[s("p",{staticClass:"text-h6"},[e._v("Demo Video: "+e._s(t.demo.name))])]),s("v-col",{attrs:{cols:"12",md:"6"}},[s("p",{staticClass:"text-h6"},[e._v("Demo Poster: "+e._s(t.demoPoster.name))])])],1):e._e(),s("v-row",{directives:[{name:"show",rawName:"v-show",value:t.useScore&&!t.useXml,expression:"lesson.useScore && !lesson.useXml"}]},[s("v-col",[s("div",{attrs:{id:"vexflow-review-wrapper-"+r}})])],1),s("v-row",[s("v-col",{attrs:{cols:"12",md:"4"}},[s("p",{staticClass:"text-h6"},[e._v("BPM: "+e._s(t.bpm))])]),s("v-col",{attrs:{cols:"12",md:"4"}},[s("p",{staticClass:"text-h6"},[e._v("Number of Bars: "+e._s(t.numberOfBars))])])],1)],1)}))],2)],1)],1),s("v-row",{staticClass:"justify-center"},[s("v-col",[s("v-btn",{attrs:{color:"indigo",dark:"",loading:e.loading,disabled:e.loading},on:{click:e.submit}},[e._v("Confirm")]),s("v-btn",{attrs:{to:"/course/index"}},[e._v("Cancel")])],1)],1),s("v-row",[s("v-col",[s("p",{staticClass:"error"},[e._v(e._s(e.error))])])],1)],1)],1)],1)],1)},Bt=[],Mt=(s("a4d3"),s("e01a"),s("a9e3"),{create:function(e){var t=W();return t.defaults.headers.post["Content-Type"]="multipart/form-data",t.post("exercise/new",e)},list:function(e){return W().get("exercise/list?lid=".concat(e))},edit:function(e){var t=W();return t.defaults.headers.post["Content-Type"]="multipart/form-data",t.put("exercise/edit",e)},delete:function(e){return W().delete("exercise/del?eid=".concat(e))}}),Rt={name:"NewCourse",components:{panel:fe},data:function(){return{e1:1,name:"",nameRules:[function(e){return!!e||"Title is required"}],error:null,loading:!1,price:"",priceRules:[function(e){return!!e||"Price is required"},function(e){return new RegExp(/^\d+(?:\.\d{0,2})$/).test(e)||"Price must be a number with maximum 2 decimal places"}],description:"",language:"",languages:["English","Chinese"],level:"",levels:["Beginner","Intermediate","Advanced"],instrument:"",instruments:["Piano","Guitar","Drum Set","Er Hu","Yang Qin","French Horn"],lesson:[0],lessons:[{name:"",duration:"",description:"",video:null,videoPoster:null,demo:null,demoPoster:null,useScore:!0,handler:null,timeSignature:"4/4",bpm:60,numberOfBars:4,melody:[],demoStartTime:"0",scoreOption:"vex",musicXml:null}],durationRules:[function(e){return!!e||"Duration is required"},function(e){return new RegExp(/^\d+$/).test(e)||"Please input numbers only"}],demoStartTimeRules:[function(e){return!!e||"Demo Start Time is required"},function(e){return new RegExp(/^\d+$/).test(e)||"Please input numbers only"}],requiredRules:[function(e){return!!e||"This field is required"}],reviewVexHandlers:[],time_signatures:["4/4","3/4","2/4","3/8","6/8"]}},computed:Object(c["b"])(["user"]),watch:{e1:function(e){if(2==e&&null==this.lessons[0].handler){var t=document.createElement("div");t.id="vexflow-wrapper-0";var s=document.getElementById("pannel-content-0");s.appendChild(t),this.lessons[0].handler=new ze["a"].Handler(t.id,{canvasProperties:{id:t.id+"-canvas",width:5*window.innerWidth/6,tabindex:1}}).init()}else if(3==e)if(0==this.reviewVexHandlers.length)for(var r=0;r<this.lessons.length;r++){var n=new ze["a"].Handler("vexflow-review-wrapper-".concat(r),{canEdit:!1,numberOfStaves:this.lessons[r].numberOfBars,canvasProperties:{id:"vexflow-review-wrapper-".concat(r)+"-canvas",width:5*window.innerWidth/6,tabindex:1}}).init();n.setTimeSignature(this.lessons[r].timeSignature),this.lessons[r].melody.length>0&&n.importNotes(this.lessons[r].melody,this.lessons[r].timeSignature),this.reviewVexHandlers.push(n),this.lessons[r].useScore||document.getElementById("vexflow-review-wrapper-".concat(r)).classList.add("hide")}else for(var i=0;i<this.lessons.length;i++)this.reviewVexHandlers[i].setTimeSignature(this.lessons[i].timeSignature),this.reviewVexHandlers[i].importNotes(this.lessons[i].melody,this.lessons[i].timeSignature)}},methods:{goStepTwo:function(){this.$refs.courseForm.validate()&&(this.e1=2)},goStepThree:function(){for(var e=0;e<this.lessons.length;e++)if(!this.$refs["lessonForm".concat(e)][0].validate())return void alert("Please fill in name, duration and demo start time for all lessons");for(var t=0;t<this.lessons.length;t++)if(this.lessons[t].useScore&&"vex"==this.lessons[t].scoreOption&&0==this.lessons[t].melody.length&&this.lessons[t].useScore&&0!=this.lessons[t].numberOfBars)return void alert("Please input some notes or choose not to overlay score");this.e1=3},go_to_courses:function(){this.$router.push("/course/index/".concat(this.$store.state.user.id))},submit:function(){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function t(){var s,r,n,i,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,e.error="",t.prev=2,t.next=5,z.create({name:e.name,description:e.description,langauge:e.langauge,level:e.level,instrument:e.instrument,price:Number(e.price),TutorId:e.user.id});case 5:return s=t.sent,t.next=8,e.$store.dispatch("addCourse",s.data.course);case 8:r=0;case 9:if(!(r<e.lessons.length)){t.next=39;break}return t.next=12,$.create({name:e.lessons[r].name,duration:Number(e.lessons[r].duration),description:e.lessons[r].description,cid:s.data.course.id});case 12:return n=t.sent,t.next=15,e.$store.dispatch("addLesson",n.data.lesson);case 15:return i=e.lessons[r],a=new FormData,a.set("name",""),a.set("melody",i.melody.join("-")),a.set("timeSignature",i.timeSignature),a.set("bpm",i.bpm),a.set("lid",n.data.lesson.id),a.set("numberOfBars",i.numberOfBars),a.set("demoStartTime",parseInt(i.demoStartTime)),a.set("useScore",i.useScore),i.useScore&&("vex"==i.scoreOption?a.set("useXml",!1):a.set("useXml",!0)),i.video&&a.append("video",i.video),i.videoPoster&&a.append("videoPoster",i.videoPoster),i.demo&&a.append("demo",i.demo),i.demoPoster&&a.append("demoPoster",i.demoPoster),i.musicXml&&a.append("musicXml",i.musicXml),t.next=33,Mt.create(a);case 33:return o=t.sent,t.next=36,e.$store.dispatch("addExercise",{exercise:o.data.exercise,CourseId:s.data.course.id});case 36:r++,t.next=9;break;case 39:e.$router.push("/course/show/".concat(s.data.course.id)),t.next=45;break;case 42:t.prev=42,t.t0=t["catch"](2),e.error=t.t0.response.data.error;case 45:case"end":return t.stop()}}),t,null,[[2,42]])})))()},newLesson:function(){this.lessons.push({name:"",duration:"",description:"",video:null,demoVideo:null,useScore:!1,handler:null,timeSignature:"4/4",bpm:60,numberOfBars:4,melody:[],demoStartTime:"0"}),this.lesson.push(this.lessons.length)},showVex:function(e,t){if(null==this.lessons[t].handler){var s=document.createElement("div");s.id="vexflow-wrapper-".concat(t);var r=document.getElementById("pannel-content-".concat(t));r.appendChild(s),this.lessons[t].handler=new ze["a"].Handler(s.id,{canvasProperties:{id:s.id+"-canvas",width:5*window.innerWidth/6,tabindex:1}}).init()}},changeTimeSignature:function(e,t){this.lessons[t].handler.setTimeSignature(this.lessons[t].timeSignature)},changeBars:function(e,t){this.lessons[t].handler.changeNumberOfBars(this.lessons[t].numberOfBars,this.lessons[t].handler.exportNotes())},changeMelody:function(e,t){this.lessons[t].melody=this.lessons[t].handler.exportNotes()}},mounted:function(){}},Pt=Rt,Et=(s("1f6f"),s("b974")),Nt=s("7e85"),Lt=s("e516"),Ut=s("9c54"),jt=s("56a4"),Dt=s("e0c7"),Ft=s("b73d"),At=Object(p["a"])(Pt,It,Bt,!1,null,"706d71d0",null),$t=At.exports;m()(At,{VBtn:b["a"],VCard:Q["a"],VCardText:J["c"],VCardTitle:J["d"],VCol:ee["a"],VDivider:se["a"],VExpansionPanel:ut["a"],VExpansionPanelContent:dt["a"],VExpansionPanelHeader:pt["a"],VExpansionPanels:ht["a"],VFileInput:mt["a"],VForm:xe["a"],VIcon:g["a"],VRadio:_e["a"],VRadioGroup:we["a"],VRow:ne["a"],VSelect:Et["a"],VSlider:st["a"],VSpacer:S["a"],VStepper:Nt["a"],VStepperContent:Lt["a"],VStepperHeader:Ut["a"],VStepperItems:Ut["b"],VStepperStep:jt["a"],VSubheader:Dt["a"],VSwitch:Ft["a"],VTextField:ye["a"],VTextarea:vt["a"]});var Ht=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"student"}},[s("panel",{attrs:{title:"Tutors"}},[s("v-list",e._l(e.allTutors,(function(t){return s("v-list-item",{key:t.id},[s("v-list-item-icon",[e.subscribedTutorsId.includes(t.id)?s("v-btn",{attrs:{dark:"",color:"grey darken-2",disable:""},on:{click:function(e){}}},[e._v("Subscribed")]):s("v-btn",{attrs:{dark:"",color:"#ec5252"},on:{click:function(s){return e.subscribe(s,t)}}},[e._v("Subscribe")])],1),s("v-list-item-content",[s("v-list-item-title",{staticClass:"mr-5",domProps:{textContent:e._s(t.username)}})],1),s("v-list-item-avatar",[s("v-img",{attrs:{src:e.avatar}})],1)],1)})),1)],1)],1)},qt=[],Wt={name:"Student",data:function(){return{avatar:"https://cdn.vuetifyjs.com/images/lists/2.jpg"}},components:{panel:fe},computed:Object(l["a"])({subscribedTutorsId:function(){return this.allTutors.map((function(e){return e.id}))}},Object(c["b"])(["user","allTutors"])),methods:{subscribe:function(e,t){var s=this;return Object(j["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s.$store.dispatch("subscribe",{studentId:s.user.id,tutorId:t.id});case 2:case"end":return e.stop()}}),e)})))()}}},zt=Wt,Kt=Object(p["a"])(zt,Ht,qt,!1,null,"aa04a6a6",null),Xt=Kt.exports;m()(Kt,{VBtn:b["a"],VImg:re["a"],VList:x["a"],VListItem:_["a"],VListItemAvatar:Ie["a"],VListItemContent:C["a"],VListItemIcon:y["a"],VListItemTitle:C["b"]});var Yt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("v-row",{staticClass:"justify-center"},[s("v-col",{staticClass:"text-center",attrs:{cols:"10"}},[s("video",{ref:"videoPlayer",staticClass:"video-js"}),s("div",{attrs:{id:"vexflow-wrapper"}})])],1)],1)},Gt=[],Zt={name:"VideoPlayer",data:function(){return{options:{controls:!0,fluid:!0,sources:[{src:"http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4",type:"video/mp4"}],poster:"https://rhythm-academy.s3-ap-southeast-1.amazonaws.com/demoPoster.JPG"},handler:null,hide:!0}},mounted:function(){var e=this;this.player=Object(Ye["default"])(this.$refs.videoPlayer,this.options,(function(){console.log("Player ready")})),this.handler=new ze["a"].Handler("vexflow-wrapper",{canEdit:!1,numberOfStaves:2,canvasProperties:{id:"vexflow-wrapper-canvas",width:document.getElementById("vjs_video_3").offsetWidth,height:80*ze["a"].scale,tabindex:1}}).init(),this.player.on("fullscreenchange",(function(){e.player.isFullscreen_?e.hide=!1:e.hide=!0})),document.getElementById("vjs_video_3").appendChild(document.getElementById("vexflow-wrapper"))},beforeDestroy:function(){this.player&&this.player.dispose()}},Qt=Zt,Jt=(s("e932"),Object(p["a"])(Qt,Yt,Gt,!1,null,"0d1a27ee",null)),es=Jt.exports;m()(Jt,{VCol:ee["a"],VRow:ne["a"]});var ts=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"mt-5",attrs:{id:"student"}},[e.user.isTutor?s("panel",{attrs:{title:"My Courses"}},[s("v-list",e._l(e.userOwnedCourses,(function(t,r){return s("v-list-item",{key:t.id,on:{click:function(s){return e.goToThread(s,t)}}},[s("v-list-item-content",[s("v-list-item-title",{staticClass:"text-h5 py-0",domProps:{textContent:e._s(t.name)}})],1),s("v-list-item-icon",[s("div",{staticClass:"notification"},[s("p",{staticClass:"pa-0 mx-auto"},[e._v(e._s(t.unreadStudentPost))])])])],1)})),1)],1):s("panel",{attrs:{title:"Subscribed Courses"}},[s("v-list",e._l(e.userSubscribedCourses,(function(t,r){return s("v-list-item",{key:t.id,on:{click:function(s){return e.showThread(s,t)}}},[s("v-list-item-content",[s("v-list-item-title",{staticClass:"text-h5 py-0",domProps:{textContent:e._s(t.name)}})],1),s("v-list-item-icon",[s("div",{staticClass:"notification"},[s("p",{staticClass:"pa-0 mx-auto"},[e._v(e._s(t.unreadTutorPost))])])])],1)})),1)],1)],1)},ss=[],rs={name:"CoursesThreadsIndex",data:function(){return{avatar:"https://cdn.vuetifyjs.com/images/lists/2.jpg",threads:[],userOwnedCourses:[],userSubscribedCourses:[]}},components:{panel:fe},computed:Object(c["b"])(["user"]),methods:{goToThread:function(e,t){this.$router.push("/course/threads/index/".concat(t.id))},showThread:function(e,t){this.$router.push({name:"showthread",params:{course_id:t.id,student_id:this.user.id}})}},mounted:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(){var t,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.user.isStudent){e.next=7;break}return e.next=3,H.getSubscriptionInfoOfStudent(this.user.id);case 3:t=e.sent,this.userSubscribedCourses=t.data.courses,e.next=11;break;case 7:return e.next=9,z.list(this.user.id);case 9:s=e.sent,this.userOwnedCourses=s.data.courses;case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},ns=rs,is=(s("c568"),Object(p["a"])(ns,ts,ss,!1,null,"6558bc50",null)),as=is.exports;m()(is,{VList:x["a"],VListItem:_["a"],VListItemContent:C["a"],VListItemIcon:y["a"],VListItemTitle:C["b"]});var os=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"student"}},[s("panel",{attrs:{title:"All Courses"}},[s("v-list",e._l(e.students,(function(t,r){return s("v-list-item",{key:t.id,on:{click:function(s){return e.showThread(s,t)}}},[s("v-list-item-avatar",[s("v-img",{attrs:{src:e.avatar}})],1),s("v-list-item-content",[s("v-list-item-title",{domProps:{textContent:e._s(t.username)}})],1),s("v-list-item-icon",[s("div",{staticClass:"notification"},[s("p",{staticClass:"pa-0 mx-auto"},[e._v(e._s(e.unreads[r]))])])])],1)})),1)],1)],1)},ls=[],cs={name:"CourseThreadsIndex",data:function(){return{avatar:"https://cdn.vuetifyjs.com/images/lists/2.jpg",students:[],unreads:[]}},components:{panel:fe},computed:Object(l["a"])({},Object(c["b"])(["user","userOwnedCourses"])),methods:{showThread:function(e,t){this.$router.push({name:"showthread",params:{course_id:this.$route.params.course_id,student_id:t.id}})}},mounted:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(){var t,s,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,H.getSubscriptionInfoOfCourse(this.$route.params.course_id);case 2:t=e.sent,this.students=t.data.students,s=0;case 5:if(!(s<this.students.length)){e.next=13;break}return e.next=8,it.getUnread(this.$route.params.course_id,this.students[s].id);case 8:r=e.sent,this.unreads.push(r.data.unread);case 10:s++,e.next=5;break;case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},us=cs,ds=(s("00de"),Object(p["a"])(us,os,ls,!1,null,"5943e257",null)),ps=ds.exports;m()(ds,{VImg:re["a"],VList:x["a"],VListItem:_["a"],VListItemAvatar:Ie["a"],VListItemContent:C["a"],VListItemIcon:y["a"],VListItemTitle:C["b"]});var hs=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.course?s("div",{attrs:{id:"student"}},[s("v-container",[s("h1",[e._v(e._s(e.course.name))]),s("v-row",[s("v-col",[s("v-expansion-panels",{staticClass:"elevation-2",attrs:{hover:"",multiple:""},model:{value:e.currentThread,callback:function(t){e.currentThread=t},expression:"currentThread"}},e._l(e.threads,(function(t,r){return s("v-expansion-panel",{key:t.id},[s("v-expansion-panel-header",{staticClass:"font-weight-bold",staticStyle:{"font-size":"18px"}},[e._v(e._s(e.course.lessons[r].name))]),s("v-expansion-panel-content",{staticClass:"px-6"},[t.posts?s("v-list",e._l(t.posts,(function(r,n){return s("v-list-item",{key:r.id},[s("v-list-item-content",{staticClass:"pb-0"},[s("v-container",{staticClass:"pt-0 pb-4 px-0",attrs:{fluid:""}},[0==n||r.updatedAt.substring(0,10)!=t.posts[n-1].updatedAt.substring(0,10)?s("v-row",{staticClass:"py-0"},[s("v-col",{staticClass:"py-0"},[s("v-chip",{staticStyle:{"font-size":"12px"},attrs:{label:"",color:"indigo darken-3",dark:""}},[e._v(e._s(new Date(r.updatedAt).toLocaleString([],{year:"numeric",month:"numeric",day:"numeric"})))])],1)],1):e._e(),s("v-row",{staticClass:"mt-5"},[s("v-col",{staticClass:"pb-0",staticStyle:{"margin-bottom":"-3px"}},[s("video",{attrs:{width:"100%",height:"audo",controls:""}},[s("source",{attrs:{src:r.videoUrl,type:"video/mp4"}}),e._v("Your browser does not support HTML video.")])])],1),r.UserId!=e.user.id?s("v-row",{staticClass:"justify-end bottom-border mx-0 py-3"},[s("v-col",{staticClass:"pr-8 py-0",attrs:{cols:"6"}},[s("div",{staticClass:"speech-bubble-other"},[s("v-row",{staticClass:"ma-0",staticStyle:{width:"100%"}},[s("v-col",{staticClass:"text-left"},[s("div",[e._v(e._s(r.message))])])],1),s("div",{staticClass:"timestamp"},[e._v(e._s(new Date(r.updatedAt).toLocaleString([],{hour:"2-digit",minute:"2-digit"})))])],1)]),s("v-col",{staticClass:"pa-0",attrs:{cols:"1"}},[s("v-avatar",{attrs:{color:"indigo",size:"40"}},[s("v-img",{attrs:{src:e.avatar}})],1)],1)],1):s("v-row",{staticClass:"justify-start bottom-border mx-0 py-3"},[s("v-col",{staticClass:"pa-0",attrs:{cols:"1"}},[s("v-avatar",{attrs:{color:"indigo",size:"40"}},[s("v-img",{attrs:{src:e.avatar}})],1)],1),s("v-col",{staticClass:"pl-8 py-0",attrs:{cols:"6"}},[s("div",{staticClass:"speech-bubble-self"},[s("v-row",{staticClass:"ma-0",staticStyle:{width:"100%"}},[s("v-col",{staticClass:"text-left"},[s("div",[e._v(e._s(r.message))])])],1),s("div",{staticClass:"timestamp"},[e._v(e._s(new Date(r.updatedAt).toLocaleString([],{hour:"2-digit",minute:"2-digit"})))])],1)])],1)],1)],1)],1)})),1):e._e(),s("v-row",{staticClass:"justify-center"},[s("v-col",{attrs:{cols:"10"}},[s("v-form",{ref:"form-"+t.id,refInFor:!0},[s("v-row",[s("v-col",{attrs:{cols:"12"}},[s("v-textarea",{attrs:{outlined:"",name:"input-7-4",label:"Draft a reply"},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}})],1),s("v-col",{attrs:{cols:"6"}},[s("v-file-input",{attrs:{accept:"video/mp4, video/ogg",placeholder:"Upload","prepend-icon":"mdi-video",label:"Reply Video"},model:{value:e.file,callback:function(t){e.file=t},expression:"file"}})],1),s("v-col",{attrs:{cols:"6"}})],1)],1)],1)],1),s("v-row",[s("v-col",[s("v-btn",{attrs:{large:"",color:"#ec5252",dark:""},on:{click:function(s){return e.create_post(s,t,r)}}},[e._v("Reply your student")])],1)],1)],1)],1)})),1)],1)],1)],1)],1):e._e()},ms=[],vs={name:"ShowCourseThread",props:["lesson_pos"],data:function(){return{avatar:"https://cdn.vuetifyjs.com/images/lists/2.jpg",threads:[],course:null,message:"",file:null,grade:0,requiredRules:[function(e){return!!e||"This field is required"}],currentThread:[this.lesson_pos]}},components:{panel:fe},computed:Object(l["a"])({},Object(c["b"])(["user"])),methods:{adjustAspectRatioForFullScreen:function(e,t){var s=this.originalHeight/this.originalWidth,r=e*s;r>t?(this.videoHeight=t,this.videoWidth=t/s):r==t?(this.videoHeight=t,this.videoWidth=e):(this.videoHeight=r,this.videoWidth=e)},create_post:function(e,t,s){var r=this;return Object(j["a"])(regeneratorRuntime.mark((function e(){var n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r.$refs["form-".concat(t.id)][0].validate()){e.next=14;break}return n=new FormData,n.set("tid",t.id),n.set("message",r.message),n.set("grade",r.grade),n.append("video",r.file),e.next=8,Ge.create(n);case 8:i=e.sent,r.threads[s].posts.splice(r.threads[s].posts.length,0,i.data.post),r.file=null,r.message=null,e.next=15;break;case 14:return e.abrupt("return");case 15:case"end":return e.stop()}}),e)})))()}},mounted:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(){var t,s,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,z.show(this.$route.params.course_id);case 2:t=e.sent,this.course=t.data.course,s=0;case 5:if(!(s<this.course.lessons.length)){e.next=14;break}return this.user.isStudent?this.$store.dispatch("setNotifications",this.$store.state.notifications-this.course.unreadTutorPost):this.$store.dispatch("setNotifications",this.$store.state.notifications-this.course.unreadStudentPost),e.next=9,it.show(this.course.lessons[s].id,this.$route.params.student_id);case 9:r=e.sent,this.threads.push(r.data.thread);case 11:s++,e.next=5;break;case 14:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},fs=vs,bs=(s("2f18"),Object(p["a"])(fs,hs,ms,!1,null,"a5634c80",null)),gs=bs.exports;m()(bs,{VAvatar:lt["a"],VBtn:b["a"],VChip:ct["a"],VCol:ee["a"],VContainer:te["a"],VExpansionPanel:ut["a"],VExpansionPanelContent:dt["a"],VExpansionPanelHeader:pt["a"],VExpansionPanels:ht["a"],VFileInput:mt["a"],VForm:xe["a"],VImg:re["a"],VList:x["a"],VListItem:_["a"],VListItemContent:C["a"],VRow:ne["a"],VTextarea:vt["a"]});var xs=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.course?s("div",[s("v-container",[s("v-row",{staticClass:"justify-center"},[s("v-col",{attrs:{cols:"12",md:"6"}},[s("v-row",{staticClass:"justify-center"},[s("v-col",{staticClass:"px-4"},[s("h2",{staticClass:"font-weight-bold"},[e._v("Checkout")])])],1),s("v-radio-group",{attrs:{mandatory:!0},model:{value:e.paymentMethod,callback:function(t){e.paymentMethod=t},expression:"paymentMethod"}},[s("v-radio",{attrs:{label:"Paypal",value:"paypal"}}),s("v-radio",{attrs:{label:"Credit Card",value:"credit card"}})],1),s("v-row",{staticClass:"justify-center",class:{hide:"paypal"==e.paymentMethod}},[s("v-col",{staticClass:"px-4"},[s("div",{attrs:{id:"dropin-container"}})])],1),s("v-row",[s("v-col",[s("v-card",{staticClass:"pa-3 px-10",attrs:{outlined:""}},[s("v-row",{staticClass:"px-3"},[s("v-col",[s("h2",{staticClass:"font-weight-bold"},[e._v("Summary")])])],1),s("v-row",{staticClass:"px-3"},[s("v-col",{staticClass:"px-4",attrs:{cols:"12"}},[s("p",{staticClass:"alignleft"},[e._v(e._s(e.course.name)+":")]),s("p",{staticClass:"alignright"},[e._v("S$ "+e._s(e.course.price))])]),s("v-col",{staticClass:"px-4",attrs:{cols:"12"}},[s("p",{staticClass:"alignleft"},[e._v("GST:")]),s("p",{staticClass:"alignright"},[e._v("S$ "+e._s((.07*e.course.price).toFixed(2)))]),s("div",{staticStyle:{clear:"both"}})])],1),s("v-divider",{staticClass:"px-3"}),s("v-row",{staticClass:"px-3"},[s("v-col",[s("p",{staticClass:"alignleft font-weight-bold"},[e._v("Total:")]),s("p",{staticClass:"alignright font-weight-bold"},[e._v("S$ "+e._s((e.course.price+.07*e.course.price).toFixed(2)))]),s("div",{staticStyle:{clear:"both"}})])],1),s("v-btn",{staticClass:"mb-5",class:{hide:"paypal"==e.paymentMethod},staticStyle:{width:"50%"},attrs:{large:"",color:"#ec5252",dark:""},on:{click:e.requestPaymentMethod}},[e._v("Complete Payment")]),s("v-row",{staticClass:"justify-center",class:{hide:"paypal"!=e.paymentMethod}},[s("v-col",[s("div",{attrs:{id:"paypal-button-container"}})])],1),s("div",{staticClass:"error",model:{value:e.error,callback:function(t){e.error=t},expression:"error"}},[e._v(e._s(e.error))])],1)],1)],1)],1)],1)],1)],1):e._e()},_s=[],ws=(s("b680"),{getClientToken:function(){return W().get("braintree-client-token")},createTransaction:function(e){return W().post("braintree-checkout",e)},createPaypalTransaction:function(e){return W().post("braintree-paypal-checkout",e)},getPaypalClientToken:function(){return W().get("paypal-client-token")},createOrder:function(e){return W().post("paypal-create-order",e)},captureOrder:function(e){return W().post("paypal-capture-order",e)}}),ys={name:"Payment",data:function(){return{course:null,clientToken:"",dropinInstance:null,nonceObj:null,deviceData:null,transaction:null,error:null,paymentMethod:"paypal"}},methods:{togglePaymentMethod:function(){"paypal"==this.paymentMethod?this.paymentMethod="credit card":this.paymentMethod="paypal"},requestPaymentMethod:function(){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.dropinInstance.requestPaymentMethod();case 2:return e.nonceObj=t.sent,t.next=5,ws.createTransaction({amount:e.course.price,nonce:e.nonceObj.nonce,deviceData:e.deviceData});case 5:e.transaction=t.sent.data.result,e.transaction.success?e.subscribe():e.error=e.transaction.message;case 7:case"end":return t.stop()}}),t)})))()},subscribe:function(){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(e.course.lessons.map(function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(t){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,it.create({lid:t.id});case 2:return s=e.sent,s.data.thread.posts=[],t.thread=s.data.thread,e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:return t.next=4,e.$store.dispatch("subscribe",{studentId:e.$store.state.user.id,courseId:e.course.id});case 4:e.$router.push("/course/show/".concat(e.course.id));case 5:case"end":return t.stop()}}),t)})))()}},mounted:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(){var t,s,r,n,i,a,o=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,z.show(this.$route.params.course_id);case 2:return t=e.sent,this.course=t.data.course,e.next=6,ws.getClientToken();case 6:return s=e.sent.data.clientToken,this.clientToken=s,e.next=10,window.braintree.dropin.create({authorization:s,container:"#dropin-container"});case 10:return r=e.sent,this.dropinInstance=r,e.next=14,window.braintree.client.create({authorization:s});case 14:return n=e.sent,e.next=17,window.braintree.dataCollector.create({client:n,paypal:!0});case 17:i=e.sent,this.deviceData=i.deviceData,a=document.createElement("script"),a.src="https://www.paypal.com/sdk/js?client-id=AepgsiQK_rhw-m-bTjjuZ5lRxPWadsmSzn9dH_Lsn8o5uzSsTHsIRuxfaCfyg0odhrZFxq6_qpsmu-P7&currency=SGD",a.addEventListener("load",(function(){window.paypal.Buttons({locale:"en_US",createOrder:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ws.createOrder({amount:(o.course.price+.07*o.course.price).toFixed(2)});case 2:return t=e.sent.data.order.id,o.orderId=t,e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),onApprove:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ws.captureOrder({orderId:o.orderId});case 2:t=e.sent.data.result,o.result=t,"COMPLETED"==o.result.status&&(alert("Success!"),o.subscribe());case 5:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),onError:function(e){console.log(e)}}).render("#paypal-button-container");var e=document.createElement("script");e.src="https://www.paypalobjects.com/js/external/connect/api.js",e.addEventListener("load",(function(){window.paypal.use(["login"],(function(e){e.render({appid:"AepgsiQK_rhw-m-bTjjuZ5lRxPWadsmSzn9dH_Lsn8o5uzSsTHsIRuxfaCfyg0odhrZFxq6_qpsmu-P7",authend:"sandbox",scopes:"openid",containerid:"connect-button",responseType:"code",locale:"en-us",buttonShape:"rectangle",buttonSize:"lg",returnurl:"https://example.com"})}))})),document.body.appendChild(e)})),document.body.appendChild(a);case 23:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},Cs=ys,ks=(s("0374"),Object(p["a"])(Cs,xs,_s,!1,null,"6a23dff3",null)),Ss=ks.exports;m()(ks,{VBtn:b["a"],VCard:Q["a"],VCol:ee["a"],VContainer:te["a"],VDivider:se["a"],VRadio:_e["a"],VRadioGroup:we["a"],VRow:ne["a"]});var Ts=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-container",[s("v-row",{staticClass:"justify-center"},[s("v-col",{attrs:{cols:"6"}},[s("span",{attrs:{id:"connect-button"}})])],1),s("v-row",{staticClass:"justify-center"},[s("v-col",{attrs:{cols:"6"}},[s("div",{attrs:{id:"paypal-button-container"}})])],1)],1)},Vs=[],Os={name:"AdvancedPayment",data:function(){return{loaded:!1,paidFor:!1,course:{price:2,description:"leg lamp from that one movie"},isEligible:!0,orderId:"",result:null}},methods:{setLoaded:function(){var e=this;this.loaded=!0,window.paypal.Buttons({createOrder:function(){var t=Object(j["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ws.createOrder({amount:e.course.price});case 2:return s=t.sent.data.order.id,e.orderId=s,t.abrupt("return",s);case 5:case"end":return t.stop()}}),t)})));function s(){return t.apply(this,arguments)}return s}(),onApprove:function(){var t=Object(j["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ws.captureOrder({orderId:e.orderId});case 2:s=t.sent.data.result,e.result=s;case 4:case"end":return t.stop()}}),t)})));function s(){return t.apply(this,arguments)}return s}(),onError:function(e){console.log(e)}}).render("#paypal-button-container")}},mounted:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(){var t,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=document.createElement("script"),t.src="https://www.paypal.com/sdk/js?client-id=AbwBSbdR82bJexDTQGyi-ZJ7jKRSAOsfmh651obC8P5TcAEr70Wan7xICW3eOoWFGwHtj-xOnZQbfyib&currency=SGD",t.addEventListener("load",(function(){window.paypal.Buttons({locale:"en_US",createOrder:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ws.createOrder({amount:s.course.price});case 2:return t=e.sent.data.order.id,s.orderId=t,e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),onApprove:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ws.captureOrder({orderId:s.orderId});case 2:t=e.sent.data.result,s.result=t,"COMPLETED"==s.result.status&&alert("Success!");case 5:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),onError:function(e){console.log(e)}}).render("#paypal-button-container");var e=document.createElement("script");e.src="https://www.paypalobjects.com/js/external/connect/api.js",e.addEventListener("load",(function(){window.paypal.use(["login"],(function(e){e.render({appid:"AepgsiQK_rhw-m-bTjjuZ5lRxPWadsmSzn9dH_Lsn8o5uzSsTHsIRuxfaCfyg0odhrZFxq6_qpsmu-P7",authend:"sandbox",scopes:"openid",containerid:"connect-button",responseType:"code",locale:"en-us",buttonShape:"rectangle",buttonSize:"lg",returnurl:"https://example.com"})}))})),document.body.appendChild(e)})),document.body.appendChild(t);case 4:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},Is=Os,Bs=(s("7734"),Object(p["a"])(Is,Ts,Vs,!1,null,"689b7819",null)),Ms=Bs.exports;m()(Bs,{VCol:ee["a"],VContainer:te["a"],VRow:ne["a"]});var Rs=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"score"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:!e.scoreLoading,expression:"!scoreLoading"}],ref:"scorediv",staticClass:"ma-0",staticStyle:{height:"220px",width:"1000px"},attrs:{id:"score"}}),s("v-btn",{on:{click:e.changeBars}},[e._v("Change Bars")])],1)},Ps=[],Es={name:"OSMD",data:function(){return{scoreLoading:!1,osmd:null,from:1,to:2}},methods:{changeBars:function(){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.from+=2,e.to+=2,e.osmd.setOptions({drawFromMeasureNumber:e.from,drawUpToMeasureNumber:e.to}),console.log(e.osmd.graphic),t.next=6,e.osmd.render();case 6:console.log(e.osmd.graphic);case 7:case"end":return t.stop()}}),t)})))()}},mounted:function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return Ze["OpenSheetMusicDisplay"].prototype.preCalculate=function(){if(!this.graphic)throw new Error("OpenSheetMusicDisplay: Before rendering a music sheet, please load a MusicXML file");this.drawer&&this.drawer.clear();var e=this.container.offsetWidth;this.rules.RenderSingleHorizontalStaffline&&(e=32767),console.log("[OSMD] render width: "+e),this.sheet.pageWidth=e/this.zoom/10,this.rules.PageFormat&&!this.rules.PageFormat.IsUndefined?(this.rules.PageHeight=this.sheet.pageWidth/this.rules.PageFormat.aspectRatio,console.log("[OSMD] PageHeight: "+this.rules.PageHeight)):(console.log("[OSMD] endless/undefined pageformat, id: "+this.rules.PageFormat.idString),this.rules.PageHeight=100001),this.graphic.reCalculate(),this.drawingParameters.drawCursors&&(this.graphic.Cursors.length=0),this.createOrRefreshRenderBackend(),this.needBackendUpdate=!1,this.drawer.setZoom(this.zoom),this.drawer.drawSheet(this.graphic),this.enableOrDisableCursor(this.drawingParameters.drawCursors),this.drawingParameters.drawCursors&&this.cursor&&this.cursor.update(),this.zoomUpdated=!1},this.osmd=new Ze["OpenSheetMusicDisplay"](this.$refs.scorediv,{drawFromMeasureNumber:1,drawUpToMeasureNumber:2,fillEmptyMeasuresWithWholeRest:!0,drawComposer:!1,drawTitle:!1,renderSingleHorizontalStaffline:!0,drawPartNames:!1,autoResize:!1,drawMetronomeMarks:!1,drawingParameters:"compacttight"}),this.scoreLoading=!0,e.next=5,F.a.get("https://rhythm-academy.s3-ap-southeast-1.amazonaws.com/twinkle-twinkle-little-star.musicxml");case 5:return t=e.sent,e.next=8,this.osmd.load(t.data);case 8:return this.scoreLoading=!1,e.next=11,this.$nextTick();case 11:return console.log(this.osmd.graphic),e.next=14,this.osmd.render();case 14:console.log(this.osmd.graphic);case 15:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},Ns=Es,Ls=Object(p["a"])(Ns,Rs,Ps,!1,null,null,null),Us=Ls.exports;m()(Ls,{VBtn:b["a"]}),r["a"].use(N["a"]);var js=[{path:"/",name:"home",component:ae},{path:"/register",name:"register",component:ke},{path:"/login",name:"login",component:Ue},{path:"/student",name:"student",component:Me},{path:"/course/show/:course_id",name:"showcourse",component:yt},{path:"/course/show/:course_id/lesson/:lesson_id",name:"showlesson",component:bt,props:!0},{path:"/course/index",name:"courseindex",component:Ot},{path:"/course/new/",name:"newcourse",component:$t},{path:"/tutor/index",name:"tutorindex",component:Xt},{path:"/video",name:"video",component:es},{path:"/courses/threads/index",component:as},{path:"/course/threads/index/:course_id",component:ps},{path:"/course/threads/show/:course_id/:student_id",name:"showthread",component:gs,props:!0},{path:"/payment/:course_id",name:"payment",component:Ss},{path:"/advanced-payment",component:Ms},{path:"/osmd",component:Us}],Ds=new N["a"]({mode:"history",routes:js});Ds.beforeEach((function(e,t,s){"login"==e.name||q.state.isUserLoggedIn||"home"==e.name||"register"==e.name?s():s({name:"login"})}));var Fs=Ds,As=s("f309"),$s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("svg",{attrs:{id:"svg2",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 57.2 99.95"}},[s("title",[e._v("bg")]),s("g",{attrs:{id:"path3821"}},[s("rect",{attrs:{x:"34.97",y:"79.23",width:"22.23",height:"4"}}),s("rect",{attrs:{x:"34.97",y:"88.71",width:"22.23",height:"4"}}),s("path",{attrs:{d:"M25.4,0h4v83.1h-.07c.41,5.12-3.7,11.2-10.33,14.6-7.7,3.9-16,2.6-18.4-2.9s1.9-13.2,9.7-17.2c5.44-2.8,11.31-3,15.1-.73Z",transform:"translate(0.06 -0.04)"}})])])},Hs=[],qs={name:"bpmIcon"},Ws=qs,zs=(s("cb53"),Object(p["a"])(Ws,$s,Hs,!1,null,"e41933a2",null)),Ks=zs.exports;r["a"].use(As["a"]);var Xs=new As["a"]({icons:{values:{custom_bpm:{component:Ks}}}});r["a"].config.productionTip=!1,new r["a"]({router:Fs,store:q,vuetify:Xs,render:function(e){return e(E)}}).$mount("#app")},"662c":function(e,t,s){"use strict";var r=s("d669"),n=s.n(r);n.a},6679:function(e,t,s){},7341:function(e,t,s){},7734:function(e,t,s){"use strict";var r=s("a7fa"),n=s.n(r);n.a},8223:function(e,t,s){"use strict";var r=s("cd43"),n=s.n(r);n.a},"8a23":function(e,t,s){},"90ba":function(e,t,s){},a7fa:function(e,t,s){},aa89:function(e,t,s){},b020:function(e,t,s){e.exports=s.p+"img/play_button.3f8fd321.png"},b058:function(e,t,s){},be94:function(e,t,s){},c568:function(e,t,s){"use strict";var r=s("4ff0"),n=s.n(r);n.a},cb53:function(e,t,s){"use strict";var r=s("be94"),n=s.n(r);n.a},cd43:function(e,t,s){},d669:function(e,t,s){},e932:function(e,t,s){"use strict";var r=s("aa89"),n=s.n(r);n.a},e933:function(e,t,s){"use strict";var r=s("31dc"),n=s.n(r);n.a}});
//# sourceMappingURL=app.6eebb9de.js.map