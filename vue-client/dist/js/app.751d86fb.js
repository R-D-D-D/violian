(function(e){function t(t){for(var r,i,a=t[0],l=t[1],c=t[2],d=0,p=[];d<a.length;d++)i=a[d],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&p.push(n[i][0]),n[i]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);u&&u(t);while(p.length)p.shift()();return o.push.apply(o,c||[]),s()}function s(){for(var e,t=0;t<o.length;t++){for(var s=o[t],r=!0,a=1;a<s.length;a++){var l=s[a];0!==n[l]&&(r=!1)}r&&(o.splice(t--,1),e=i(i.s=s[0]))}return e}var r={},n={app:0},o=[];function i(t){if(r[t])return r[t].exports;var s=r[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=e,i.c=r,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(s,r,function(t){return e[t]}.bind(null,r));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],l=a.push.bind(a);a.push=t,a=a.slice();for(var c=0;c<a.length;c++)t(a[c]);var u=l;o.push([1,"chunk-vendors"]),s()})({0:function(e,t){},"02f9":function(e,t,s){"use strict";var r=s("a729"),n=s.n(r);n.a},"034f":function(e,t,s){"use strict";var r=s("8a23"),n=s.n(r);n.a},"0374":function(e,t,s){"use strict";var r=s("7341"),n=s.n(r);n.a},"07ac9":function(e,t,s){"use strict";var r=s("165d"),n=s.n(r);n.a},"0c14":function(e,t,s){"use strict";var r=s("e9a0"),n=s.n(r);n.a},"0ffa":function(e,t,s){},1:function(e,t,s){e.exports=s("56d7")},"14d8":function(e,t,s){},"165d":function(e,t,s){},"1e3e":function(e,t,s){"use strict";var r=s("c27a"),n=s.n(r);n.a},"1f1c":function(e,t,s){},2:function(e,t){},"325b":function(e,t,s){e.exports=s.p+"img/violian_logo.84309c6b.png"},"33e9":function(e,t,s){},"359f":function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es_array_fill__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("cb29"),core_js_modules_es_array_fill__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_array_fill__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es_array_includes__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("caad"),core_js_modules_es_array_includes__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_array_includes__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_array_index_of__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("c975"),core_js_modules_es_array_index_of__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_array_index_of__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es_array_splice__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("a434"),core_js_modules_es_array_splice__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_array_splice__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es_object_keys__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("b64b"),core_js_modules_es_object_keys__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_object_keys__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es_object_to_string__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("d3b7"),core_js_modules_es_object_to_string__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es_object_to_string__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_es_regexp_exec__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("ac1f"),core_js_modules_es_regexp_exec__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_es_regexp_exec__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_es_string_includes__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("2532"),core_js_modules_es_string_includes__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_es_string_includes__WEBPACK_IMPORTED_MODULE_7__),core_js_modules_es_string_match__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("466d"),core_js_modules_es_string_match__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(core_js_modules_es_string_match__WEBPACK_IMPORTED_MODULE_8__),core_js_modules_es_string_replace__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("5319"),core_js_modules_es_string_replace__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(core_js_modules_es_string_replace__WEBPACK_IMPORTED_MODULE_9__),core_js_modules_es_string_split__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("1276"),core_js_modules_es_string_split__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(core_js_modules_es_string_split__WEBPACK_IMPORTED_MODULE_10__),core_js_modules_web_dom_collections_iterator__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("ddb0"),core_js_modules_web_dom_collections_iterator__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(core_js_modules_web_dom_collections_iterator__WEBPACK_IMPORTED_MODULE_11__);Vex.UI={};var VF=Vex.Flow;function getRandomInt(e){return Math.floor(Math.random()*Math.floor(e))}function getStyle(e,t){var s=null,r=document.getElementById(e);return r.currentStyle?s=r.currentStyle[t]:window.getComputedStyle&&(s=document.defaultView.getComputedStyle(r,null).getPropertyValue(t)),s}function getMousePositionInCanvas(e,t){var s=getStyle(e.id,"border-left-width"),r=null!=s?s.substring(0,s.indexOf(s.match(/\D/))):0,n=getStyle(e.id,"padding-left"),o=null!=n?n.substring(0,n.indexOf(n.match(/\D/))):0,i=e.getBoundingClientRect();return{x:(t.clientX-i.left-r-o)/Vex.UI.scale,y:(t.clientY-i.top-r-o)/Vex.UI.scale}}function getAbsoluteMousePositionInCanvas(e,t){var s=getStyle(e.id,"border-left-width"),r=null!=s?s.substring(0,s.indexOf(s.match(/\D/))):0,n=getStyle(e.id,"padding-left"),o=null!=n?n.substring(0,n.indexOf(n.match(/\D/))):0,i=e.getBoundingClientRect();return{x:t.clientX-i.left-r-o,y:t.clientY-i.top-r-o}}function isCursorWithinRectangle(e,t,s,r,n,o){return n>e&&n<e+s&&o>t&&o<t+r}function getFirstTickableAfterXPosition(e,t){for(var s=null,r=0;r<e.getTickables().length;r++)if(t<e.getTickables()[r].getAbsoluteX()&&(s=e.getTickables()[r]),null!=s)break;return s}function getLastTickableBeforeXPosition(e,t){for(var s=null,r=e.getTickables().length-1;r>=0;r--)if(t>e.getTickables()[r].getAbsoluteX()&&(s=e.getTickables()[r]),null!=s)break;return s}function mergeProperties(e,t){var s={};for(var r in e)s[r]=e[r];for(var r in t)s[r]=t[r];return s}function getStemDirection(e,t){var s=e.getYForLine(2);return t<s?Vex.Flow.StaveNote.STEM_DOWN:Vex.Flow.StaveNote.STEM_UP}Vex.UI.provisoryTickableStyle={shadowBlur:0,shadowColor:"gray",fillStyle:"gray",strokeStyle:"gray"},Vex.UI.highlightNoteStyle={shadowBlur:15,shadowColor:"red",fillStyle:"black",strokeStyle:"black"},Vex.UI.defaultNoteStyle={shadowBlur:0,shadowColor:"black",fillStyle:"black",strokeStyle:"black"},Vex.UI.scale=1.5,Vex.UI.Handler=function(e,t,s){this.container=s||document.getElementById(e);var r={canEdit:!0,canPlay:!0,canAddStaves:!0,canChangeNoteValue:!0,showToolbar:!0,numberOfStaves:4,lessStaveHeight:!1,canvasProperties:{id:e+"-canvas",width:.9*window.innerWidth,tabindex:1}};this.options=mergeProperties(r,t||{}),this.canvas=this.createCanvas(),this.renderer=new Vex.Flow.Renderer(this.canvas,Vex.Flow.Renderer.Backends.CANVAS),this.ctx=this.renderer.getContext(),this.staveList=this.createStaves(),this.ctx.scale(Vex.UI.scale,Vex.UI.scale),this.currentNote=null,this.currentStave=null,this.provisoryTickable=null,this.mouseListener=new Vex.UI.MouseListener(this,this.canvas,this.staveList),this.noteMenu=new Vex.UI.NoteMenu(this,this.canvas,this.ctx),this.noteMenu.init(),this.tipRenderer=new Vex.UI.TipRenderer(this.canvas),this.tipRenderer.init()},Vex.UI.Handler.prototype.numBars=4,Vex.UI.Handler.prototype.timeSignature="4/4",Vex.UI.Handler.prototype.createCanvas=function(){for(var e=document.createElement("canvas"),t=Object.keys(this.options.canvasProperties),s=0;s<t.length;s++)e[t[s]]=this.options.canvasProperties[t[s]];return this.options.lessStaveHeight?e.height=90*Vex.UI.scale:e.height=130*Math.ceil(this.options.numberOfStaves/2)*Vex.UI.scale,this.container.appendChild(e),e},Vex.UI.Handler.prototype.createStaves=function(){var e=[],t=0;this.options.lessStaveHeight&&(t=-20);for(var s=(this.canvas.width/Vex.UI.scale-20)/2,r=0;r<this.options.numberOfStaves;r++){var n={};(r+1)%2==0?(n=new Vex.Flow.Stave(10+s,t,s),t+=130):(n=new Vex.Flow.Stave(10,t,s),n.addClef("treble").addTimeSignature("4/4")),n.font={family:"sans-serif",size:12,weight:""},e.push(n),n.setContext(this.ctx),n.setTickables([])}return e},Vex.UI.Handler.prototype.init=function(){return this.redraw(),this.options.canEdit&&this.mouseListener.startListening(),this},Vex.UI.Handler.prototype.resize=function(e){var t={id:this.canvas.id,width:e,height:this.canvas.height,tabindex:1};this.options.canvasProperties=t;for(var s=document.createElement("canvas"),r=Object.keys(t),n=0;n<r.length;n++)s[r[n]]=t[r[n]];this.container.removeChild(this.container.childNodes[0]),this.container.appendChild(s),this.convas=s,this.renderer=new Vex.Flow.Renderer(this.canvas,Vex.Flow.Renderer.Backends.CANVAS),this.ctx=this.renderer.getContext(),this.staveList=this.createStaves(),this.ctx.scale(Vex.UI.scale,Vex.UI.scale),this.currentNote=null,this.currentStave=null,this.provisoryTickable=null,this.mouseListener=new Vex.UI.MouseListener(this,this.canvas,this.staveList),this.noteMenu=new Vex.UI.NoteMenu(this,this.canvas,this.ctx),this.noteMenu.init(),this.tipRenderer=new Vex.UI.TipRenderer(this.canvas),this.tipRenderer.init(),this.redraw(),this.options.canEdit&&this.mouseListener.startListening()},Vex.UI.Handler.prototype.redraw=function(e){this.ctx.clear(),this.drawStaves(),e?this.drawNotes(void 0,!0):this.drawNotes()},Vex.UI.Handler.prototype.redrawStave=function(e){var t=e.getBoundingBox(),s=this.staveList.indexOf(e);(s+1)%2==0?this.ctx.clearRect(t.getX(),t.getY(),t.getW()+15,t.getH()+5):this.ctx.clearRect(t.getX()-15,t.getY(),t.getW()+16,t.getH()),this.drawStaves(e,!0),this.drawNotes(e)},Vex.UI.Handler.prototype.drawStaves=function(e){if(e)e.draw();else for(var t=0;t<this.staveList.length;t++)this.staveList[t].draw()},Vex.UI.Handler.prototype.drawNotes=function(e,t){if(void 0===e)for(var s=0;s<this.staveList.length;s++)this.drawNotes(this.staveList[s],t);else{var r=new Vex.Flow.Voice(Vex.Flow.TIME4_4).setMode(Vex.Flow.Voice.Mode.SOFT);r.setStrict(!1),r.addTickables(e.getTickables());var n=new Vex.Flow.Formatter;0!=e.getTickables().length&&(n.joinVoices([r]),n.formatToStave([r],e),r.draw(this.ctx,e),t?this.drawBeams(e,!0):this.drawBeams(e))}},Vex.UI.Handler.prototype.drawBeams=function(e,t){(t||null==e.beams)&&(e.beams=Vex.Flow.Beam.generateBeams(e.getTickables()));for(var s=0;s<e.beams.length;s++)e.beams[s].setContext(this.ctx).draw()},Vex.UI.Handler.prototype.updateProvisoryKey=function(e){if(null==this.provisoryTickable&&(this.provisoryTickable=new Vex.Flow.StaveNote({keys:["d/4"],duration:"4"})),null!=this.currentStave){if(this.provisoryTickable instanceof Vex.Flow.StaveNote&&"r"!=this.provisoryTickable.noteType){var t=NoteMap.getNoteName(this.currentStave,e);t!=this.provisoryTickable.keys[0]&&(this.provisoryTickable=this.provisoryTickable.clone({keys:[t]}),void 0!==this.provisoryTickable&&this.provisoryTickable.setStyle(Vex.UI.provisoryTickableStyle),this.provisoryTickable.setStemDirection(getStemDirection(this.currentStave,e.y)),this.provisoryTickable.setStave(this.currentStave),this.provisoryTickable.setTickContext(new Vex.Flow.TickContext))}else;this.drawProvisoryTickable(e)}},Vex.UI.Handler.prototype.updateProvisoryDuration=function(e){var t=null;this.provisoryTickable&&(t=this.provisoryTickable.x_shift),this.provisoryTickable=this.provisoryTickable.clone({duration:e}),t&&(this.provisoryTickable.x_shift=t),this.provisoryTickable.setStave(this.currentStave||this.staveList[0]),this.provisoryTickable.setTickContext(new Vex.Flow.TickContext),this.drawProvisoryTickable()},Vex.UI.Handler.prototype.updateProvisoryType=function(e){var t=null;switch(this.provisoryTickable&&(t=this.provisoryTickable.x_shift),e){case Vex.UI.TickableType.NOTE:this.provisoryTickable=new Vex.Flow.StaveNote({keys:["d/4"],duration:"4"});break;case Vex.UI.TickableType.REST:var s="4";this.provisoryTickable&&(s=this.provisoryTickable.duration),this.provisoryTickable=new Vex.Flow.StaveNote({keys:["b/4"],duration:s+"r"});break;case Vex.UI.TickableType.BAR:this.provisoryTickable=new Vex.Flow.BarNote;break;case Vex.UI.TickableType.CLEF:this.provisoryTickable=new Vex.Flow.ClefNote("treble"),this.provisoryTickable.clefKey="treble";break}this.provisoryTickable.setStave(this.currentStave||this.staveList[0]),this.provisoryTickable.setTickContext(new Vex.Flow.TickContext),void 0!==this.provisoryTickable.setStyle&&this.provisoryTickable.setStyle(Vex.UI.provisoryTickableStyle),t&&(this.provisoryTickable.x_shift=t),this.drawProvisoryTickable()},Vex.UI.Handler.prototype.drawProvisoryTickable=function(e){if(this.provisoryTickable&&null!=this.currentStave){if(this.redrawStave(this.currentStave),void 0!==e)if(this.provisoryTickable instanceof Vex.Flow.StaveNote)this.provisoryTickable.x_shift=e.x-this.provisoryTickable.getAbsoluteX()-5;else if(this.provisoryTickable instanceof Vex.Flow.BarNote){var t=new Vex.Flow.Barline(1);t.setX(e.x),t.draw(this.currentStave)}else this.provisoryTickable.getTickContext().setX(e.x-this.currentStave.getNoteStartX()-this.provisoryTickable.render_options.stave_padding);if(null==this.currentNote){var s=this.ctx.fillStyle,r=this.ctx.strokeStyle;this.ctx.fillStyle="gray",this.ctx.strokeStyle="gray",this.provisoryTickable instanceof Vex.Flow.BarNote||this.provisoryTickable.draw(),this.ctx.fillStyle=s,this.ctx.strokeStyle=r}}},Vex.UI.Handler.prototype.openMenuForKey=function(e,t){this.mouseListener.stopListening(),this.noteMenu.setNote(this.currentNote),this.noteMenu.setKeyIndex(this.currentNote.indexOfKey(e)),this.noteMenu.open(t)},Vex.UI.Handler.prototype.noteMenuClosed=function(){this.redraw(),this.mouseListener.startListening()},Vex.UI.Handler.prototype.addAccidentalToNote=function(e,t,s){void 0!==s&&-1!=s||(s=0);var r=new Vex.Flow.Accidental(e);t.addAccidental(s,r)},Vex.UI.Handler.prototype.addDotToNote=function(e){0==e.dots&&e.addDotToAll()},Vex.UI.Handler.prototype.beamWithNextNote=function(e){var t=this.currentStave.getNextNote(e);if(null!=t){notes=[e,t],t.setStemDirection(e.getStemDirection());var s=new Vex.Flow.Beam(notes);this.currentStave.pushBeam(s)}},Vex.UI.Handler.prototype.deleteNote=function(e){for(var t=0;t<this.staveList.length;t++){var s=this.staveList[t].getNotes(),r=s.indexOf(e);r>-1&&this.staveList[t].removeTickable(e)}},Vex.UI.Handler.prototype.exportNotes=function(){for(var e=[],t=0;t<this.staveList.length;t++)for(var s=0;s<this.staveList[t].getTickables().length;s++){var r=this.staveList[t].getTickables()[s];if(r instanceof Vex.Flow.StaveNote){var n=r.duration,o=r.keys[0],i=r.dots,a=r.noteType,l=o+"/"+n;"r"==a&&(l+="r"),1==i&&(l+="d"),e.push(l)}}return e},Vex.UI.Handler.prototype.importNotes=function(notes,timeSignature){if(notes&&timeSignature){for(var tickables=[],barNum=0,barDuration=eval(timeSignature),accumDuration=0,j=0;j<this.staveList.length;j++)this.staveList[j].setTickables([]);for(var i=0;i<notes.length&&barNum<this.staveList.length;i++){var noteArr=notes[i].split("/"),dur=noteArr[2],isDot=!1,isRest=!1;dur.includes("r")&&(dur=dur.replace("r",""),isRest=!0),dur.includes("d")&&(dur=dur.replace("d",""),isDot=!0);var staveNote=new Vex.Flow.StaveNote({clef:"treble",keys:[noteArr[0]+"/"+noteArr[1]],duration:isRest?dur+"r":dur});staveNote.autoStem(),staveNote.setStyle(Vex.UI.defaultNoteStyle),staveNote.setTickContext(new Vex.Flow.TickContext),dur=1/parseInt(dur),isDot&&(dur*=1.5,staveNote.addDotToAll()),accumDuration+dur>barDuration?(this.staveList[barNum].setTickables(tickables),tickables=[],barNum++,accumDuration=dur):accumDuration+=dur,barNum<this.staveList.length&&staveNote.setStave(this.staveList[barNum]),tickables.push(staveNote)}tickables.length>0&&barNum+1<=this.options.numberOfStaves&&this.staveList[barNum].setTickables(tickables);for(var j=0;j<this.staveList.length;j++)this.drawBeams(this.staveList[j],!0);this.redraw()}},Vex.UI.Handler.prototype.notesToBars=function(notes,timeSignature){if(notes&&timeSignature){for(var tickables=[],barNum=0,barDuration=eval(timeSignature),accumDuration=0,notesInBars=[],i=0;i<notes.length;i++){var noteArr=notes[i].split("/"),dur=noteArr[2],isDot=!1;dur.includes("r")&&(dur=dur.replace("r","")),dur.includes("d")&&(dur=dur.replace("d",""),isDot=!0),dur=1/parseInt(dur),isDot&&(dur*=1.5),accumDuration+=dur,tickables.push(notes[i]),accumDuration==barDuration&&(notesInBars.push(tickables),tickables=[],barNum++,accumDuration=0)}return tickables.length>0&&barNum+1<this.options.numberOfStaves&&notesInBars.push(tickables),notesInBars}},Vex.UI.Handler.prototype.changeBars=function(e){if(e>this.numBars){for(var t=this.numBars;t<e;t++)this.staveList[t].setTickables([]),this.staveList[t].usable=!0;this.redraw()}else if(e<this.numBars){for(var s=[],r=this.timeSignature.split("/")[1]+"r",n=0;n<parseInt(this.timeSignature.split("/")[0]);n++)s.push(new Vex.Flow.StaveNote({clef:"treble",keys:["b/4"],duration:r}));for(t=e;t<this.staveList.length;t++)this.staveList[t].setTickables(s),this.staveList[t].usable=!1;this.redraw()}this.numBars=e},Vex.UI.Handler.prototype.setTimeSignature=function(e){for(var t=0;t<this.staveList.length;t++)(t+1)%2==1&&this.staveList[t].setTimeSignature(e);this.timeSignature=e,this.redraw()},Vex.UI.Handler.prototype.highlightNote=function(e){if(0==e)this.staveList[0].getTickables()[0].setHighlight(!0),this.redraw();else{var t=0,s=this.staveList[t].getTickables().length;while(e>s)e-=s,t++,s=this.staveList[t].getTickables().length;s>e&&this.staveList[t].getTickables()[e].setHighlight(!0),this.redraw()}},Vex.UI.Handler.prototype.changeNumberOfBars=function(e,t){console.log("called"),this.container.removeChild(this.container.lastElementChild);var s={numberOfStaves:e};this.options=mergeProperties(this.options,s||{}),this.canvas=this.createCanvas(),this.renderer=new Vex.Flow.Renderer(this.canvas,Vex.Flow.Renderer.Backends.CANVAS),this.ctx=this.renderer.getContext(),this.staveList=this.createStaves(),this.ctx.scale(Vex.UI.scale,Vex.UI.scale),this.currentNote=null,this.currentStave=null,this.provisoryTickable=null,this.mouseListener=new Vex.UI.MouseListener(this,this.canvas,this.staveList),this.noteMenu=new Vex.UI.NoteMenu(this,this.canvas,this.ctx),this.noteMenu.init(),this.tipRenderer=new Vex.UI.TipRenderer(this.canvas),this.tipRenderer.init(),this.init(),this.importNotes(t,this.timeSignature)},Vex.UI.NoteMenu=function(e,t,s){this.handler=e,this.canvas=t,this.ctx=s,this.note=null,this.keyIndex=null,this.panelProps=null,this.buttons=[],this.accidentals=["doubleFlat","flat","natural","sharp","doubleSharp"],this.canRender=!1,this.currentButton=null,this.buttonRenderer=new Vex.UI.NoteMenuButtonRenderer},Vex.UI.NoteMenu.prototype.init=function(){},Vex.UI.NoteMenu.prototype.setTipArea=function(){var e=5,t=5,s=5,r=10,n=this.panelProps.x+e,o=this.panelProps.bottomY-s-r,i=this.panelProps.width-e-t,a=r-s;this.handler.tipRenderer.boundingBox={x:n,y:o,width:i,height:a},this.handler.tipRenderer.backgroundColor=this.panelProps.backgroundColor},Vex.UI.NoteMenu.prototype.open=function(e){this.panelProps=this.drawMenuPanel(e),this.buttonRenderer.panel=this.panelProps,this.buttonRenderer.context=this.ctx,this.buttonRenderer.ready&&(this.drawButtons(),this.canvas.addEventListener("mouseup",this,!1),this.canvas.addEventListener("mousemove",this,!1),this.canvas.addEventListener("contextmenu",this,!1),this.setTipArea())},Vex.UI.NoteMenu.prototype.close=function(){this.buttons=[],this.currentButton=null,this.canvas.removeEventListener("mouseup",this,!1),this.canvas.removeEventListener("mousemove",this,!1),this.canvas.removeEventListener("contextmenu",this,!1),this.handler.noteMenuClosed()},Vex.UI.NoteMenu.prototype.handleEvent=function(e){switch(e.preventDefault(),e.type){case"mouseup":this.handleMouseClick(e);break;case"mousemove":this.handleMouseMove(e);break}},Vex.UI.NoteMenu.prototype.setNote=function(e){this.note=e},Vex.UI.NoteMenu.prototype.setKeyIndex=function(e){this.keyIndex=e},Vex.UI.NoteMenu.prototype.drawMenuPanel=function(e){var t=this.canvas,s=200,r=100,n=e.x+30,o=e.y,i="right";(n+s)*Vex.UI.scale>t.width&&(n=e.x-s-30,i="left"),(o+r)*Vex.UI.scale>t.height&&(o=t.height/Vex.UI.scale-r-10);var a=this.ctx;return a.beginPath(),a.rect(n,o,s,r),a.fillStyle="#ddc",a.fill(),a.lineWidth=3,a.strokeStyle="black",a.stroke(),a.beginPath(),a.moveTo(e.x,e.y),"right"==i?a.lineTo(n,o):a.lineTo(n+s,o),a.stroke(),{width:s,height:r,x:n,y:o,rightX:n+s,bottomY:o+r,backgroundColor:"#ddc",position:i}},Vex.UI.NoteMenu.prototype.drawButtons=function(){this.buttons.push(this.buttonRenderer.closeButton());for(var e=0;e<this.accidentals.length;e++)this.buttons.push(this.buttonRenderer.accidentalButton(e));this.buttons.push(this.buttonRenderer.dotButton()),this.buttons.push(this.buttonRenderer.beamButton()),this.buttons.push(this.buttonRenderer.deleteButton())},Vex.UI.NoteMenu.prototype.handleMouseClick=function(e){if(0==e.button)for(var t=getMousePositionInCanvas(this.canvas,e),s=0;s<this.buttons.length;s++){var r=this.buttons[s];if(isCursorWithinRectangle(r.props.x,r.props.y,r.props.width,r.props.height,t.x,t.y)){r.callAction(this);break}}},Vex.UI.NoteMenu.prototype.handleMouseMove=function(e){for(var t=getMousePositionInCanvas(this.canvas,e),s=0;s<this.buttons.length;s++){var r=this.buttons[s];if(isCursorWithinRectangle(r.props.x,r.props.y,r.props.width,r.props.height,t.x,t.y)){null!=this.currentButton&&this.currentButton==r||(null!=this.currentButton&&this.currentButton.highlight(this.canvas,null,this.currentButton),this.currentButton=r,this.currentButton.highlight(this.canvas,"yellow",this.currentButton),this.handler.tipRenderer.showTip(this.currentButton.props.tip));break}r.highlight(this.canvas,null,r)}},Vex.UI.NoteMenu.prototype.addDoubleFlat=function(){this.handler.addAccidentalToNote("bb",this.note,this.keyIndex),this.close()},Vex.UI.NoteMenu.prototype.addFlat=function(){this.handler.addAccidentalToNote("b",this.note,this.keyIndex),this.close()},Vex.UI.NoteMenu.prototype.addNatural=function(){this.handler.addAccidentalToNote("n",this.note,this.keyIndex),this.close()},Vex.UI.NoteMenu.prototype.addSharp=function(){this.handler.addAccidentalToNote("#",this.note,this.keyIndex),this.close()},Vex.UI.NoteMenu.prototype.addDoubleSharp=function(){this.handler.addAccidentalToNote("##",this.note,this.keyIndex),this.close()},Vex.UI.NoteMenu.prototype.addDot=function(){console.log("got here"),this.handler.addDotToNote(this.note),this.close()},Vex.UI.NoteMenu.prototype.addBeam=function(){this.handler.beamWithNextNote(this.note),this.close()},Vex.UI.NoteMenu.prototype.deleteNote=function(){this.handler.deleteNote(this.note),this.close()},Vex.UI.MouseListener=function(e,t,s){this.handler=e,this.canvas=t,this.staveList=s},Vex.UI.MouseListener.prototype.handleEvent=function(e){switch(e.preventDefault(),e.type){case"mouseup":this.handleMouseClick(e);break;case"mousemove":this.handleMouseOver(e);break;case"wheel":this.handleMouseWheel(e);break;case"contextmenu":this.handleRightMouseClick(e);break;case"mouseleave":this.handleMouseLeave(e);break}},Vex.UI.MouseListener.prototype.startListening=function(){this.canvas.addEventListener("mouseup",this,!1),this.canvas.addEventListener("mousemove",this,!1),this.canvas.addEventListener("wheel",this,!1),this.canvas.addEventListener("contextmenu",this,!1),this.canvas.addEventListener("mouseleave",this,!1)},Vex.UI.MouseListener.prototype.stopListening=function(){this.canvas.removeEventListener("mouseup",this,!1),this.canvas.removeEventListener("mousemove",this,!1),this.canvas.removeEventListener("wheel",this,!1),this.canvas.removeEventListener("contextmenu",this,!1),this.canvas.removeEventListener("mouseleave",this,!1)},Vex.UI.MouseListener.prototype.handleMouseLeave=function(e){this.handler.redraw()},Vex.UI.MouseListener.prototype.handleMouseOver=function(e){var t=getMousePositionInCanvas(this.canvas,e),s=r(this.staveList,t);function r(e,t){for(var s=0;s<e.length;s++){var r=e[s].getBoundingBox();if(isCursorWithinRectangle(r.getX(),r.getY(),r.getW(),r.getH(),t.x,t.y)&&e[s].usable)return e[s]}return null}function n(e,t){var s=[];null!=e&&(s=e.getTickables());for(var r=0;r<s.length;r++)if(s[r]instanceof Vex.Flow.StaveNote){void 0!==s[r].setHighlight&&s[r].setHighlight(!1);var n=s[r].getBoundingBox(),o=e.getBoundingBox();if(isCursorWithinRectangle(n.getX(),o.getY(),n.getW(),o.getH(),t.x,t.y))return s[r]}return null}s&&this.handler.currentStave&&s!=this.handler.currentStave&&this.handler.redraw(),this.handler.currentStave=s,this.handler.currentNote=n(this.handler.currentStave,t),this.handler.updateProvisoryKey(t),null!=this.handler.currentNote&&(this.handler.currentNote.setHighlight(!0),this.handler.redraw())},Vex.UI.MouseListener.prototype.handleMouseClick=function(e){switch(e.button){case 0:this.handleLeftMouseClick(e);break;case 1:this.handleMiddleMouseClick(e);break;case 2:break;default:alert("You have a strange Mouse!")}},Vex.UI.MouseListener.prototype.handleMouseWheel=function(e){var t=Math.max(-1,Math.min(1,e.wheelDelta||e.deltaY));if(null!=this.handler.currentNote){var s=this.handler.currentNote.duration,r=void 0!==Vex.Flow.durationAliases[s];r&&(s=Vex.Flow.durationAliases[s]),t>0?s*=2:s/=2,s<1&&(s=1),s=""+s;var n=this.handler.currentNote.clone({duration:s});this.handler.currentStave.replaceTickable(this.handler.currentNote,n),this.handler.currentNote=n,this.handler.currentNote.setHighlight(!0),this.handler.redraw()}else if(null!=this.handler.provisoryTickable)if(this.handler.provisoryTickable instanceof Vex.Flow.StaveNote){s=this.handler.provisoryTickable.duration,r=void 0!==Vex.Flow.durationAliases[s];r&&(s=Vex.Flow.durationAliases[s]),t>0?s*=2:s/=2,s<1&&(s=1),s=""+s,this.handler.updateProvisoryDuration(s)}else if(this.handler.provisoryTickable instanceof Vex.Flow.BarNote){var o=(this.handler.provisoryTickable.type+5+t)%6+1;this.handler.provisoryTickable.setType(o),this.handler.drawProvisoryTickable()}else if(this.handler.provisoryTickable instanceof Vex.Flow.ClefNote){switch(this.handler.provisoryTickable.clefKey){case"treble":this.handler.provisoryTickable.clefKey="bass",this.handler.provisoryTickable.setClef("bass");break;case"bass":this.handler.provisoryTickable.clefKey="treble",this.handler.provisoryTickable.setClef("treble")}this.handler.drawProvisoryTickable()}},Vex.UI.MouseListener.prototype.handleLeftMouseClick=function(e){if(null!=this.handler.currentStave&&this.handler.currentStave.usable){var t=getMousePositionInCanvas(this.canvas,e);if(null==this.handler.currentNote){var s=getLastTickableBeforeXPosition(this.handler.currentStave,t.x),r=getFirstTickableAfterXPosition(this.handler.currentStave,t.x),n=this.handler.provisoryTickable.clone();this.handler.currentStave.insertTickableBetween(n,s,r),this.handler.redraw(!0)}else{var o=NoteMap.getNoteName(this.handler.currentStave,t),i=this.handler.currentNote.indexOfKey(o);if(-1==i){var a=this.handler.currentNote.keys;a.push(o);var l=this.handler.currentNote;n=l.clone({keys:a});this.handler.currentStave.replaceTickable(l,n),this.handler.currentNote=n,this.handler.redraw()}}}},Vex.UI.MouseListener.prototype.handleMiddleMouseClick=function(e){var t=this.handler.provisoryTickable,s=null;t instanceof Vex.Flow.StaveNote?s="n"==t.noteType?Vex.UI.TickableType.REST:Vex.UI.TickableType.BAR:t instanceof Vex.Flow.BarNote&&(s=Vex.UI.TickableType.NOTE),this.handler.updateProvisoryType(s)},Vex.UI.MouseListener.prototype.handleRightMouseClick=function(e){if(null!=this.handler.currentStave&&null!=this.handler.currentNote){var t=getMousePositionInCanvas(this.canvas,e),s=NoteMap.getNoteName(this.handler.currentStave,t);this.handler.openMenuForKey(s,t)}},Vex.Flow.Stave.prototype.tickables=[],Vex.Flow.Stave.prototype.beams=[],Vex.Flow.Stave.prototype.usable=!0,Vex.Flow.Stave.prototype.setTickables=function(e){this.tickables=e},Vex.Flow.Stave.prototype.getTickables=function(){return this.tickables},Vex.Flow.Stave.prototype.getNotes=function(){for(var e=[],t=0;t<this.tickables.length;t++){var s=this.tickables[t];s instanceof Vex.Flow.StaveNote&&e.push(s)}return e},Vex.Flow.Stave.prototype.insertTickableBetween=function(e,t,s){if(e instanceof Vex.Flow.ClefNote){if(this.getClefModifierIndex()<0)return void this.addClef(e.clefKey);if(null==t)return void this.replaceClef(e.clefKey);if(0==this.getNotes().length)return}else if(e instanceof Vex.Flow.BarNote){if(null==s)return void this.setEndBarType(e.type);if(0==this.getNotes().length)return}if(null==s)this.pushTickable(e);else{var r=this.tickables.indexOf(s);this.tickables.splice(r,0,e)}},Vex.Flow.Stave.prototype.getClefModifierIndex=function(){for(var e=0;e<this.modifiers.length;e++){var t=this.modifiers[e];if(t instanceof Vex.Flow.Clef)return e}return-1},Vex.Flow.Stave.prototype.replaceClef=function(e){var t=this.start_x;this.clef=e;new Vex.Flow.Clef(e);this.modifiers.splice(this.getClefModifierIndex(),1),this.glyphs=[],this.addClef(e),this.start_x=t},Vex.Flow.Stave.prototype.getPreviousTickable=function(e){var t=this.tickables.indexOf(e);return 0==t?null:this.tickables[t-1]},Vex.Flow.Stave.prototype.getNextTickable=function(e){var t=this.tickables.indexOf(e);return t==this.tickables.length-1?null:this.tickables[t+1]},Vex.Flow.Stave.prototype.getNextNote=function(e){var t=this.tickables.indexOf(e);while(t<this.tickables.length)if(t++,this.tickables[t]instanceof Vex.Flow.StaveNote)return this.tickables[t];return null},Vex.Flow.Stave.prototype.replaceTickable=function(e,t){if(null!=e.beam){var s=e.beam,r=s.tickables.indexOf(e);s.notes[r]=t}r=this.tickables.indexOf(e);this.tickables[r]=t},Vex.Flow.Stave.prototype.removeTickable=function(e){this.tickables.splice(this.tickables.indexOf(e),1)},Vex.Flow.Stave.prototype.pushTickable=function(e){this.tickables.push(e)},Vex.Flow.Stave.prototype.beams=[],Vex.Flow.Stave.prototype.setBeams=function(e){this.beams=e},Vex.Flow.Stave.prototype.getBeams=function(){return this.beams},Vex.Flow.Stave.prototype.pushBeam=function(e){this.beams.push(e)},Vex.Flow.StaveNote.prototype.indexOfKey=function(e){return this.keys.indexOf(e)},Vex.Flow.StaveNote.prototype.letter="R",Vex.Flow.StaveNote.prototype.getPlayEvents=function(e){for(var t=[],s=0;s<this.keys.length;s++)t.push(MIDI.keyToNote[this.keys[s].replace("/","")]);for(s=0;s<t.length;s++)t[s]+=Vex.UI.ClefOffsets[e.clef];var r=e.defaultTime/this.duration;for(s=0;s<this.modifiers.length;s++){var n=this.modifiers[s];if(n instanceof Vex.Flow.Accidental){var o;switch(n.type){case"bb":o=-2;break;case"b":o=-1;break;case"n":o=0;break;case"#":o=1;break;case"##":o=2;break}t[n.index]+=o}else n instanceof Vex.Flow.Dot&&(r*=1.5)}var i=[];return i.push({type:"channel",channel:0,subtype:1==t.length?"noteOn":"chordOn",noteNumber:1==t.length?t[0]:t,velocity:127,queuedTime:e.delay,note:this}),i.push({type:"channel",channel:0,subtype:1==t.length?"noteOff":"chordOff",noteNumber:1==t.length?t[0]:t,queuedTime:e.delay+r,note:this}),e.delay=e.delay+r,i},Vex.Flow.StaveNote.prototype.clone=function(e){var t={keys:this.keys,stem_direction:this.getStemDirection(),duration:this.duration,noteType:this.noteType},s=mergeProperties(t,e);s.duration=s.duration+s.noteType;var r=new Vex.Flow.StaveNote(s);r.setStyle(this.note_heads[0].style),null!=this.modifierContext&&null!=this.getDots()&&r.addDotToAll(),r.beam=this.beam;for(var n=0;n<this.modifiers.length;n++)this.modifiers[0]instanceof Vex.Flow.Accidental&&r.addAccidental(this.modifiers[n].index,new Vex.Flow.Accidental(this.modifiers[n].type));return r},Vex.Flow.StaveNote.prototype.setHighlight=function(e){e?this.setStyle(Vex.UI.highlightNoteStyle):this.setStyle(Vex.UI.defaultNoteStyle)},Vex.Flow.StaveNote.prototype.change=function(e){var t=new Array;for(var s in this.keys){var r=this.keys[s].split("/");r[0]=r[0].toUpperCase();var n=r[0].substring(0,1),o=r[0].substring(1),i=parseInt(r[1]),a=0;for(var l in NoteMap.noteMap)if(NoteMap.noteMap[l]==n){a=l;break}if("UP"==e)a++;else if("DOWN"==e)a--;else if("SHARP"==e){switch(o){case"":case null:case void 0:o="#";break;case"#":o="##";break}alert(o)}a==NoteMap.noteMap.length?(a=0,i++):a<0&&(a=NoteMap.noteMap.length-1,i--),n=NoteMap.noteMap[a],t.push(n+o+"/"+i)}var c=this.duration,u=this.noteType;if("PAUSE"==e){"n"==u?u="r":"r"==u&&(u="n"),c=Vex.Flow.parseNoteDurationString(this.duration);for(var d="",p=0;p<c.dots;p++)d+="d";c=c.duration+d+u}return this.clone({keys:t,duration:c})},Vex.Flow.StaveNote.prototype.drawFlag=function(){if(!this.context)throw new Vex.RERR("NoCanvasContext","Can't draw without a canvas context.");var e=this.context,t=this.getGlyph(),s=null===this.beam,r=this.getNoteHeadBounds(),n=this.getNoteHeadBeginX(),o=this.getNoteHeadEndX();if(t.flag&&s){var i,a,l=this.stem.getHeight();this.getStemDirection()===Vex.Flow.Stem.DOWN?(i=n,a=r.y_top-l,t.code_flag_downstem):(i=o,a=r.y_bottom-l,t.code_flag_upstem);var c=e.fillStyle;e.fillStyle=this.note_heads[0].style.fillStyle,e.openGroup("flag",null,{pointerBBox:!0}),this.applyStyle(e,this.getFlagStyle()||!1),this.flag.render(e,i,a),this.restoreStyle(e,this.getFlagStyle()||!1),e.closeGroup(),e.fillStyle=c}},Vex.Flow.Dot.prototype.draw=function(){if(!this.context)throw new Vex.RERR("NoContext","Can't draw dot without a context.");if(!this.note||null==this.index)throw new Vex.RERR("NoAttachedNote","Can't draw dot without a note and index.");this.note.stave.options.spacing_between_lines_px;var e=this.note.getModifierStartXY(this.position,this.index);"tabnotes"===this.note.getCategory()&&(e.y=this.note.getStemExtents().baseY);var t=e.x+this.x_shift+this.width-this.radius,s=e.y+this.y_shift,r=this.context;r.beginPath(),r.arc(t,s,this.radius,0,2*Math.PI,!1),r.fill()},Vex.Flow.BarNote.prototype.clone=function(){var e=new Vex.Flow.BarNote;return e.setType(this.getType()),e.setStave(this.getStave()),e.setTickContext(this.getTickContext()),e},Vex.Flow.BarNote.prototype.getPlayEvents=function(e,t){var s=[];function r(){e.beginRepeatIndex=t.length+s.length}function n(){for(var r=e.beginRepeatIndex||0;r<t.length;r++)s.push(t[r])}switch(this.type){case Vex.Flow.Barline.type.REPEAT_BEGIN:r();break;case Vex.Flow.Barline.type.REPEAT_END:n();break;case Vex.Flow.Barline.type.REPEAT_BOTH:n(),r();break}return s},Vex.Flow.ClefNote.prototype.clone=function(){var e=new Vex.Flow.ClefNote(this.clefKey);return e.clefKey=this.clefKey,e.setTickContext(new Vex.Flow.TickContext),e.getTickContext().setX(this.getTickContext().getX()),e},Vex.Flow.ClefNote.prototype.getPlayEvents=function(e){return e.clef=this.clefKey,[]},Vex.UI.NoteMap=function(){this.noteMap=["C","D","E","F","G","A","B"]},Vex.UI.NoteMap.prototype.getNoteName=function(e,t){var s=t.y-e.getBoundingBox().getY(),r=Math.round(s/(e.options.spacing_between_lines_px/2));return this.toNoteName(r,e)},Vex.UI.NoteMap.prototype.toNoteName=function(e,t){var s=this.getBaseNote(t),r=this.noteMap.indexOf(s.note),n=(r-e)%7;while(n<0)n+=7;var o=s.octave-Math.floor(e/7);return 5!=n&&6!=n||o--,this.noteMap[n]+"/"+o},Vex.UI.NoteMap.prototype.getBaseNote=function(e){return{note:"G",octave:6}};var NoteMap=new Vex.UI.NoteMap;Vex.UI.TipRenderer=function(e){this.canvas=e,this.color=null,this.fontSize=null,this.fontName=null,this.style=null,this.context=null,this.lineWidth=null,this.textAlign=null,this.textBaseline=null,this.boundingBox=null,this.showingTip=null,this.backgroundColor=null},Vex.UI.TipRenderer.prototype.init=function(){this.textAlign="left",this.textBaseline="middle",this.color="black",this.fontName="Calibri",this.lineWidth=1,this.style="normal",this.fontSize=10,this.boundingBox={x:0,y:0,width:200,height:20},this.context=this.canvas.getContext("2d"),this.showingTip=!1,this.backgroundColor="white"},Vex.UI.TipRenderer.prototype.showTip=function(e){this.showingTip&&this.hideTip();var t=this.style+" "+this.fontSize+"pt "+this.fontName;this.context.font=t,this.context.fillStyle=this.color,this.context.textAlign=this.textAlign,this.context.lineWidth=this.lineWidth,this.context.textBaseline=this.textBaseline,this.context.fillText(e,this.boundingBox.x,this.boundingBox.y),this.showingTip=!0},Vex.UI.TipRenderer.prototype.hideTip=function(){this.context.beginPath(),this.context.rect(this.boundingBox.x,this.boundingBox.y-5,this.boundingBox.width,this.boundingBox.height+10),this.context.fillStyle=this.backgroundColor,this.context.fill(),this.showingTip=!1},Vex.UI.NoteMenuButtonRenderer=function(e,t){this.ready=!1;var s=this;this.menuButtonsImg=new Image,this.menuButtonsImg.src="https://cdn.jsdelivr.net/gh/R-D-D-D/Ground-Zero/web_frontend/src/resources/noteMenuButtons.gif",this.menuButtonsImg.onload=function(){s.ready=!0}},Vex.UI.NoteMenuButtonRenderer.prototype.closeButton=function(){var e=this.panel,t=this.context,s=5,r=4,n=15,o=e.rightX-n-s,i=e.y+s;return t.beginPath(),t.rect(o,i,n,n),t.fillStyle="red",t.fill(),t.beginPath(),t.lineWidth=3,t.moveTo(o+r,i+r),t.lineTo(o+n-r,i+n-r),t.moveTo(o+r,i+n-r),t.lineTo(o+n-r,i+r),t.strokeStyle="white",t.stroke(),new Vex.UI.Button({backgroundColor:"red",width:n,height:n,x:o,y:i,rightX:o+n,bottomY:i+n,name:"closeButton",action:"close",tip:"Close the menu"})},Vex.UI.NoteMenuButtonRenderer.prototype.closeButton=function(){var e=this.panel,t=this.context,s=5,r=4,n=15,o=e.rightX-n-s,i=e.y+s;return t.beginPath(),t.rect(o,i,n,n),t.fillStyle="red",t.fill(),t.beginPath(),t.lineWidth=3,t.moveTo(o+r,i+r),t.lineTo(o+n-r,i+n-r),t.moveTo(o+r,i+n-r),t.lineTo(o+n-r,i+r),t.strokeStyle="white",t.stroke(),new Vex.UI.Button({backgroundColor:"red",width:n,height:n,x:o,y:i,rightX:o+n,bottomY:i+n,name:"closeButton",action:"close",tip:"Close the menu"})},Vex.UI.NoteMenuButtonRenderer.prototype.accidentalButton=function(e){var t=this.panel,s=this.context,r=this.menuButtonsImg,n=[400,100,200,0,300],o=["addDoubleFlat","addFlat","addNatural","addSharp","addDoubleSharp"],i=["Add double flat to key","Add flat to key","Add natural to key","Add sharp to key","Add double sharp to key"],a=10,l=5,c=10,u=n[e],d=0,p=100,h=100,v=25,m=v,f=t.x+a+e*(l+v),g=t.y+c;return s.drawImage(r,u,d,p,h,f,g,v,m),new Vex.UI.Button({backgroundColor:"white",x:f,y:g,rightX:f+v,bottomY:g+m,width:v,height:m,action:o[e],tip:i[e]})},Vex.UI.NoteMenuButtonRenderer.prototype.dotButton=function(){var e=this.panel,t=this.context,s=this.menuButtonsImg,r=700,n=10,o=10,i=r,a=0,l=100,c=100,u=25,d=u,p=e.x+n,h=e.y+2*o+d;return t.drawImage(s,i,a,l,c,p,h,u,d),new Vex.UI.Button({backgroundColor:"white",x:p,y:h,rightX:p+u,bottomY:h+d,width:u,height:d,action:"addDot",tip:"Add dot to key"})},Vex.UI.NoteMenuButtonRenderer.prototype.beamButton=function(){var e=this.panel,t=this.context,s=this.menuButtonsImg,r=500,n=10,o=5,i=10,a=r,l=0,c=100,u=100,d=25,p=d,h=e.x+n+(o+d),v=e.y+2*i+p;return t.drawImage(s,a,l,c,u,h,v,d,p),new Vex.UI.Button({backgroundColor:"white",x:h,y:v,rightX:h+d,bottomY:v+p,width:d,height:p,action:"addBeam",tip:"Beam with next note"})},Vex.UI.NoteMenuButtonRenderer.prototype.deleteButton=function(){var e=this.panel,t=this.context,s=this.menuButtonsImg,r=800,n=10,o=5,i=10,a=r,l=0,c=100,u=100,d=25,p=d,h=e.x+n+3*(o+d),v=e.y+2*i+p;return t.drawImage(s,a,l,c,u,h,v,d,p),new Vex.UI.Button({backgroundColor:"white",x:h,y:v,rightX:h+d,bottomY:v+p,width:d,height:p,action:"deleteNote",tip:"Remove key"})},Vex.UI.NoteMenuButtonRenderer.prototype.tieButton=function(){var e=this.panel,t=this.context,s=this.menuButtonsImg,r=600,n=10,o=5,i=10,a=r,l=0,c=100,u=100,d=25,p=d,h=e.x+n+2*(o+d),v=e.y+2*i+p;return t.drawImage(s,a,l,c,u,h,v,d,p),new Vex.UI.Button({backgroundColor:"white",x:h,y:v,rightX:h+d,bottomY:v+p,width:d,height:p,action:"addTie",tip:"Tie with next note"})},Vex.UI.Button=function(e){this.props=e},Vex.UI.Button.prototype.highlight=function(e,t,s){null==t&&(t=s.props.backgroundColor);var r=4,n=e.getContext("2d");n.beginPath(),n.lineWidth=r,n.rect(s.props.x,s.props.y,s.props.width,s.props.height),n.strokeStyle=t,n.stroke()},Vex.UI.Button.prototype.showTip=function(){},Vex.UI.Button.prototype.callAction=function(e){e[this.props.action]()},Vex.UI.TickableType={NOTE:"note",REST:"rest",BAR:"bar",CLEF:"clef"},__webpack_exports__["a"]=Vex.UI},"3eaa":function(e,t,s){},"47d5":function(e,t,s){"use strict";var r=s("0ffa"),n=s.n(r);n.a},"56d7":function(e,t,s){"use strict";s.r(t);s("e260"),s("e6cf"),s("cca6"),s("a79d");var r=s("2b0e"),n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-app",{attrs:{id:"app"}},[s("page-header"),s("v-main",[s("router-view")],1)],1)},o=[],i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("v-app-bar",{attrs:{light:"",app:"",absolute:"",color:"white","elevate-on-scroll":""}},[r("v-app-bar-nav-icon",{on:{click:function(t){e.drawer=!0}}}),r("router-link",{staticClass:"pl-3",attrs:{id:"logo",to:"/"}},[r("img",{attrs:{id:"logo-img",src:s("325b"),height:"46"}})]),r("v-spacer"),e.$store.state.isUserLoggedIn?r("v-toolbar-items",[r("v-btn",{attrs:{depressed:"",to:"/course/index",color:"white"}},[e._v("My Courses")]),r("v-btn",{staticStyle:{position:"relative"},attrs:{depressed:"",to:"/courses/threads/index",color:"white"}},[e._v("Notifications"),r("div",{attrs:{id:"notification"}},[e._v(e._s(e.notifications))])]),r("v-btn",{attrs:{depressed:"",color:"white"},on:{click:e.logout}},[e._v("Log Out")])],1):r("v-toolbar-items",[r("v-btn",{attrs:{depressed:"",to:"/register",color:"white"}},[e._v("Register")]),r("v-btn",{attrs:{depressed:"",to:"/login",color:"white"}},[e._v("Log In")])],1)],1),r("v-navigation-drawer",{attrs:{absolute:"",temporary:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[e.$store.state.isUserLoggedIn?r("v-list",{attrs:{nav:"",dense:""}},[r("v-list-item-group",{attrs:{"active-class":"text--accent-4"}},[r("v-list-item",{attrs:{to:"/"}},[r("v-list-item-icon",[r("v-icon",[e._v("mdi-home")])],1),r("v-list-item-title",[e._v("Home")])],1),e.$store.state.user.isStudent?r("v-list-item",{attrs:{to:"/student"}},[r("v-list-item-icon",[r("v-icon",[e._v("mdi-playlist-music")])],1),r("v-list-item-title",[e._v("My Courses")])],1):e._e(),e.$store.state.user.isTutor?r("v-list-item",{attrs:{to:"/course/index"}},[r("v-list-item-icon",[r("v-icon",[e._v("mdi-notebook-outline")])],1),r("v-list-item-title",[e._v("My Courses")])],1):e._e(),e.$store.state.isUserLoggedIn?r("v-list-item",{on:{click:e.logout}},[r("v-list-item-icon",[r("v-icon",[e._v("mdi-logout")])],1),r("v-list-item-title",[e._v("Log Out")])],1):e._e()],1)],1):r("v-list",{attrs:{nav:"",dense:""}},[r("v-list-item-group",{attrs:{"active-class":"text--accent-4"}},[r("v-list-item",{attrs:{to:"/"}},[r("v-list-item-icon",[r("v-icon",[e._v("mdi-home")])],1),r("v-list-item-title",[e._v("Home")])],1),e.$store.state.isUserLoggedIn?e._e():r("v-list-item",{attrs:{to:"/register"}},[r("v-list-item-icon",[r("v-icon",[e._v("mdi-account")])],1),r("v-list-item-title",[e._v("Register")])],1),e.$store.state.isUserLoggedIn?e._e():r("v-list-item",{attrs:{to:"/login"}},[r("v-list-item-icon",[r("v-icon",[e._v("mdi-account")])],1),r("v-list-item-title",[e._v("Log In")])],1)],1)],1)],1)],1)},a=[],l=s("5530"),c=s("2f62"),u={name:"Header",data:function(){return{drawer:!1,messages:0}},methods:{logout:function(){this.$store.dispatch("setToken",null),this.$store.dispatch("setUser",null),this.$router.push("/")}},computed:Object(l["a"])({},Object(c["b"])(["user","notifications"])),mounted:function(){}},d=u,p=(s("47d5"),s("2877")),h=s("6544"),v=s.n(h),m=s("40dc"),f=s("5bc1"),g=s("8336"),b=s("132d"),x=s("8860"),w=s("da13"),_=s("1baa"),y=s("34c3"),C=s("5d23"),k=s("f774"),S=s("2fa4"),V=s("2a7f"),T=Object(p["a"])(d,i,a,!1,null,"1a2c0180",null),O=T.exports;v()(T,{VAppBar:m["a"],VAppBarNavIcon:f["a"],VBtn:g["a"],VIcon:b["a"],VList:x["a"],VListItem:w["a"],VListItemGroup:_["a"],VListItemIcon:y["a"],VListItemTitle:C["b"],VNavigationDrawer:k["a"],VSpacer:S["a"],VToolbarItems:V["a"]});var P={name:"App",components:{"page-header":O},data:function(){return{}}},I=P,B=(s("034f"),s("7496")),L=s("f6c4"),E=Object(p["a"])(I,n,o,!1,null,null,null),R=E.exports;v()(E,{VApp:B["a"],VMain:L["a"]});s("b0c0");var M=s("8c4f"),N=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("v-container",[s("v-row",{staticClass:"mt-10"},[s("v-col",{staticClass:"text-left",attrs:{cols:"8"}},[s("h1",[e._v("Welcome to Music Academy")])])],1),s("v-row",{staticClass:"mb-12"},[s("v-col",{attrs:{cols:"8"}},[s("v-autocomplete",{attrs:{items:e.items,loading:e.isLoading,"search-input":e.search,"cache-items":"",multiple:"",clearable:"","hide-details":"","hide-selected":"","item-text":"name","item-value":"symbol",label:"Search for a course...",solo:""},on:{"update:searchInput":function(t){e.search=t},"update:search-input":function(t){e.search=t}},scopedSlots:e._u([{key:"no-data",fn:function(){return[s("v-list-item",[s("v-list-item-title",[e._v("Search for your favorite "),s("strong",[e._v("Course")])])],1)]},proxy:!0},{key:"item",fn:function(t){var r=t.item;return[s("v-list-item",{on:{click:function(t){return e.go_to_course(t,r.id)}}},[s("v-list-item-content",[e._v(e._s(r.name))])],1)]}}]),model:{value:e.model,callback:function(t){e.model=t},expression:"model"}})],1)],1),s("v-divider"),s("v-row",{staticClass:"mt-10"},[s("v-col",{staticClass:"text-left",attrs:{cols:"12"}},[s("h2",[e._v("Popular Courses")])]),e._l(e.courses,(function(t){return s("v-col",{attrs:{sm:"6",md:"4",lg:"3"}},[s("v-card",{staticClass:"mx-auto"},[s("v-img",{staticClass:"white--text align-end",attrs:{height:"200px",src:t.coverPhotoUrl,gradient:"to top right, rgba(0,0,0,.5), rgba(0,0,0,.5)"}},[s("v-card-title",{staticStyle:{"text-shadow":"1px 1px 2px #000000"}},[e._v(e._s(t.name))])],1),s("v-card-subtitle",{staticClass:"pb-0 text-left"},[e._v("Drum")]),s("v-card-text",{staticClass:"text-left text--primary pb-0"},[s("div",[e._v("Whitehaven Beach")])]),s("v-card-actions",[s("v-btn",{attrs:{color:"indigo",text:""},on:{click:function(s){return e.go_to_course(s,t.id)}}},[e._v("Find out more")])],1)],1)],1)}))],2)],1)],1)},U=[],D=(s("96cf"),s("1da1")),j=s("bc3a"),A=s.n(j),F=s("0e44"),$={subscribe:function(e){return q().post("subscribe/new",e)},getSubscriptionInfoOfStudent:function(e){return q().get("subscribe/get/student?uid=".concat(e))},getSubscriptionInfoOfCourse:function(e){return q().get("subscribe/get/course?cid=".concat(e))},isSubscribed:function(e){return q().get("subscribe/get/is-subscribed?cid=".concat(e))},isOwned:function(e){return q().get("subscribe/get/is-owned?cid=".concat(e))}};r["a"].use(c["a"]);var H=new c["a"].Store({strict:!0,plugins:[Object(F["a"])()],state:{token:null,user:null,isUserLoggedIn:!1,notifications:null},mutations:{resetState:function(e){e.token=null,e.notifications=null,e.user=null,e.isUserLoggedIn=!1},setToken:function(e,t){e.token=t},setUser:function(e,t){e.user=t},setNotifications:function(e,t){e.notifications=t},logIn:function(e){e.isUserLoggedIn=!0},logOut:function(e){e.isUserLoggedIn=!1}},actions:{setToken:function(e,t){var s=e.commit;s("setToken",t),t?s("logIn"):(s("logOut"),s("resetState"))},setUser:function(e,t){var s=e.commit;s("setUser",t)},setNotifications:function(e,t){var s=e.commit;s("setNotifications",t)},subscribe:function(e,t){return Object(D["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,$.subscribe(t);case 3:e.dispatch("getCoursesForStudent",{id:t.studentId}),s.next=9;break;case 6:s.prev=6,s.t0=s["catch"](0),console.log(s.t0);case 9:case"end":return s.stop()}}),s,null,[[0,6]])})))()}}}),q=function(){return A.a.create({baseURL:"/api/",headers:{Authorization:"Bearer ".concat(H.state.token)}})},W={create:function(e){return q().post("course/new",e)},list:function(e){return q().get("course/list?uid=".concat(e))},listAll:function(e){return e?q().get("course/listall?search=".concat(e)):q().get("course/listall")},show:function(e){return q().get("course/show?cid=".concat(e))},edit:function(e){var t=q();return t.defaults.headers.put["Content-Type"]="multipart/form-data",t.put("course/edit",e)},delete:function(e){return q().delete("course/del?cid=".concat(e))}},X=s("2ef0"),z=s.n(X),K={name:"Home",data:function(){return{isLoading:!1,items:[],model:null,search:null,courses:[]}},watch:{model:function(e){console.log(e)},search:z.a.debounce(function(){var e=Object(D["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""==t||void 0==t){e.next=13;break}return this.isLoading=!0,e.prev=2,e.next=5,W.listAll(t);case 5:this.items=e.sent.data.courses,this.isLoading=!1,e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](2),this.isLoading=!1,console.log(e.t0);case 13:case"end":return e.stop()}}),e,this,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),700)},computed:Object(c["b"])(["user","allCourses"]),methods:{go_to_course:function(e,t){this.$router.push({name:"showcourse",params:{course_id:t}})}},mounted:function(){var e=Object(D["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,W.listAll();case 2:this.courses=e.sent.data.courses;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},Y=K,G=s("c6a6"),Z=s("b0af"),Q=s("99d9"),J=s("62ad"),ee=s("a523"),te=s("ce7e"),se=s("adda"),re=s("0fd9"),ne=Object(p["a"])(Y,N,U,!1,null,"4bb65f0e",null),oe=ne.exports;v()(ne,{VAutocomplete:G["a"],VBtn:g["a"],VCard:Z["a"],VCardActions:Q["a"],VCardSubtitle:Q["b"],VCardText:Q["c"],VCardTitle:Q["d"],VCol:J["a"],VContainer:ee["a"],VDivider:te["a"],VImg:se["a"],VListItem:w["a"],VListItemContent:C["a"],VListItemTitle:C["b"],VRow:re["a"]});var ie=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"register"}},[s("panel",{attrs:{title:"Register"}},[s("v-card-text",[s("v-form",{ref:"form",staticClass:"text-center",on:{submit:function(t){return t.preventDefault(),e.register(t)}}},[s("v-text-field",{attrs:{label:"Username",name:"username","prepend-icon":"mdi-account",type:"text",rules:e.nameRules},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),s("v-text-field",{attrs:{label:"Email",name:"email","prepend-icon":"mdi-account",type:"text",rules:e.emailRules},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),s("v-text-field",{attrs:{label:"Password",name:"password","prepend-icon":"mdi-lock",type:"password",rules:e.passwordRules},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),s("v-radio-group",{attrs:{row:""},model:{value:e.role,callback:function(t){e.role=t},expression:"role"}},[s("v-radio",{attrs:{label:"Student",value:"Student",color:"indigo"}}),s("v-radio",{attrs:{label:"Tutor",value:"Tutor",color:"indigo"}})],1),s("v-spacer"),s("v-btn",{staticClass:"mt-5",attrs:{type:"submit",loading:e.loading,disabled:e.loading}},[e._v("Register")]),s("v-spacer")],1)],1),s("v-card-text",[s("div",{staticClass:"error",domProps:{innerHTML:e._s(e.error)}},[e._v(e._s(e.error))])])],1)],1)},ae=[],le=(s("4d63"),s("ac1f"),s("25f0"),{register:function(e){return q().post("register",e)},login:function(e){return q().post("login",e)}}),ce={name:"Register",data:function(){return{username:"",nameRules:[function(e){return!!e||"Username is required"},function(e){return new RegExp(/^[a-zA-Z ]{2,30}$/).test(e)||"Name must be alphanumeric characters and of length 8 - 32"}],email:"",emailRules:[function(e){return!!e||"E-mail is required"},function(e){return/.+@.+\..+/.test(e)||"E-mail must be valid"}],password:"",passwordRules:[function(e){return!!e||"Password is required"},function(e){return new RegExp("^[a-zA-Z0-9]{8,32}$").test(e)||"Password must be alphanumeric characters and of length 8 - 32"}],error:null,loading:!1,role:""}},methods:{register:function(){var e=this;return Object(D["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$refs.form.validate()){t.next=2;break}return t.abrupt("return");case 2:return e.error="",e.loading=!0,t.prev=4,t.next=7,le.register({username:e.username,email:e.email,password:e.password,role:e.role});case 7:s=t.sent,e.loading=!1,e.$store.dispatch("setToken",s.data.token),e.$store.dispatch("setUser",s.data.user),e.$router.push("/"),t.next=18;break;case 14:t.prev=14,t.t0=t["catch"](4),e.error=t.t0.response.data.error,e.loading=!1;case 18:case"end":return t.stop()}}),t,null,[[4,14]])})))()}}},ue=ce,de=s("4bd4"),pe=s("67b6"),he=s("43a6"),ve=s("8654"),me=Object(p["a"])(ue,ie,ae,!1,null,"70d8e1d6",null),fe=me.exports;v()(me,{VBtn:g["a"],VCardText:Q["c"],VForm:de["a"],VRadio:pe["a"],VRadioGroup:he["a"],VSpacer:S["a"],VTextField:ve["a"]});var ge=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"student"}},[s("panel",{attrs:{title:"All Courses"}},[s("v-list",e._l(e.allCourses,(function(t){return s("v-list-item",{key:t.id,on:{click:function(t){return e.go_to_course(t,e.tutor)}}},[s("v-list-item-content",[s("v-list-item-title",{domProps:{textContent:e._s(e.tutor.username)}})],1),s("v-list-item-avatar",[s("v-img",{attrs:{src:e.avatar}})],1)],1)})),1)],1)],1)},be=[],xe={name:"Student",data:function(){return{avatar:"https://cdn.vuetifyjs.com/images/lists/2.jpg"}},computed:Object(l["a"])({},Object(c["b"])(["user","allCourses"])),methods:{go_to_lessons:function(e,t){var s=this;return Object(D["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null!=t.lessons){e.next=3;break}return e.next=3,s.$store.dispatch("getLessonsForStudent",t);case 3:s.$router.push("/lesson/index/".concat(t.id));case 4:case"end":return e.stop()}}),e)})))()}}},we=xe,_e=s("8270"),ye=Object(p["a"])(we,ge,be,!1,null,"6802aafc",null),Ce=ye.exports;v()(ye,{VImg:se["a"],VList:x["a"],VListItem:w["a"],VListItemAvatar:_e["a"],VListItemContent:C["a"],VListItemTitle:C["b"]});var ke=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"login"}},[s("panel",{attrs:{title:"Log In"}},[s("v-card-text",[s("v-form",{ref:"form",staticClass:"text-center",on:{submit:function(t){return t.preventDefault(),e.login(t)}}},[s("v-text-field",{attrs:{label:"Email",name:"email","prepend-icon":"mdi-account",type:"text",rules:e.emailRules},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),s("v-text-field",{attrs:{id:"password",label:"Password",name:"password","prepend-icon":"mdi-lock",type:"password",rules:e.passwordRules},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),s("v-spacer"),s("v-btn",{staticClass:"mt-5",attrs:{loading:e.loading,disabled:e.loading,type:"submit"}},[e._v("Log In")]),s("v-spacer")],1)],1),s("v-card-text",[s("div",{staticClass:"error text-center",domProps:{innerHTML:e._s(e.error)}},[e._v(e._s(e.error))])])],1)],1)},Se=[],Ve=(s("13d5"),{name:"LogIn",data:function(){return{email:"",emailRules:[function(e){return!!e||"E-mail is required"},function(e){return/.+@.+\..+/.test(e)||"E-mail must be valid"}],password:"",passwordRules:[function(e){return!!e||"Password is required"}],error:null,loading:!1}},methods:{login:function(){var e=this;return Object(D["a"])(regeneratorRuntime.mark((function t(){var s,r,n,o,i,a,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$refs.form.validate()){t.next=2;break}return t.abrupt("return");case 2:return e.error="",e.loading=!0,t.prev=4,t.next=7,le.login({email:e.email,password:e.password});case 7:if(s=t.sent,e.loading=!1,e.$store.dispatch("setToken",s.data.token),e.$store.dispatch("setUser",s.data.user),!s.data.user.isStudent){t.next=20;break}return t.next=14,$.getSubscriptionInfoOfStudent(s.data.user.id);case 14:r=t.sent,n=r.data.courses,o=function(e,t){return e+t.unreadTutorPost},e.$store.dispatch("setNotifications",n.reduce(o,0)),t.next=26;break;case 20:return t.next=22,W.list(s.data.user.id);case 22:i=t.sent,a=i.data.courses,l=function(e,t){return e+t.unreadStudentPost},e.$store.dispatch("setNotifications",a.reduce(l,0));case 26:e.$router.push({name:"home"}),t.next=33;break;case 29:t.prev=29,t.t0=t["catch"](4),e.error=t.t0.response.data.error,e.loading=!1;case 33:case"end":return t.stop()}}),t,null,[[4,29]])})))()}}}),Te=Ve,Oe=Object(p["a"])(Te,ke,Se,!1,null,"22275c25",null),Pe=Oe.exports;v()(Oe,{VBtn:g["a"],VCardText:Q["c"],VForm:de["a"],VSpacer:S["a"],VTextField:ve["a"]});var Ie=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.course?r("div",{attrs:{id:"show-course",fluid:""}},[r("v-container",{attrs:{id:"course-info",fluid:""}},[r("v-row",{staticClass:"px-sm-16 mx-md-8 mx-lg-16"},[r("v-col",{attrs:{cols:"12",md:"8"}},[r("v-row",[r("v-col",{staticClass:"text-left"},[r("h1",{staticClass:"font-weight-bold",staticStyle:{"font-size":"40px","line-height":"1.2"}},[e._v(e._s(e.course.name))])])],1),r("v-row",[r("v-col",{staticClass:"pt-0"},[r("h3",[e._v(e._s(e.course.description))])])],1),r("v-row",[r("v-col",{attrs:{sm:"4",lg:"3"}},[r("v-row",[r("v-col",{staticClass:"pr-0",attrs:{sm:"4",md:"3"}},[r("v-icon",{attrs:{color:"white",size:"30"}},[e._v("mdi-guitar-acoustic")])],1),r("v-col",{staticClass:"my-auto",attrs:{sm:"8",md:"9"}},[r("p",{staticClass:"ma-0"},[e._v("Instrument: "+e._s(e.course.instrument))])])],1)],1),r("v-col",{attrs:{sm:"4",lg:"3"}},[r("v-row",[r("v-col",{staticClass:"pr-0",attrs:{sm:"4",md:"3"}},[r("v-icon",{attrs:{color:"white",size:"24"}},[e._v("mdi-earth")])],1),r("v-col",{staticClass:"my-auto",attrs:{sm:"8",md:"9"}},[r("p",{staticClass:"ma-0"},[e._v(e._s(e.course.language))])])],1)],1),r("v-col",{attrs:{sm:"4",lg:"3"}},[r("v-row",[r("v-col",{staticClass:"pr-0",attrs:{sm:"4",md:"3"}},[r("v-icon",{attrs:{color:"white",size:"24"}},[e._v("mdi-calendar-clock")])],1),r("v-col",{staticClass:"my-auto",attrs:{sm:"8",md:"9"}},[r("p",{staticClass:"ma-0"},[e._v("Last updated: "+e._s(new Date(e.course.updatedAt).toLocaleString([],{year:"numeric",month:"numeric",day:"numeric"})))])])],1)],1)],1)],1),null==e.user||e.user.isStudent&&!e.isSubscribed?r("v-col",{attrs:{cols:"12",md:"4"}},[r("v-card",[r("v-img",{staticClass:"white--text align-end",staticStyle:{cursor:"pointer"},attrs:{gradient:"to top right, rgba(0,0,0,.5), rgba(0,0,0,.5)",height:"200px",src:e.course.coverPhotoUrl},on:{click:e.playVideo}},[r("div",{staticStyle:{position:"absolute",left:"0",top:"0",width:"100%",height:"100%"}},[r("img",{staticStyle:{position:"absolute",width:"60px",left:"calc(50% - 30px)",top:"calc(50% - 30px)",height:"60px"},attrs:{id:"play-button",src:s("b020"),color:"white",size:"62"}}),r("h3",{staticClass:"text--white",staticStyle:{bottom:"12px","text-align":"center",position:"absolute",left:"0",right:"0","text-shadow":"1px 1px 2px #000000"}},[e._v("Preview this course")])])]),r("v-row",[r("v-col",{staticClass:"text-left"},[r("h1",{staticClass:"pl-5 font-weight-bold",staticStyle:{"font-size":"36px"}},[e._v("S$"+e._s(e.course.price.toFixed(2)))])])],1),r("v-row",[r("v-col",{staticClass:"text-center"},[0==e.course.price?r("v-btn",{staticStyle:{width:"90%"},attrs:{color:"#ec5252",dark:"","x-large":""},on:{click:e.subscribe}},[e._v("Enroll Now")]):r("v-btn",{staticStyle:{width:"90%"},attrs:{color:"#ec5252",dark:"","x-large":""},on:{click:e.subscribe}},[e._v("Buy Now")])],1)],1)],1)],1):e._e(),e.isSubscribed||e.isOwned?r("v-col",{staticClass:"my-auto",attrs:{cols:"12",md:"4"}},[r("v-row",[r("v-col",{staticClass:"text-center"},[r("v-btn",{staticStyle:{width:"90%"},attrs:{color:"#26A69A",dark:"","x-large":""},on:{click:function(t){return e.goToLesson(t,e.course.lessons[0])}}},[e._v("Start Learning!")])],1)],1)],1):e._e()],1)],1),e.course.learningPoints?r("v-container",{attrs:{fluid:""}},[r("v-row",{staticClass:"px-sm-16 mx-md-8 mx-lg-16"},[r("v-col",{attrs:{cols:"12"}},[r("v-sheet",{staticClass:"px-16 py-5",staticStyle:{border:"1px solid #E0E0E0"},attrs:{color:"#fbfbf8",rounded:""}},[r("v-row",[r("v-col",{staticClass:"py-0 px-0"},[r("h2",{staticClass:"py-3 pl-0",staticStyle:{color:"#3c3b37","font-size":"30px"}},[e._v("What you will learn")])])],1),r("v-row",e._l(e.course.learningPoints.split("&"),(function(t){return r("v-col",{staticClass:"py-0 px-0",attrs:{cols:"12",md:"6"}},[r("v-row",[r("v-col",{staticClass:"py-2 pr-0",attrs:{cols:"1"}},[r("v-icon",{staticClass:"d-inline mb-2",attrs:{size:"16",color:"#ec5252"}},[e._v("mdi-star")])],1),r("v-col",{staticClass:"py-2 pr-0",attrs:{cols:"10"}},[r("p",{staticClass:"d-inline mb-0 text-uppercase",staticStyle:{"line-height":"1","vertical-align":"middle"}},[e._v(e._s(t))])])],1)],1)})),1)],1)],1)],1)],1):e._e(),r("v-container",{attrs:{fluid:""}},[r("v-row",{staticClass:"px-sm-16 mx-md-8 mx-lg-16"},[r("v-col",{attrs:{cols:"12"}},[r("v-sheet",{staticClass:"px-16 py-5"},[r("h2",{staticClass:"py-3",staticStyle:{color:"#3c3b37","font-size":"30px"}},[e._v("About the course")]),r("p",[e._v(e._s(e.course.description))])])],1)],1)],1),e.course.requirements?r("v-container",{attrs:{fluid:""}},[r("v-row",{staticClass:"px-sm-16 mx-md-8 mx-lg-16"},[r("v-col",{attrs:{cols:"12"}},[r("v-sheet",{staticClass:"px-16 py-5"},[r("v-row",[r("v-col",{staticClass:"py-0 px-0"},[r("h2",{staticClass:"pl-0",staticStyle:{color:"#3c3b37","font-size":"30px"}},[e._v("Prerequisites for this Course")])])],1),e._l(e.course.requirements.split("&"),(function(t){return r("v-row",{attrs:{align:"start"}},[r("v-col",{staticClass:"py-0 px-0",attrs:{cols:"6"}},[r("v-row",[r("v-col",{staticClass:"pr-0",attrs:{cols:"1","align-self":"center"}},[r("v-icon",{staticClass:"d-inline mb-2",attrs:{size:"30",color:"#ec5252"}},[e._v("mdi-square-small")])],1),r("v-col",{staticClass:"pr-0",attrs:{cols:"10","align-self":"center"}},[r("p",{staticClass:"d-inline mb-0",staticStyle:{"line-height":"1"}},[e._v(e._s(t))])])],1)],1),r("v-col",{staticClass:"py-0 px-0",attrs:{cols:"6"}})],1)}))],2)],1)],1)],1):e._e(),e.course.targetAudiences?r("v-container",{attrs:{fluid:""}},[r("v-row",{staticClass:"px-sm-16 mx-md-8 mx-lg-16"},[r("v-col",{attrs:{cols:"12"}},[r("v-sheet",{staticClass:"px-16 py-5"},[r("v-row",[r("v-col",{staticClass:"py-0 px-0"},[r("h2",{staticClass:"pl-0",staticStyle:{color:"#3c3b37","font-size":"30px"}},[e._v("Who's suitable for the course")])])],1),e._l(e.course.targetAudiences.split("&"),(function(t){return r("v-row",{attrs:{align:"start"}},[r("v-col",{staticClass:"py-0 px-0",attrs:{cols:"6"}},[r("v-row",[r("v-col",{staticClass:"pr-0 py-0",attrs:{cols:"1","align-self":"center"}},[r("v-icon",{staticClass:"d-inline mb-2",attrs:{size:"30",color:"#ec5252"}},[e._v("mdi-square-small")])],1),r("v-col",{staticClass:"pr-0",attrs:{cols:"10","align-self":"center"}},[r("p",{staticClass:"d-inline mb-0",staticStyle:{"line-height":"1"}},[e._v(e._s(t))])])],1)],1),r("v-col",{staticClass:"py-0 px-0",attrs:{cols:"6"}})],1)}))],2)],1)],1)],1):e._e(),r("v-container",{attrs:{fluid:""}},[r("v-row",{staticClass:"px-sm-16 mx-md-8 mx-lg-16"},[r("v-col",{attrs:{cols:"12"}},[r("v-sheet",{staticClass:"px-16 py-5"},[r("v-row",[r("v-col",{staticClass:"py-0 px-0"},[r("h2",{staticClass:"pl-0 pb-2",staticStyle:{color:"#3c3b37","font-size":"30px"}},[e._v("Course Content")]),r("div",{staticStyle:{color:"#9E9E9E","font-size":"16px"}},[e._v(e._s(e.course.lessons.length)+" Lessons  "+e._s(e.timeConverted)+" of video content")])])],1),r("v-row",{attrs:{align:"start"}},[r("v-col",{staticClass:"px-0",attrs:{cols:"12"}},[r("v-card",[r("v-toolbar",{attrs:{color:"grey lighten-2",light:"",flat:""}},[r("v-toolbar-title",[e._v(e._s(e.course.name))]),r("v-spacer"),r("v-btn",{attrs:{icon:""}},[r("v-icon",[e._v("mdi-unfold-more-horizontal")])],1)],1),r("v-list",e._l(e.course.lessons,(function(t,s){return r("v-list-item",{key:t.id,attrs:{shaped:"",disabled:0!=s},on:{click:function(s){return e.goToLesson(s,t)}}},[r("v-list-item-icon",0==s?[r("v-icon",{attrs:{color:"#ec5252"}},[e._v("mdi-play")])]:[r("v-icon",{attrs:{color:"rgba(0, 0, 0, 0.38)"}},[e._v("mdi-play")])],1),r("v-list-item-content",[r("v-list-item-title",{domProps:{textContent:e._s(t.name)}})],1),r("v-spacer"),r("v-list-item-icon",[r("div",[e._v(e._s(t.duration)+" mins")])])],1)})),1)],1)],1)],1)],1)],1)],1)],1),r("v-row",{attrs:{justify:"center"}},[e.dialog?r("v-dialog",{attrs:{"max-width":"calc(100vw * 0.8)"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[r("video",{ref:"videoPlayer",attrs:{width:"100%",height:"auto",controls:"",id:"video"}},[r("source",{attrs:{src:e.course.previewVideoUrl,type:"video/mp4"}})])]):e._e()],1)],1):e._e()},Be=[],Le=(s("d81d"),s("d3b7"),s("3ca3"),s("ddb0"),s("99af"),{create:function(e){return q().post("thread/new",e)},list:function(e){return q().get("thread/list?lid=".concat(e))},show:function(e,t){return q().get("thread/show?lid=".concat(e,"&uid=").concat(t))},delete:function(e){return q().delete("thread/del?tid=".concat(e))},getUnread:function(e,t){return q().get("thread/unread?cid=".concat(e,"&uid=").concat(t))}}),Ee={name:"ShowCourse",data:function(){return{course:null,dialog:!1,error:null,tab:null,isSubscribed:!1,isOwned:!1,player:null}},computed:Object(l["a"])({timeConverted:function(){var e=this.course.duration,t=e/60,s=Math.floor(t),r=60*(t-s),n=Math.round(r);return 0==s?n+" minute(s)":s+" hour(s) and "+n+" minute(s)"}},Object(c["b"])(["user"])),watch:{dialog:function(e){if(0==e)return!1}},methods:{goToLesson:function(e,t){this.$router.push({name:"showlesson",params:{course_id:this.course.id,lesson_id:t.id,course:this.course,lesson:t}})},playVideo:function(){this.dialog=!0},subscribe:function(){var e=this;return Object(D["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!=e.course.price){t.next=12;break}if(!e.user){t.next=9;break}return t.next=4,Promise.all(e.course.lessons.map(function(){var e=Object(D["a"])(regeneratorRuntime.mark((function e(t){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Le.create({lid:t.id});case 2:return s=e.sent,s.data.thread.posts=[],t.thread=s.data.thread,e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 4:return t.next=6,e.$store.dispatch("subscribe",{studentId:e.$store.state.user.id,courseId:e.course.id});case 6:e.$router.push({name:"showlesson",params:{course_id:e.course.id,lesson_id:e.course.lessons[0].id}}),t.next=10;break;case 9:alert("Please register or login first");case 10:t.next=13;break;case 12:e.$router.push("/payment/".concat(e.course.id));case 13:case"end":return t.stop()}}),t)})))()}},mounted:function(){var e=this;return Object(D["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,W.show(e.$route.params.course_id);case 3:s=t.sent,e.course=s.data.course,t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.log(t.t0);case 10:if(!e.user){t.next=20;break}if(!e.user.isStudent){t.next=17;break}return t.next=14,$.isSubscribed(e.course.id);case 14:e.isSubscribed=t.sent.data.isSubscribed,t.next=20;break;case 17:return t.next=19,$.isOwned(e.course.id);case 19:e.isOwned=t.sent.data.isOwned;case 20:case"end":return t.stop()}}),t,null,[[0,7]])})))()}},Re=Ee,Me=(s("c07b"),s("169a")),Ne=s("8dd9"),Ue=s("71d9"),De=Object(p["a"])(Re,Ie,Be,!1,null,"5961cd82",null),je=De.exports;v()(De,{VBtn:g["a"],VCard:Z["a"],VCol:J["a"],VContainer:ee["a"],VDialog:Me["a"],VIcon:b["a"],VImg:se["a"],VList:x["a"],VListItem:w["a"],VListItemContent:C["a"],VListItemIcon:y["a"],VListItemTitle:C["b"],VRow:re["a"],VSheet:Ne["a"],VSpacer:S["a"],VToolbar:Ue["a"],VToolbarTitle:V["b"]});var Ae=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"mt-5",attrs:{id:"courses"}},[s("panel",{attrs:{title:"All Courses",md:"9"}},[e.is_student?s("v-list",e._l(e.courses,(function(t){return s("v-list-item",{key:t.id,on:{click:function(s){return e.showCourse(s,t.id,t.lessons[0].id)}}},[s("v-list-item-content",[s("v-list-item-title",{staticClass:"text-h5 py-0",domProps:{textContent:e._s(t.name)}})],1)],1)})),1):s("v-list",e._l(e.courses,(function(t){return s("v-list-item",{key:t.id},[s("v-list-item-content",{staticClass:"clickable-content mx-2 px-2",on:{click:function(s){return e.showCourse(s,t.id,t.lessons[0].id)}}},[s("v-list-item-title",{staticClass:"text-h5 py-0",domProps:{textContent:e._s(t.name)}})],1),s("v-list-item-icon",[s("v-btn",{attrs:{outlined:"",color:"indigo"},on:{click:function(s){return e.editCourse(s,t)}}},[s("v-icon",[e._v("mdi-pencil")])],1)],1),s("v-list-item-icon",[s("v-btn",{attrs:{outlined:"",color:"indigo"},on:{click:function(s){return e.deleteCourse(s,t)}}},[s("v-icon",[e._v("mdi-trash-can-outline")])],1)],1)],1)})),1)],1),e.is_student?e._e():s("v-row",{attrs:{justify:"center"}},[s("v-btn",{staticClass:"mt-5",attrs:{"x-large":"",to:"/course/new"}},[s("v-icon",{attrs:{left:"",dark:""}},[e._v("mdi-plus-thick")]),e._v("New Course")],1)],1)],1)},Fe=[],$e={show:function(e){return q().get("lesson/show?lid=".concat(e))},create:function(e){return q().post("lesson/new",e)},list:function(e){return q().get("lesson/list?cid=".concat(e))},edit:function(e){return q().put("lesson/edit",e)},delete:function(e){return q().delete("lesson/del?lid=".concat(e))}},He={data:function(){return{courses:[]}},computed:Object(l["a"])({is_student:function(){return this.user.isStudent}},Object(c["b"])(["user"])),methods:{showCourse:function(e,t,s){this.$router.push({name:"showlesson",params:{course_id:t,lesson_id:s}})},deleteCourse:function(e,t){var s=this;return Object(D["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!confirm("Are you sure?")){e.next=5;break}return e.next=3,Promise.all(t.lessons.map((function(e){return $e.delete(e.id)})));case 3:return e.next=5,W.delete(t.id);case 5:s.$router.go();case 6:case"end":return e.stop()}}),e)})))()},editCourse:function(e,t){this.$router.push("/course/edit/".concat(t.id))}},mounted:function(){var e=Object(D["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.is_student){e.next=6;break}return e.next=3,$.getSubscriptionInfoOfStudent(this.user.id);case 3:this.courses=e.sent.data.courses,e.next=9;break;case 6:return e.next=8,W.list(this.user.id);case 8:this.courses=e.sent.data.courses;case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},qe=He,We=(s("02f9"),Object(p["a"])(qe,Ae,Fe,!1,null,"53fc3fea",null)),Xe=We.exports;v()(We,{VBtn:g["a"],VIcon:b["a"],VList:x["a"],VListItem:w["a"],VListItemContent:C["a"],VListItemIcon:y["a"],VListItemTitle:C["b"],VRow:re["a"]});var ze=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"new-course"}},[s("v-stepper",{model:{value:e.e1,callback:function(t){e.e1=t},expression:"e1"}},[s("v-stepper-header",[s("v-stepper-step",{attrs:{complete:e.e1>1,step:"1",color:"indigo"}},[e._v("Course Details")]),s("v-divider"),s("v-stepper-step",{attrs:{complete:e.e1>2,step:"2",color:"indigo"}},[e._v("Plan the Lessons")]),s("v-divider"),s("v-stepper-step",{attrs:{step:"3",color:"indigo"}},[e._v("Review and Confirm")])],1),s("v-stepper-items",[s("v-stepper-content",{attrs:{step:"1"}},[s("v-container",[s("v-row",{staticClass:"justify-center"},[s("v-col",{attrs:{cols:"12"}},[s("v-card",{staticClass:"text-left mb-12",attrs:{outlined:""}},[s("v-card-title",{staticClass:"display-1"},[e._v("Course Info")]),s("v-divider"),s("v-card-text",[s("v-form",{ref:"courseForm"},[s("v-row",[s("v-col",{attrs:{cols:"12",md:"4"}},[s("v-text-field",{attrs:{label:"Title*",name:"title",type:"text",outlined:"",clearable:"",color:"indigo"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),s("v-col",{attrs:{cols:"12",md:"4"}},[s("v-text-field",{attrs:{label:"Price*",name:"price","prepend-icon":"mdi-currency-usd",rules:e.priceRules,outlined:"",clearable:"",color:"indigo"},model:{value:e.price,callback:function(t){e.price=t},expression:"price"}})],1),s("v-col",{attrs:{cols:"12",md:"4"}},[s("v-text-field",{attrs:{label:"Tagline",name:"tagline",outlined:"",clearable:"",color:"indigo"},model:{value:e.tagline,callback:function(t){e.tagline=t},expression:"tagline"}})],1)],1),s("v-row",[s("v-col",{attrs:{cols:"12"}},[s("v-textarea",{attrs:{label:"Description","auto-grow":"",outlined:"",color:"indigo"},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}})],1)],1),s("v-row",[s("v-col",{attrs:{cols:"12",md:"4"}},[s("v-select",{attrs:{label:"Level",items:e.levels,outlined:"",color:"indigo"},model:{value:e.level,callback:function(t){e.level=t},expression:"level"}})],1),s("v-col",{attrs:{cols:"12",md:"4"}},[s("v-select",{attrs:{label:"Instrument",items:e.instruments,outlined:"",color:"indigo"},model:{value:e.instrument,callback:function(t){e.instrument=t},expression:"instrument"}})],1),s("v-col",{attrs:{cols:"12",md:"4"}},[s("v-select",{attrs:{label:"Language",items:e.languages,outlined:"",color:"indigo"},model:{value:e.language,callback:function(t){e.language=t},expression:"language"}})],1)],1),s("v-row",[s("v-col",{attrs:{cols:"12",md:"6"}},[s("v-file-input",{attrs:{accept:"video/mp4, video/ogg",placeholder:"Upload a preview video, if none is supplied, the first lesson will be displayed as preview video","prepend-icon":"mdi-video",label:"Preview Video",outlined:"",color:"indigo"},model:{value:e.previewVideo,callback:function(t){e.previewVideo=t},expression:"previewVideo"}})],1),s("v-col",{attrs:{cols:"12",md:"6"}},[s("v-file-input",{attrs:{accept:"image/*",placeholder:"Choose coverpage for your course","prepend-icon":"mdi-image",label:"Cover Photo",outlined:"",color:"indigo"},model:{value:e.coverPhoto,callback:function(t){e.coverPhoto=t},expression:"coverPhoto"}})],1)],1),s("v-row",[s("v-col",{attrs:{cols:"12"}},[s("div",{staticStyle:{"font-size":"16px"}},[e._v("What will your students learn from the course?")])]),e._l(e.learningPoints,(function(t,r){return s("v-col",{staticClass:"py-1",attrs:{cols:"12"}},[s("v-text-field",{attrs:{color:"indigo",label:"Example: How to use pen tool in Photoshop",name:"tagline",outlined:"",clearable:"",dense:"","hide-details":"",rules:e.alphanumricRules},model:{value:e.learningPoints[r],callback:function(t){e.$set(e.learningPoints,r,t)},expression:"learningPoints[idx]"}})],1)})),s("v-col",{attrs:{cols:"12"}},[s("v-btn",{attrs:{color:"indigo",text:""},on:{click:e.addLearningPoint}},[e._v("+ Add an answer")])],1)],2),s("v-row",[s("v-col",{attrs:{cols:"12"}},[s("div",{staticStyle:{"font-size":"16px"}},[e._v("Who are this course for?")])]),e._l(e.targetAudiences,(function(t,r){return s("v-col",{staticClass:"py-1",attrs:{cols:"12"}},[s("v-text-field",{attrs:{color:"indigo",label:"Example: Kids 6-8 years old",name:"tagline",outlined:"",clearable:"",dense:"","hide-details":"",rules:e.alphanumricRules},model:{value:e.targetAudiences[r],callback:function(t){e.$set(e.targetAudiences,r,t)},expression:"targetAudiences[idx]"}})],1)})),s("v-col",{attrs:{cols:"12"}},[s("v-btn",{attrs:{color:"indigo",text:""},on:{click:e.addTargetAudience}},[e._v("+ Add an answer")])],1)],2),s("v-row",[s("v-col",{attrs:{cols:"12"}},[s("div",{staticStyle:{"font-size":"18px"}},[e._v("What are the requirements?")])]),e._l(e.requirements,(function(t,r){return s("v-col",{staticClass:"py-1",attrs:{cols:"12"}},[s("v-text-field",{attrs:{color:"indigo",label:"Example: Photoshop software",name:"tagline",outlined:"",clearable:"",dense:"","hide-details":"",rules:e.alphanumricRules},model:{value:e.requirements[r],callback:function(t){e.$set(e.requirements,r,t)},expression:"requirements[idx]"}})],1)})),s("v-col",{attrs:{cols:"12"}},[s("v-btn",{attrs:{color:"indigo",text:""},on:{click:e.addRequirement}},[e._v("+ Add an answer")])],1)],2)],1)],1)],1)],1)],1),s("v-row",{staticClass:"justify-center"},[s("v-col",{staticClass:"text-center"},[s("v-btn",{attrs:{color:"indigo",dark:""},on:{click:e.goStepTwo}},[e._v("Continue")]),s("v-btn",{attrs:{to:"/course/index"}},[e._v("Cancel")])],1)],1)],1)],1),s("v-stepper-content",{attrs:{step:"2"}},[s("v-container",[s("v-row",{staticClass:"justify-center"},[s("v-col",{attrs:{cols:"12"}},[s("v-expansion-panels",{staticClass:"mb-5",attrs:{multiple:"",focusable:""},model:{value:e.lesson,callback:function(t){e.lesson=t},expression:"lesson"}},[e._l(e.lessons,(function(t,r){return s("v-expansion-panel",{key:r,on:{click:function(e){}}},[s("v-expansion-panel-header",{staticClass:"text-h4"},[e._v("Lesson "+e._s(r+1)+": "+e._s(t.name))]),s("v-expansion-panel-content",{staticClass:"px-6"},[s("v-form",{ref:"lessonForm"+r,refInFor:!0,staticClass:"mt-5"},[s("v-row",[s("v-col",{attrs:{cols:"12",md:"4"}},[s("v-text-field",{attrs:{label:"Name",name:"name",type:"text",rules:e.requiredRules,outlined:"",clearable:"",color:"indigo"},model:{value:e.lessons[r].name,callback:function(t){e.$set(e.lessons[r],"name",t)},expression:"lessons[idx].name"}},[e._v("Title*")])],1),s("v-col",{attrs:{cols:"12",md:"4"}},[s("v-text-field",{attrs:{label:"Duration in minutes",name:"duration",rules:e.durationRules,outlined:"",clearable:"",color:"indigo"},model:{value:e.lessons[r].duration,callback:function(t){e.$set(e.lessons[r],"duration",t)},expression:"lessons[idx].duration"}})],1)],1),s("v-row",[s("v-col",{attrs:{cols:"12"}},[s("v-textarea",{attrs:{label:"Description","auto-grow":"",color:"indigo",outlined:""},model:{value:e.lessons[r].description,callback:function(t){e.$set(e.lessons[r],"description",t)},expression:"lessons[idx].description"}})],1)],1),s("v-row",[s("v-col",{attrs:{cols:"12",md:"6"}},[s("v-file-input",{attrs:{accept:"video/mp4, video/ogg",placeholder:"Choose Explanation Video","prepend-icon":"mdi-video",label:"Explanation Video",outlined:"",color:"indigo"},model:{value:e.lessons[r].video,callback:function(t){e.$set(e.lessons[r],"video",t)},expression:"lessons[idx].video"}})],1),s("v-col",{attrs:{cols:"12",md:"6"}},[s("v-file-input",{attrs:{accept:"image/*",placeholder:"Choose coverpage for video","prepend-icon":"mdi-image",label:"Explanation Video Poster",outlined:"",color:"indigo"},model:{value:e.lessons[r].videoPoster,callback:function(t){e.$set(e.lessons[r],"videoPoster",t)},expression:"lessons[idx].videoPoster"}})],1)],1),s("v-row",[s("v-col",{attrs:{cols:"12",md:"6"}},[s("v-file-input",{attrs:{accept:"video/mp4, video/ogg",placeholder:"Choose Demo Video","prepend-icon":"mdi-video",label:"Demo Video",outlined:"",color:"indigo"},model:{value:e.lessons[r].demo,callback:function(t){e.$set(e.lessons[r],"demo",t)},expression:"lessons[idx].demo"}})],1),s("v-col",{attrs:{cols:"12",md:"6"}},[s("v-file-input",{attrs:{accept:"image/*",placeholder:"Choose coverpage for demo video","prepend-icon":"mdi-image",label:"Demo Video Poster",outlined:"",color:"indigo"},model:{value:e.lessons[r].demoPoster,callback:function(t){e.$set(e.lessons[r],"demoPoster",t)},expression:"lessons[idx].demoPoster"}})],1)],1),s("v-row",[s("v-col",{attrs:{cols:"12",md:"6"}},[s("v-switch",{attrs:{label:"Overlay score on your demo video",color:"indigo"},on:{change:function(t){return e.showVex(t,r)}},model:{value:e.lessons[r].useScore,callback:function(t){e.$set(e.lessons[r],"useScore",t)},expression:"lessons[idx].useScore"}})],1)],1),s("v-row",[e.lessons[r].useScore?s("v-col",{attrs:{cols:"12",md:"6"}},[s("v-radio-group",{attrs:{mandatory:!0},model:{value:e.lessons[r].scoreOption,callback:function(t){e.$set(e.lessons[r],"scoreOption",t)},expression:"lessons[idx].scoreOption"}},[s("v-radio",{attrs:{label:"Upload musicXML file",value:"xml",color:"indigo"}}),s("v-radio",{attrs:{label:"Design your own score",value:"vex",color:"indigo"}})],1)],1):e._e(),e.lessons[r].useScore?s("v-col",{attrs:{cols:"12",md:"6"}},[s("v-text-field",{attrs:{label:"Demo Start Time",clearable:"",color:"indigo","prepend-icon":"mdi-alarm","persistent-hint":"",hint:"At roughly which second did you start playing in demo video",rules:e.demoStartTimeRules},model:{value:e.lessons[r].demoStartTime,callback:function(t){e.$set(e.lessons[r],"demoStartTime",t)},expression:"lessons[idx].demoStartTime"}})],1):e._e()],1)],1),s("div",{directives:[{name:"show",rawName:"v-show",value:"vex"==e.lessons[r].scoreOption&&e.lessons[r].useScore,expression:"(lessons[idx].scoreOption == 'vex' && lessons[idx].useScore)"}],attrs:{id:"optionvex"}},[s("v-row",[s("v-col",{attrs:{id:"pannel-content-"+r},on:{click:function(t){return e.changeMelody(t,r)}}})],1),s("v-row",[s("v-col",{attrs:{cols:"12",md:"6"}},[s("v-subheader",{staticClass:"pl-0"},[e._v("No. Bars")]),s("v-slider",{attrs:{min:"0",max:"16","thumb-label":"","thumb-size":24,color:"indigo","track-color":"indigo lighten-3"},on:{change:function(t){return e.changeBars(t,r)}},model:{value:e.lessons[r].numberOfBars,callback:function(t){e.$set(e.lessons[r],"numberOfBars",t)},expression:"lessons[idx].numberOfBars"}})],1),s("v-col",{attrs:{cols:"12",md:"6"}},[s("v-subheader",{staticClass:"pl-0"},[e._v("BPM")]),s("v-slider",{attrs:{min:"60",max:"120","thumb-label":"","thumb-size":24,color:"indigo","track-color":"indigo lighten-3"},model:{value:e.lessons[r].bpm,callback:function(t){e.$set(e.lessons[r],"bpm",t)},expression:"lessons[idx].bpm"}})],1),s("v-col",{attrs:{cols:"12",md:"6"}},[s("v-select",{attrs:{items:e.time_signatures,outlined:"",label:"Time Signature",color:"indigo"},on:{change:function(t){return e.changeTimeSignature(t,r)}},model:{value:e.lessons[r].timeSignature,callback:function(t){e.$set(e.lessons[r],"timeSignature",t)},expression:"lessons[idx].timeSignature"}})],1)],1)],1),s("div",{directives:[{name:"show",rawName:"v-show",value:"xml"==e.lessons[r].scoreOption&&e.lessons[r].useScore,expression:"(lessons[idx].scoreOption == 'xml' && lessons[idx].useScore)"}],attrs:{id:"optionxml"}},[s("v-row",[s("v-col",{attrs:{cols:"12",md:"6"}},[s("v-file-input",{attrs:{accept:"text/xml, .musicxml",placeholder:"Music XML file","prepend-icon":"mdi-file-document-outline",label:"Upload musicxml file"},model:{value:e.lessons[r].musicXml,callback:function(t){e.$set(e.lessons[r],"musicXml",t)},expression:"lessons[idx].musicXml"}})],1)],1),s("v-row",[s("v-col",{attrs:{cols:"12",md:"6"}},[s("v-subheader",{staticClass:"pl-0"},[e._v("BPM")]),s("v-slider",{attrs:{min:"60",max:"120","thumb-label":"","thumb-size":24},model:{value:e.lessons[r].bpm,callback:function(t){e.$set(e.lessons[r],"bpm",t)},expression:"lessons[idx].bpm"}})],1)],1)],1)],1)],1)})),s("v-expansion-panel",{attrs:{readonly:""},on:{click:e.newLesson}},[s("v-expansion-panel-header",{staticClass:"text-h5",attrs:{"disable-icon-rotate":""},scopedSlots:e._u([{key:"actions",fn:function(){return[s("v-icon",[e._v("mdi-plus")])]},proxy:!0}])},[e._v("Add Lesson ")])],1)],2)],1)],1),s("v-row",{staticClass:"justify-center"},[s("v-col",{staticClass:"text-center"},[s("v-btn",{attrs:{color:"indigo",dark:""},on:{click:e.goStepThree}},[e._v("Continue")]),s("v-btn",{attrs:{to:"/course/index"}},[e._v("Cancel")])],1)],1)],1)],1),s("v-stepper-content",{attrs:{step:"3"}},[s("v-container",[s("v-row",{staticClass:"justify-center"},[s("v-col",{attrs:{cols:"12"}},[s("v-card",{staticClass:"text-left mb-12",attrs:{outlined:""}},[s("v-card-title",{staticClass:"display-1"},[e._v("Course Info"),s("v-spacer"),s("v-btn",{attrs:{outlined:"",color:"indigo",right:""},on:{click:function(t){e.e1=1}}},[s("v-icon",{attrs:{color:"indigo"}},[e._v("mdi-pencil")])],1)],1),s("v-divider"),s("v-card-text",[s("v-row",[s("v-col",{attrs:{cols:"12",md:"4"}},[s("strong",[e._v("Title: ")]),e._v(e._s(e.name))]),s("v-col",{attrs:{cols:"12",md:"4"}},[s("strong",[e._v("Price: ")]),e._v(e._s(e.price))]),s("v-col",{attrs:{cols:"12",md:"4"}},[s("strong",[e._v("Tagline: ")]),e._v(e._s(e.tagline))])],1),s("v-row",[s("v-col",{attrs:{cols:"12"}},[s("strong",[e._v("Description: ")]),e._v(e._s(e.description))])],1),s("v-row",[s("v-col",{attrs:{cols:"12",md:"4"}},[s("strong",[e._v("Level: ")]),e._v(e._s(e.level))]),s("v-col",{attrs:{cols:"12",md:"4"}},[s("strong",[e._v("Instrument: ")]),e._v(e._s(e.instrument))]),s("v-col",{attrs:{cols:"12",md:"4"}},[s("strong",[e._v("Language: ")]),e._v(e._s(e.language))])],1),s("v-row",[e.previewVideo?s("v-col",{attrs:{cols:"12",md:"4"}},[s("strong",[e._v("Preview video: ")]),e._v(e._s(e.previewVideo.name))]):e._e(),e.coverPhoto?s("v-col",{attrs:{cols:"12",md:"4"}},[s("strong",[e._v("Cover photo: ")]),e._v(e._s(e.coverPhoto.name))]):e._e()],1),s("v-row",[s("v-col",{attrs:{cols:"12"}},[s("strong",[e._v("What your student will learn:")])]),e._l(e.learningPoints,(function(t){return s("v-col",{attrs:{cols:"12"}},[s("strong"),e._v(e._s(t))])}))],2),s("v-row",[s("v-col",{attrs:{cols:"12"}},[s("strong",[e._v("Who are this course for?")])]),e._l(e.targetAudiences,(function(t){return s("v-col",{attrs:{cols:"12"}},[s("p",[e._v(e._s(t))])])}))],2),s("v-row",[s("v-col",{attrs:{cols:"12"}},[s("strong",[e._v("What are the requirements?")])]),e._l(e.requirements,(function(t){return s("v-col",{attrs:{cols:"12"}},[s("p",[e._v(e._s(t))])])}))],2)],1)],1)],1)],1),s("v-row",{staticClass:"justify-center mt-5"},[s("v-col",{attrs:{cols:"12"}},[s("v-card",{staticClass:"text-left mb-12",attrs:{outlined:""}},[s("v-card-title",{staticClass:"display-1"},[e._v("Lessons"),s("v-spacer"),s("v-btn",{attrs:{outlined:"",color:"indigo",right:""},on:{click:function(t){e.e1=2}}},[s("v-icon",{attrs:{color:"indigo"}},[e._v("mdi-pencil")])],1)],1),s("v-divider"),e._l(e.lessons,(function(t,r){return s("v-card-text",[s("v-row",[s("v-col",{attrs:{cols:"12",md:"4"}},[s("strong",[e._v("Name: ")]),e._v(e._s(t.name))]),s("v-col",{attrs:{cols:"12",md:"4"}},[s("strong",[e._v("Duration: ")]),e._v(e._s(t.duration))])],1),s("v-row",[s("v-col",{attrs:{cols:"12"}},[s("strong",[e._v("Description: ")]),e._v(e._s(t.description))])],1),t.video&&t.videoPoster?s("v-row",[s("v-col",{attrs:{cols:"12",md:"6"}},[s("strong",[e._v("Explanation Video: ")]),e._v(e._s(t.video.name))]),s("v-col",{attrs:{cols:"12",md:"6"}},[s("strong",[e._v("Video Poster: ")]),e._v(e._s(t.videoPoster.name))])],1):e._e(),t.demo&&t.demoPoster?s("v-row",[s("v-col",{attrs:{cols:"12",md:"6"}},[s("strong",[e._v("Demo Video: ")]),e._v(e._s(t.demo.name))]),s("v-col",{attrs:{cols:"12",md:"6"}},[s("strong",[e._v("Demo Poster: ")]),e._v(e._s(t.demoPoster.name))])],1):e._e(),s("v-row",{directives:[{name:"show",rawName:"v-show",value:t.useScore&&!t.useXml,expression:"lesson.useScore && !lesson.useXml"}]},[s("v-col",{attrs:{cols:"12"}},[s("div",{attrs:{id:"vexflow-review-wrapper-"+r}})]),s("v-col",{attrs:{cols:"12",md:"4"}},[s("strong",[e._v("BPM: "+e._s(t.bpm))])]),s("v-col",{attrs:{cols:"12",md:"4"}},[s("strong",[e._v("Number of Bars: ")]),e._v(e._s(t.numberOfBars))])],1),t.useScore&&t.useXml?s("v-row",[s("v-col",{attrs:{cols:"12",md:"4"}},[s("strong",[e._v("MusicXML file: ")]),e._v(e._s(t.musicXml.name))])],1):e._e(),t.useScore&&t.useXml?s("v-row",[s("v-col",[s("strong",[e._v("MusicXML file: ")]),e._v(e._s(t.musicXml.name))])],1):e._e()],1)}))],2)],1)],1),s("v-row",{staticClass:"justify-center"},[s("v-col",{staticClass:"text-center"},[s("v-btn",{attrs:{color:"indigo",dark:"",loading:e.loading},on:{click:e.submit}},[e._v("Confirm")]),s("v-btn",{attrs:{to:"/course/index",disabled:e.loading}},[e._v("Cancel")])],1)],1),s("v-row",[s("v-col",[s("p",{staticClass:"error"},[e._v(e._s(e.error))])])],1)],1)],1)],1)],1)],1)},Ke=[],Ye=(s("a4d3"),s("e01a"),s("a15b"),s("a9e3"),{create:function(e){var t=q();return t.defaults.headers.post["Content-Type"]="multipart/form-data",t.post("exercise/new",e)},list:function(e){return q().get("exercise/list?lid=".concat(e))},edit:function(e){var t=q();return t.defaults.headers.post["Content-Type"]="multipart/form-data",t.put("exercise/edit",e)},delete:function(e){return q().delete("exercise/del?eid=".concat(e))}}),Ge=s("359f"),Ze={name:"NewCourse",data:function(){return{e1:1,name:"",tagline:"",nameRules:[function(e){return!!e||"Title is required"}],price:"",priceRules:[function(e){return!!e||"Price is required"},function(e){return new RegExp(/^\d+(?:\.\d{0,2})$/).test(e)||"Price must be a number with maximum 2 decimal places"}],description:"",language:"",languages:["English","Chinese"],level:"",levels:["Beginner","Intermediate","Advanced"],instrument:"",instruments:["Piano","Guitar","Drum Set","Er Hu","Yang Qin","French Horn","Violin","Body Percussion"],targetAudiences:[""],learningPoints:[""],requirements:[""],coverPhoto:null,previewVideo:null,lesson:[0],lessons:[{name:"",duration:"",description:"",video:null,videoPoster:null,demo:null,demoPoster:null,useScore:!0,handler:null,timeSignature:"4/4",bpm:60,numberOfBars:4,melody:[],demoStartTime:"0",scoreOption:"vex",musicXml:null}],durationRules:[function(e){return!!e||"Duration is required"},function(e){return new RegExp(/^\d+$/).test(e)||"Please input numbers only"}],demoStartTimeRules:[function(e){return!!e||"Demo Start Time is required"},function(e){return new RegExp(/^\d+$/).test(e)||"Please input numbers only"}],requiredRules:[function(e){return!!e||"This field is required"}],alphanumricRules:[function(e){return new RegExp("^[a-zA-Z0-9 !@#$%^*_(){}-]{0,100}$").test(e)||"You can only input alphanumeric characters"}],reviewVexHandlers:[],time_signatures:["4/4","3/4","2/4","3/8","6/8"],error:null,loading:!1}},computed:Object(c["b"])(["user"]),watch:{e1:function(e){if(2==e&&null==this.lessons[0].handler){var t=document.createElement("div");t.id="vexflow-wrapper-0";var s=document.getElementById("pannel-content-0");s.appendChild(t),this.lessons[0].handler=new Ge["a"].Handler(t.id,{canvasProperties:{id:t.id+"-canvas",width:5*window.innerWidth/6,tabindex:1}}).init()}else if(3==e)if(0==this.reviewVexHandlers.length)for(var r=0;r<this.lessons.length;r++){var n=new Ge["a"].Handler("vexflow-review-wrapper-".concat(r),{canEdit:!1,numberOfStaves:this.lessons[r].numberOfBars,canvasProperties:{id:"vexflow-review-wrapper-".concat(r)+"-canvas",width:5*window.innerWidth/6,tabindex:1}}).init();n.setTimeSignature(this.lessons[r].timeSignature),this.lessons[r].melody.length>0&&n.importNotes(this.lessons[r].melody,this.lessons[r].timeSignature),this.reviewVexHandlers.push(n),this.lessons[r].useScore||document.getElementById("vexflow-review-wrapper-".concat(r)).classList.add("hide")}else for(var o=0;o<this.lessons.length;o++)this.lessons[o].useScore&&(this.reviewVexHandlers[o].setTimeSignature(this.lessons[o].timeSignature),this.reviewVexHandlers[o].importNotes(this.lessons[o].melody,this.lessons[o].timeSignature))}},methods:{addLearningPoint:function(){this.learningPoints.push("")},addTargetAudience:function(){this.targetAudiences.push("")},addRequirement:function(){this.requirements.push("")},goStepTwo:function(){this.$refs.courseForm.validate()&&(this.e1=2)},goStepThree:function(){for(var e=0;e<this.lessons.length;e++)if(!this.$refs["lessonForm".concat(e)][0].validate())return void alert("Please fill in name, duration and demo start time for all lessons");for(var t=0;t<this.lessons.length;t++)if(this.lessons[t].useScore&&"vex"==this.lessons[t].scoreOption&&0==this.lessons[t].melody.length&&this.lessons[t].useScore&&0!=this.lessons[t].numberOfBars)return void alert("Please input some notes or choose not to overlay score");this.e1=3},go_to_courses:function(){this.$router.push("/course/index/".concat(this.$store.state.user.id))},submit:function(){var e=this;return Object(D["a"])(regeneratorRuntime.mark((function t(){var s,r,n,o,i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,e.error="",t.prev=2,s=new FormData,s.set("name",e.name),s.set("description",e.description),s.set("language",e.langauge),s.set("level",e.level),s.set("instrument",e.instrument),s.set("price",Number(e.price)),s.set("requirements",e.requirements.join("&")),s.set("targetAudiences",e.targetAudiences.join("&")),s.set("learningPoints",e.learningPoints.join("&")),s.set("tagline",e.tagline),s.set("TutorId",e.user.id),e.previewVideo&&s.append("previewVideo",e.previewVideo),e.coverPhoto&&s.append("coverPhoto",e.coverPhoto),t.next=19,W.create(s);case 19:r=t.sent,n=0;case 21:if(!(n<e.lessons.length)){t.next=46;break}return t.next=24,$e.create({name:e.lessons[n].name,duration:Number(e.lessons[n].duration),description:e.lessons[n].description,cid:r.data.course.id});case 24:return o=t.sent,i=e.lessons[n],a=new FormData,a.set("name",""),a.set("melody",i.melody.join("-")),a.set("timeSignature",i.timeSignature),a.set("bpm",i.bpm),a.set("lid",o.data.lesson.id),a.set("numberOfBars",i.numberOfBars),a.set("demoStartTime",parseInt(i.demoStartTime)),a.set("useScore",i.useScore),i.useScore&&("vex"==i.scoreOption?a.set("useXml",!1):a.set("useXml",!0)),i.video&&a.append("video",i.video),i.videoPoster&&a.append("videoPoster",i.videoPoster),i.demo&&a.append("demo",i.demo),i.demoPoster&&a.append("demoPoster",i.demoPoster),i.musicXml&&a.append("musicXml",i.musicXml),t.next=43,Ye.create(a);case 43:n++,t.next=21;break;case 46:e.$router.push("/course/show/".concat(r.data.course.id)),t.next=53;break;case 49:t.prev=49,t.t0=t["catch"](2),console.log(t.t0),e.error=t.t0.response.data.error;case 53:case"end":return t.stop()}}),t,null,[[2,49]])})))()},newLesson:function(){this.lessons.push({name:"",duration:"",description:"",video:null,demoVideo:null,useScore:!1,handler:null,timeSignature:"4/4",bpm:60,numberOfBars:4,melody:[],demoStartTime:"0"}),this.lesson.push(this.lessons.length)},showVex:function(e,t){if(null==this.lessons[t].handler){var s=document.createElement("div");s.id="vexflow-wrapper-".concat(t);var r=document.getElementById("pannel-content-".concat(t));r.appendChild(s),this.lessons[t].handler=new Ge["a"].Handler(s.id,{canvasProperties:{id:s.id+"-canvas",width:5*window.innerWidth/6,tabindex:1}}).init()}},changeTimeSignature:function(e,t){this.lessons[t].handler.setTimeSignature(this.lessons[t].timeSignature)},changeBars:function(e,t){this.lessons[t].handler.changeNumberOfBars(this.lessons[t].numberOfBars,this.lessons[t].handler.exportNotes())},changeMelody:function(e,t){this.lessons[t].melody=this.lessons[t].handler.exportNotes()}},mounted:function(){}},Qe=Ze,Je=(s("6ac5"),s("cd55")),et=s("49e2"),tt=s("c865"),st=s("0393"),rt=s("23a7"),nt=s("b974"),ot=s("ba0d"),it=s("7e85"),at=s("e516"),lt=s("9c54"),ct=s("56a4"),ut=s("e0c7"),dt=s("b73d"),pt=s("a844"),ht=Object(p["a"])(Qe,ze,Ke,!1,null,"40a5dd87",null),vt=ht.exports;v()(ht,{VBtn:g["a"],VCard:Z["a"],VCardText:Q["c"],VCardTitle:Q["d"],VCol:J["a"],VContainer:ee["a"],VDivider:te["a"],VExpansionPanel:Je["a"],VExpansionPanelContent:et["a"],VExpansionPanelHeader:tt["a"],VExpansionPanels:st["a"],VFileInput:rt["a"],VForm:de["a"],VIcon:b["a"],VRadio:pe["a"],VRadioGroup:he["a"],VRow:re["a"],VSelect:nt["a"],VSlider:ot["a"],VSpacer:S["a"],VStepper:it["a"],VStepperContent:at["a"],VStepperHeader:lt["a"],VStepperItems:lt["b"],VStepperStep:ct["a"],VSubheader:ut["a"],VSwitch:dt["a"],VTextField:ve["a"],VTextarea:pt["a"]});var mt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.course?s("v-container",[s("v-row",{staticClass:"justify-center"},[s("v-col",{attrs:{cols:"12"}},[s("v-card",{staticClass:"text-left mb-12",attrs:{outlined:""}},[s("v-card-title",{staticClass:"display-1"},[e._v("Course Info"),s("v-spacer"),s("v-btn",{attrs:{outlined:"",color:"indigo",right:""},on:{click:e.editCourse}},[s("v-icon",{attrs:{color:"indigo"}},[e._v("mdi-pencil")])],1)],1),s("v-divider"),s("v-card-text",[s("v-row",[s("v-col",{attrs:{cols:"12",md:"4"}},[s("strong",[e._v("Title: ")]),e._v(e._s(e.course.name))]),s("v-col",{attrs:{cols:"12",md:"4"}},[s("strong",[e._v("Price: ")]),e._v("S$ "+e._s(e.course.price))]),s("v-col",{attrs:{cols:"12",md:"4"}},[s("strong",[e._v("Tagline: ")]),e._v(e._s(e.course.tagline))])],1),s("v-row",[s("v-col",{attrs:{cols:"12"}},[s("strong",[e._v("Description: ")]),e._v(e._s(e.course.description))])],1),s("v-row",[s("v-col",{attrs:{cols:"12",md:"4"}},[s("strong",[e._v("Level: ")]),e._v(e._s(e.course.level))]),s("v-col",{attrs:{cols:"12",md:"4"}},[s("strong",[e._v("Instrument: ")]),e._v(e._s(e.course.instrument))]),s("v-col",{attrs:{cols:"12",md:"4"}},[s("strong",[e._v("Language: ")]),e._v(e._s(e.course.language))])],1),s("v-row",[e.course.previewVideoUrl?s("v-col",{attrs:{cols:"12",md:"4"}},[s("strong",[e._v("Preview video: ")]),e._v(e._s(e.course.previewVideoUrl.split("/")[6]))]):e._e(),e.course.coverPhotoUrl?s("v-col",{attrs:{cols:"12",md:"4"}},[s("strong",[e._v("Cover photo: ")]),e._v(e._s(e.course.coverPhotoUrl.split("/")[6]))]):e._e()],1),e.course.learningPoints?s("v-row",[s("v-col",{attrs:{cols:"12"}},[s("strong",[e._v("What your student will learn:")])]),e._l(e.course.learningPoints.split("&"),(function(t){return s("v-col",{staticClass:"py-0",attrs:{cols:"12"}},[s("p",[e._v(e._s(t))])])}))],2):e._e(),e.course.targetAudiences?s("v-row",[s("v-col",{attrs:{cols:"12"}},[s("strong",[e._v("Who are this course for?")])]),e._l(e.course.targetAudiences.split("&"),(function(t){return s("v-col",{staticClass:"py-0",attrs:{cols:"12"}},[s("p",[e._v(e._s(t))])])}))],2):e._e(),e.course.requirements?s("v-row",[s("v-col",{attrs:{cols:"12"}},[s("strong",[e._v("What are the requirements?")])]),e._l(e.course.requirements.split("&"),(function(t){return s("v-col",{staticClass:"py-0",attrs:{cols:"12"}},[s("p",[e._v(e._s(t))])])}))],2):e._e()],1)],1)],1)],1),s("v-row",{staticClass:"justify-center mt-5"},[s("v-col",{attrs:{cols:"12"}},[s("v-card",{staticClass:"text-left mb-12",attrs:{outlined:""}},[s("v-card-title",{staticClass:"display-1"},[e._v("Lessons")]),s("v-divider"),e._l(e.course.lessons,(function(t,r){return s("v-card-text",[s("v-row",[s("v-col",{attrs:{cols:"12",md:"4"}},[s("strong",[e._v("Name: ")]),e._v(e._s(t.name))]),s("v-col",{attrs:{cols:"12",md:"4"}},[s("strong",[e._v("Duration: ")]),e._v(e._s(t.duration))]),s("v-spacer"),s("v-btn",{staticClass:"mr-4",attrs:{outlined:"",color:"indigo",right:""},on:{click:function(s){return e.editLesson(s,t)}}},[s("v-icon",{attrs:{color:"indigo"}},[e._v("mdi-pencil")])],1)],1),s("v-row",[s("v-col",{attrs:{cols:"12"}},[s("strong",[e._v("Description: ")]),e._v(e._s(t.description))])],1),t.exercises[0].videoUrl&&t.exercises[0].videoPosterUrl?s("v-row",[s("v-col",{attrs:{cols:"12",md:"6"}},[s("strong",[e._v("Explanation Video: ")]),e._v(e._s(t.exercises[0].videoUrl.split("/")[6]))]),s("v-col",{attrs:{cols:"12",md:"6"}},[s("strong",[e._v("Video Poster: ")]),e._v(e._s(t.exercises[0].videoPosterUrl.split("/")[6]))])],1):e._e(),t.exercises[0].demoUrl&&t.exercises[0].demoPosterUrl?s("v-row",[s("v-col",{attrs:{cols:"12",md:"6"}},[s("strong",[e._v("Demo Video: ")]),e._v(e._s(t.exercises[0].demoUrl.split("/")[6]))]),s("v-col",{attrs:{cols:"12",md:"6"}},[s("strong",[e._v("Demo Poster: ")]),e._v(e._s(t.exercises[0].demoPosterUrl.split("/")[6]))])],1):e._e(),s("v-row",{directives:[{name:"show",rawName:"v-show",value:t.exercises[0].useScore&&!t.exercises[0].useXml,expression:"lesson.exercises[0].useScore && !lesson.exercises[0].useXml"}]},[s("v-col",{attrs:{cols:"12"}},[s("div",{attrs:{id:"vexflow-review-wrapper-"+r}})]),s("v-col",{attrs:{cols:"12",md:"4"}},[s("strong",[e._v("BPM: ")]),e._v(e._s(t.exercises[0].bpm))]),s("v-col",{attrs:{cols:"12",md:"4"}},[s("strong",[e._v("Number of Bars: ")]),e._v(e._s(t.exercises[0].numberOfBars))])],1),t.exercises[0].useScore&&t.exercises[0].useXml?s("v-row",[s("v-col",[s("strong",[e._v("MusicXML file: ")]),e._v(e._s(t.exercises[0].musicXmlUrl.split("/")[6]))])],1):e._e()],1)}))],2)],1)],1),s("v-row",{staticClass:"justify-center"},[s("v-col",{staticClass:"text-center"},[s("v-btn",{attrs:{color:"indigo",dark:"",to:"/course/index"}},[e._v("Confirm")]),s("v-btn",{attrs:{to:"/course/index"}},[e._v("Cancel")])],1)],1)],1):e._e()},ft=[],gt=(s("1276"),{name:"editCourse",data:function(){return{course:null}},computed:Object(c["b"])(["user"]),methods:{editCourse:function(){this.$router.push("/course/form/".concat(this.course.id))},editLesson:function(e,t){this.$router.push("/lesson/edit-form/".concat(t.id))},newLesson:function(e,t){this.$router.push("/lesson/new-form/".concat(this.course.id))}},mounted:function(){var e=Object(D["a"])(regeneratorRuntime.mark((function e(){var t,s,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W.show(this.$route.params.course_id);case 3:t=e.sent,this.course=t.data.course,s=0;case 6:if(!(s<this.course.lessons.length)){e.next=17;break}if(r=this.course.lessons[s].exercises[0],!r.useScore||r.useXml){e.next=14;break}return e.next=11,this.$nextTick();case 11:n=new Ge["a"].Handler("vexflow-review-wrapper-".concat(s),{canEdit:!1,numberOfStaves:r.numberOfBars,canvasProperties:{id:"vexflow-review-wrapper-".concat(s)+"-canvas",width:5*window.innerWidth/6,tabindex:1}}).init(),n.setTimeSignature(r.timeSignature),n.importNotes(r.melody.split("-"),r.timeSignature);case 14:s++,e.next=6;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e["catch"](0),console.log(e.t0);case 22:case"end":return e.stop()}}),e,this,[[0,19]])})));function t(){return e.apply(this,arguments)}return t}()}),bt=gt,xt=(s("9be2"),Object(p["a"])(bt,mt,ft,!1,null,"6bb2c03b",null)),wt=xt.exports;v()(xt,{VBtn:g["a"],VCard:Z["a"],VCardText:Q["c"],VCardTitle:Q["d"],VCol:J["a"],VContainer:ee["a"],VDivider:te["a"],VIcon:b["a"],VRow:re["a"],VSpacer:S["a"]});var _t=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"student"}},[s("panel",{attrs:{title:"Users"}},[s("v-list",e._l(e.allUsers,(function(t){return s("v-list-item",{key:t.id},[s("v-list-item-content",[s("v-list-item-title",{staticClass:"mr-5",domProps:{textContent:e._s(t.username)}})],1),s("v-list-item-content",[s("v-list-item-title",{staticClass:"mr-5",domProps:{textContent:e._s(t.email)}})],1),s("v-list-item-content",[t.isStudent?s("v-list-item-title",{staticClass:"mr-5"},[e._v("Student")]):s("v-list-item-title",{staticClass:"mr-5"},[e._v("Tutor")])],1)],1)})),1)],1)],1)},yt=[],Ct={getAllUsers:function(){return q().get("user/list")},getAllStudents:function(){return q().get("student/list")},getAllTutors:function(){return q().get("tutor/list")}},kt={name:"UserIndex",data:function(){return{allUsers:[]}},mounted:function(){var e=Object(D["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ct.getAllUsers();case 2:this.allUsers=e.sent.data.users;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},St=kt,Vt=Object(p["a"])(St,_t,yt,!1,null,"740439ec",null),Tt=Vt.exports;v()(Vt,{VList:x["a"],VListItem:w["a"],VListItemContent:C["a"],VListItemTitle:C["b"]});var Ot=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("v-container",[s("v-row",[s("v-col",[s("v-form",[s("v-row",[s("v-col",{attrs:{cols:"4"}},[s("v-file-input",{attrs:{accept:"video/mp4, video/ogg",placeholder:"Choose Explanation Video","prepend-icon":"mdi-video",label:"Explanation Video"},model:{value:e.video,callback:function(t){e.video=t},expression:"video"}})],1),s("v-col",{attrs:{cols:"4"}},[s("div",{attrs:{id:"wrapper"}},[s("v-progress-linear",{attrs:{value:e.progress,height:"10",striped:"",rounded:"",color:e.color}})],1)])],1),s("v-btn",{on:{click:e.submit}},[e._v("Submit")])],1)],1)],1),s("v-row",[s("v-col",{attrs:{cols:"4"}},[s("video",{staticStyle:{width:"100%"},attrs:{src:e.src,controls:""}})])],1),s("v-row",[s("v-col",[s("v-btn",{on:{click:e.startTimer}},[e._v("Start Timer")]),s("v-btn",{on:{click:e.reset}},[e._v("Reset")])],1)],1)],1)],1)},Pt=[],It=(s("2b3d"),s("4a9d")),Bt=s.n(It),Lt={name:"VideoPlayer",data:function(){return{video:null,progress:0,value:"",custom:!0,src:"",error:!1}},computed:{color:function(){return 100==this.progress?"success":this.error?"error":"primary"}},watch:{video:function(e){console.log(e),this.src=URL.createObjectURL(e)}},methods:{startTimer:function(){var e=this;setInterval((function(){e.progress<100&&(e.progress+=10)}),1e3)},reset:function(){this.progress=0},submit:function(){var e=this;return Object(D["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Bt.a.config.update({accessKeyId:Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_AWS_ACCESS_KEY,secretAccessKey:Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_AWS_SECRET_ACCESS_KEY}),Bt.a.config.region="ap-southeast-1",t.prev=2,s=new Bt.a.S3.ManagedUpload({partSize:10485760,params:{Bucket:Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_BUCKET_NAME,Key:"testingmultipart/".concat(e.video.name),Body:e.video}}),s.on("httpUploadProgress",(function(t){e.progress=parseInt(100*t.loaded/t.total)})),t.next=7,s.promise();case 7:console.log(s),t.next=14;break;case 10:t.prev=10,t.t0=t["catch"](2),console.log(t.t0),e.error=!0;case 14:case"end":return t.stop()}}),t,null,[[2,10]])})))()}},mounted:function(){console.log(Object({NODE_ENV:"production",BASE_URL:"/"}))}},Et=Lt,Rt=(s("5de4"),s("8e36")),Mt=Object(p["a"])(Et,Ot,Pt,!1,null,"5483c567",null),Nt=Mt.exports;v()(Mt,{VBtn:g["a"],VCol:J["a"],VContainer:ee["a"],VFileInput:rt["a"],VForm:de["a"],VProgressLinear:Rt["a"],VRow:re["a"]});var Ut=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"mt-5",attrs:{id:"student"}},[e.user.isTutor?s("panel",{attrs:{title:"My Courses"}},[s("v-list",e._l(e.userOwnedCourses,(function(t,r){return s("v-list-item",{key:t.id,on:{click:function(s){return e.goToThread(s,t)}}},[s("v-list-item-content",[s("v-list-item-title",{staticClass:"text-h5 py-0",domProps:{textContent:e._s(t.name)}})],1),s("v-list-item-icon",[s("div",{staticClass:"notification"},[s("p",{staticClass:"pa-0 mx-auto"},[e._v(e._s(t.unreadStudentPost))])])])],1)})),1)],1):s("panel",{attrs:{title:"Subscribed Courses"}},[s("v-list",e._l(e.userSubscribedCourses,(function(t,r){return s("v-list-item",{key:t.id,on:{click:function(s){return e.showThread(s,t)}}},[s("v-list-item-content",[s("v-list-item-title",{staticClass:"text-h5 py-0",domProps:{textContent:e._s(t.name)}})],1),s("v-list-item-icon",[s("div",{staticClass:"notification"},[s("p",{staticClass:"pa-0 mx-auto"},[e._v(e._s(t.unreadTutorPost))])])])],1)})),1)],1)],1)},Dt=[],jt={name:"CoursesThreadsIndex",data:function(){return{avatar:"https://cdn.vuetifyjs.com/images/lists/2.jpg",threads:[],userOwnedCourses:[],userSubscribedCourses:[]}},computed:Object(c["b"])(["user"]),methods:{goToThread:function(e,t){this.$router.push("/course/threads/index/".concat(t.id))},showThread:function(e,t){this.$router.push({name:"showthread",params:{course_id:t.id,student_id:this.user.id}})}},mounted:function(){var e=Object(D["a"])(regeneratorRuntime.mark((function e(){var t,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.user.isStudent){e.next=7;break}return e.next=3,$.getSubscriptionInfoOfStudent(this.user.id);case 3:t=e.sent,this.userSubscribedCourses=t.data.courses,e.next=11;break;case 7:return e.next=9,W.list(this.user.id);case 9:s=e.sent,this.userOwnedCourses=s.data.courses;case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},At=jt,Ft=(s("1e3e"),Object(p["a"])(At,Ut,Dt,!1,null,"c988d6a0",null)),$t=Ft.exports;v()(Ft,{VList:x["a"],VListItem:w["a"],VListItemContent:C["a"],VListItemIcon:y["a"],VListItemTitle:C["b"]});var Ht=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"student"}},[s("panel",{attrs:{title:"All Courses"}},[s("v-list",e._l(e.students,(function(t,r){return s("v-list-item",{key:t.id,on:{click:function(s){return e.showThread(s,t)}}},[s("v-list-item-avatar",[s("v-img",{attrs:{src:e.avatar}})],1),s("v-list-item-content",[s("v-list-item-title",{domProps:{textContent:e._s(t.username)}})],1),s("v-list-item-icon",[s("div",{staticClass:"notification"},[s("p",{staticClass:"pa-0 mx-auto"},[e._v(e._s(e.unreads[r]))])])])],1)})),1)],1)],1)},qt=[],Wt={name:"CourseThreadsIndex",data:function(){return{avatar:"https://cdn.vuetifyjs.com/images/lists/2.jpg",students:[],unreads:[]}},computed:Object(l["a"])({},Object(c["b"])(["user","userOwnedCourses"])),methods:{showThread:function(e,t){this.$router.push({name:"showthread",params:{course_id:this.$route.params.course_id,student_id:t.id}})}},mounted:function(){var e=Object(D["a"])(regeneratorRuntime.mark((function e(){var t,s,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,$.getSubscriptionInfoOfCourse(this.$route.params.course_id);case 2:t=e.sent,this.students=t.data.students,s=0;case 5:if(!(s<this.students.length)){e.next=13;break}return e.next=8,Le.getUnread(this.$route.params.course_id,this.students[s].id);case 8:r=e.sent,this.unreads.push(r.data.unread);case 10:s++,e.next=5;break;case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},Xt=Wt,zt=(s("0c14"),Object(p["a"])(Xt,Ht,qt,!1,null,"e233037e",null)),Kt=zt.exports;v()(zt,{VImg:se["a"],VList:x["a"],VListItem:w["a"],VListItemAvatar:_e["a"],VListItemContent:C["a"],VListItemIcon:y["a"],VListItemTitle:C["b"]});var Yt=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.course?s("div",{attrs:{id:"student"}},[s("v-container",[s("h1",[e._v(e._s(e.course.name))]),s("v-row",[s("v-col",[s("v-expansion-panels",{staticClass:"elevation-2",attrs:{hover:"",multiple:""},model:{value:e.currentThread,callback:function(t){e.currentThread=t},expression:"currentThread"}},e._l(e.threads,(function(t,r){return s("v-expansion-panel",{key:t.id},[s("v-expansion-panel-header",{staticClass:"font-weight-bold",staticStyle:{"font-size":"18px"}},[e._v(e._s(e.course.lessons[r].name))]),s("v-expansion-panel-content",{staticClass:"px-6"},[t.posts?s("v-list",e._l(t.posts,(function(r,n){return s("v-list-item",{key:r.id},[s("v-list-item-content",{staticClass:"pb-0"},[s("v-container",{staticClass:"pt-0 pb-4 px-0",attrs:{fluid:""}},[0==n||r.updatedAt.substring(0,10)!=t.posts[n-1].updatedAt.substring(0,10)?s("v-row",{staticClass:"py-0"},[s("v-col",{staticClass:"py-0"},[s("v-chip",{staticStyle:{"font-size":"12px"},attrs:{label:"",color:"indigo darken-3",dark:""}},[e._v(e._s(new Date(r.updatedAt).toLocaleString([],{year:"numeric",month:"numeric",day:"numeric"})))])],1)],1):e._e(),s("v-row",{staticClass:"mt-5"},[s("v-col",{staticClass:"pb-0",staticStyle:{"margin-bottom":"-3px"}},[s("video",{attrs:{width:"100%",height:"auto",controls:""}},[s("source",{attrs:{src:r.videoUrl,type:"video/mp4"}}),e._v("Your browser does not support HTML video.")])])],1),r.UserId!=e.user.id?s("v-row",{staticClass:"justify-end bottom-border mx-0 py-3"},[s("v-col",{staticClass:"pr-8 py-0",attrs:{cols:"6"}},[s("div",{staticClass:"speech-bubble-other"},[s("v-row",{staticClass:"ma-0",staticStyle:{width:"100%"}},[s("v-col",{staticClass:"text-left"},[s("div",[e._v(e._s(r.message))])])],1),s("div",{staticClass:"timestamp"},[e._v(e._s(new Date(r.updatedAt).toLocaleString([],{hour:"2-digit",minute:"2-digit"})))])],1)]),s("v-col",{staticClass:"pa-0",attrs:{cols:"1"}},[s("v-avatar",{attrs:{color:"indigo",size:"40"}},[s("v-img",{attrs:{src:e.avatar}})],1)],1)],1):s("v-row",{staticClass:"justify-start bottom-border mx-0 py-3"},[s("v-col",{staticClass:"pa-0",attrs:{cols:"1"}},[s("v-avatar",{attrs:{color:"indigo",size:"40"}},[s("v-img",{attrs:{src:e.avatar}})],1)],1),s("v-col",{staticClass:"pl-8 py-0",attrs:{cols:"6"}},[s("div",{staticClass:"speech-bubble-self"},[s("v-row",{staticClass:"ma-0",staticStyle:{width:"100%"}},[s("v-col",{staticClass:"text-left"},[s("div",[e._v(e._s(r.message))])])],1),s("div",{staticClass:"timestamp"},[e._v(e._s(new Date(r.updatedAt).toLocaleString([],{hour:"2-digit",minute:"2-digit"})))])],1)])],1)],1)],1)],1)})),1):e._e(),s("v-row",{staticClass:"justify-center"},[s("v-col",{attrs:{cols:"10"}},[s("v-form",{ref:"form-"+t.id,refInFor:!0},[s("v-row",[s("v-col",{attrs:{cols:"12"}},[s("v-textarea",{attrs:{outlined:"",name:"input-7-4",label:"Draft a reply"},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}})],1),s("v-col",{attrs:{cols:"6"}},[s("v-file-input",{attrs:{accept:"video/mp4, video/ogg",placeholder:"Upload","prepend-icon":"mdi-video",label:"Reply Video"},model:{value:e.file,callback:function(t){e.file=t},expression:"file"}})],1),s("v-col",{attrs:{cols:"6"}})],1)],1)],1)],1),s("v-row",[s("v-col",[s("v-btn",{attrs:{large:"",color:"#ec5252",dark:""},on:{click:function(s){return e.create_post(s,t,r)}}},[e._v("Reply your student")])],1)],1)],1)],1)})),1)],1)],1)],1)],1):e._e()},Gt=[],Zt=(s("a434"),{create:function(e){var t=q();return t.defaults.headers.post["Content-Type"]="multipart/form-data",t.post("post/new",e)},list:function(e){return q().get("post/list?tid=".concat(e))},edit:function(e){var t=q();return t.defaults.headers.post["Content-Type"]="multipart/form-data",t.post("post/edit",e)},delete:function(e){return q().delete("post/del?pid=".concat(e))}}),Qt={name:"ShowCourseThread",props:["lesson_pos"],data:function(){return{avatar:"https://cdn.vuetifyjs.com/images/lists/2.jpg",threads:[],course:null,message:"",file:null,grade:0,requiredRules:[function(e){return!!e||"This field is required"}],currentThread:[this.lesson_pos]}},computed:Object(l["a"])({},Object(c["b"])(["user"])),methods:{adjustAspectRatioForFullScreen:function(e,t){var s=this.originalHeight/this.originalWidth,r=e*s;r>t?(this.videoHeight=t,this.videoWidth=t/s):r==t?(this.videoHeight=t,this.videoWidth=e):(this.videoHeight=r,this.videoWidth=e)},create_post:function(e,t,s){var r=this;return Object(D["a"])(regeneratorRuntime.mark((function e(){var n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r.$refs["form-".concat(t.id)][0].validate()){e.next=14;break}return n=new FormData,n.set("tid",t.id),n.set("message",r.message),n.set("grade",r.grade),n.append("video",r.file),e.next=8,Zt.create(n);case 8:o=e.sent,r.threads[s].posts.splice(r.threads[s].posts.length,0,o.data.post),r.file=null,r.message=null,e.next=15;break;case 14:return e.abrupt("return");case 15:case"end":return e.stop()}}),e)})))()}},mounted:function(){var e=Object(D["a"])(regeneratorRuntime.mark((function e(){var t,s,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,W.show(this.$route.params.course_id);case 2:t=e.sent,this.course=t.data.course,s=0;case 5:if(!(s<this.course.lessons.length)){e.next=14;break}return this.user.isStudent?this.$store.dispatch("setNotifications",this.$store.state.notifications-this.course.unreadTutorPost):this.$store.dispatch("setNotifications",this.$store.state.notifications-this.course.unreadStudentPost),e.next=9,Le.show(this.course.lessons[s].id,this.$route.params.student_id);case 9:r=e.sent,this.threads.push(r.data.thread);case 11:s++,e.next=5;break;case 14:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},Jt=Qt,es=(s("07ac9"),s("8212")),ts=s("cc20"),ss=Object(p["a"])(Jt,Yt,Gt,!1,null,"2cffcb34",null),rs=ss.exports;v()(ss,{VAvatar:es["a"],VBtn:g["a"],VChip:ts["a"],VCol:J["a"],VContainer:ee["a"],VExpansionPanel:Je["a"],VExpansionPanelContent:et["a"],VExpansionPanelHeader:tt["a"],VExpansionPanels:st["a"],VFileInput:rt["a"],VForm:de["a"],VImg:se["a"],VList:x["a"],VListItem:w["a"],VListItemContent:C["a"],VRow:re["a"],VTextarea:pt["a"]});var ns=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.course?s("div",[s("v-container",[s("v-row",{staticClass:"justify-center"},[s("v-col",{attrs:{cols:"12",md:"6"}},[s("v-row",{staticClass:"justify-center"},[s("v-col",{staticClass:"px-4"},[s("h2",{staticClass:"font-weight-bold"},[e._v("Checkout")])])],1),s("v-radio-group",{attrs:{mandatory:!0},model:{value:e.paymentMethod,callback:function(t){e.paymentMethod=t},expression:"paymentMethod"}},[s("v-radio",{attrs:{label:"Paypal",value:"paypal"}}),s("v-radio",{attrs:{label:"Credit Card",value:"credit card"}})],1),s("v-row",{staticClass:"justify-center",class:{hide:"paypal"==e.paymentMethod}},[s("v-col",{staticClass:"px-4"},[s("div",{attrs:{id:"dropin-container"}})])],1),s("v-row",[s("v-col",[s("v-card",{staticClass:"pa-3 px-10",attrs:{outlined:""}},[s("v-row",{staticClass:"px-3"},[s("v-col",[s("h2",{staticClass:"font-weight-bold"},[e._v("Summary")])])],1),s("v-row",{staticClass:"px-3"},[s("v-col",{staticClass:"px-4",attrs:{cols:"12"}},[s("p",{staticClass:"alignleft"},[e._v(e._s(e.course.name)+":")]),s("p",{staticClass:"alignright"},[e._v("S$ "+e._s(e.course.price))])]),s("v-col",{staticClass:"px-4",attrs:{cols:"12"}},[s("p",{staticClass:"alignleft"},[e._v("GST:")]),s("p",{staticClass:"alignright"},[e._v("S$ "+e._s((.07*e.course.price).toFixed(2)))]),s("div",{staticStyle:{clear:"both"}})])],1),s("v-divider",{staticClass:"px-3"}),s("v-row",{staticClass:"px-3"},[s("v-col",[s("p",{staticClass:"alignleft font-weight-bold"},[e._v("Total:")]),s("p",{staticClass:"alignright font-weight-bold"},[e._v("S$ "+e._s((e.course.price+.07*e.course.price).toFixed(2)))]),s("div",{staticStyle:{clear:"both"}})])],1),s("v-btn",{staticClass:"mb-5",class:{hide:"paypal"==e.paymentMethod},staticStyle:{width:"50%"},attrs:{large:"",color:"#ec5252",dark:""},on:{click:e.requestPaymentMethod}},[e._v("Complete Payment")]),s("v-row",{staticClass:"justify-center",class:{hide:"paypal"!=e.paymentMethod}},[s("v-col",[s("div",{attrs:{id:"paypal-button-container"}})])],1),s("div",{staticClass:"error",model:{value:e.error,callback:function(t){e.error=t},expression:"error"}},[e._v(e._s(e.error))])],1)],1)],1)],1)],1)],1)],1):e._e()},os=[],is=(s("b680"),{getClientToken:function(){return q().get("braintree-client-token")},createTransaction:function(e){return q().post("braintree-checkout",e)},createPaypalTransaction:function(e){return q().post("braintree-paypal-checkout",e)},getPaypalClientToken:function(){return q().get("paypal-client-token")},createOrder:function(e){return q().post("paypal-create-order",e)},captureOrder:function(e){return q().post("paypal-capture-order",e)}}),as={name:"Payment",data:function(){return{course:null,clientToken:"",dropinInstance:null,nonceObj:null,deviceData:null,transaction:null,error:null,paymentMethod:"paypal"}},methods:{togglePaymentMethod:function(){"paypal"==this.paymentMethod?this.paymentMethod="credit card":this.paymentMethod="paypal"},requestPaymentMethod:function(){var e=this;return Object(D["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.dropinInstance.requestPaymentMethod();case 2:return e.nonceObj=t.sent,t.next=5,is.createTransaction({amount:e.course.price,nonce:e.nonceObj.nonce,deviceData:e.deviceData});case 5:e.transaction=t.sent.data.result,e.transaction.success?e.subscribe():e.error=e.transaction.message;case 7:case"end":return t.stop()}}),t)})))()},subscribe:function(){var e=this;return Object(D["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(e.course.lessons.map(function(){var e=Object(D["a"])(regeneratorRuntime.mark((function e(t){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Le.create({lid:t.id});case 2:return s=e.sent,s.data.thread.posts=[],t.thread=s.data.thread,e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:return t.next=4,e.$store.dispatch("subscribe",{studentId:e.$store.state.user.id,courseId:e.course.id});case 4:e.$router.push("/course/show/".concat(e.course.id));case 5:case"end":return t.stop()}}),t)})))()}},mounted:function(){var e=Object(D["a"])(regeneratorRuntime.mark((function e(){var t,s,r,n,o,i,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,W.show(this.$route.params.course_id);case 2:return t=e.sent,this.course=t.data.course,e.next=6,is.getClientToken();case 6:return s=e.sent.data.clientToken,this.clientToken=s,e.next=10,window.braintree.dropin.create({authorization:s,container:"#dropin-container"});case 10:return r=e.sent,this.dropinInstance=r,e.next=14,window.braintree.client.create({authorization:s});case 14:return n=e.sent,e.next=17,window.braintree.dataCollector.create({client:n,paypal:!0});case 17:o=e.sent,this.deviceData=o.deviceData,i=document.createElement("script"),i.src="https://www.paypal.com/sdk/js?client-id=AepgsiQK_rhw-m-bTjjuZ5lRxPWadsmSzn9dH_Lsn8o5uzSsTHsIRuxfaCfyg0odhrZFxq6_qpsmu-P7&currency=SGD",i.addEventListener("load",(function(){window.paypal.Buttons({locale:"en_US",createOrder:function(){var e=Object(D["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,is.createOrder({amount:(a.course.price+.07*a.course.price).toFixed(2)});case 2:return t=e.sent.data.order.id,a.orderId=t,e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),onApprove:function(){var e=Object(D["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,is.captureOrder({orderId:a.orderId});case 2:t=e.sent.data.result,a.result=t,"COMPLETED"==a.result.status&&(alert("Success!"),a.subscribe());case 5:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),onError:function(e){console.log(e)}}).render("#paypal-button-container");var e=document.createElement("script");e.src="https://www.paypalobjects.com/js/external/connect/api.js",e.addEventListener("load",(function(){window.paypal.use(["login"],(function(e){e.render({appid:"AepgsiQK_rhw-m-bTjjuZ5lRxPWadsmSzn9dH_Lsn8o5uzSsTHsIRuxfaCfyg0odhrZFxq6_qpsmu-P7",authend:"sandbox",scopes:"openid",containerid:"connect-button",responseType:"code",locale:"en-us",buttonShape:"rectangle",buttonSize:"lg",returnurl:"https://example.com"})}))})),document.body.appendChild(e)})),document.body.appendChild(i);case 23:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},ls=as,cs=(s("0374"),Object(p["a"])(ls,ns,os,!1,null,"6a23dff3",null)),us=cs.exports;v()(cs,{VBtn:g["a"],VCard:Z["a"],VCol:J["a"],VContainer:ee["a"],VDivider:te["a"],VRadio:pe["a"],VRadioGroup:he["a"],VRow:re["a"]});var ds=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-container",[s("v-row",{staticClass:"justify-center"},[s("v-col",{attrs:{cols:"6"}},[s("span",{attrs:{id:"connect-button"}})])],1),s("v-row",{staticClass:"justify-center"},[s("v-col",{attrs:{cols:"6"}},[s("div",{attrs:{id:"paypal-button-container"}})])],1)],1)},ps=[],hs={name:"AdvancedPayment",data:function(){return{loaded:!1,paidFor:!1,course:{price:2,description:"leg lamp from that one movie"},isEligible:!0,orderId:"",result:null}},methods:{setLoaded:function(){var e=this;this.loaded=!0,window.paypal.Buttons({createOrder:function(){var t=Object(D["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,is.createOrder({amount:e.course.price});case 2:return s=t.sent.data.order.id,e.orderId=s,t.abrupt("return",s);case 5:case"end":return t.stop()}}),t)})));function s(){return t.apply(this,arguments)}return s}(),onApprove:function(){var t=Object(D["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,is.captureOrder({orderId:e.orderId});case 2:s=t.sent.data.result,e.result=s;case 4:case"end":return t.stop()}}),t)})));function s(){return t.apply(this,arguments)}return s}(),onError:function(e){console.log(e)}}).render("#paypal-button-container")}},mounted:function(){var e=Object(D["a"])(regeneratorRuntime.mark((function e(){var t,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=document.createElement("script"),t.src="https://www.paypal.com/sdk/js?client-id=AbwBSbdR82bJexDTQGyi-ZJ7jKRSAOsfmh651obC8P5TcAEr70Wan7xICW3eOoWFGwHtj-xOnZQbfyib&currency=SGD",t.addEventListener("load",(function(){window.paypal.Buttons({locale:"en_US",createOrder:function(){var e=Object(D["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,is.createOrder({amount:s.course.price});case 2:return t=e.sent.data.order.id,s.orderId=t,e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),onApprove:function(){var e=Object(D["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,is.captureOrder({orderId:s.orderId});case 2:t=e.sent.data.result,s.result=t,"COMPLETED"==s.result.status&&alert("Success!");case 5:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),onError:function(e){console.log(e)}}).render("#paypal-button-container");var e=document.createElement("script");e.src="https://www.paypalobjects.com/js/external/connect/api.js",e.addEventListener("load",(function(){window.paypal.use(["login"],(function(e){e.render({appid:"AepgsiQK_rhw-m-bTjjuZ5lRxPWadsmSzn9dH_Lsn8o5uzSsTHsIRuxfaCfyg0odhrZFxq6_qpsmu-P7",authend:"sandbox",scopes:"openid",containerid:"connect-button",responseType:"code",locale:"en-us",buttonShape:"rectangle",buttonSize:"lg",returnurl:"https://example.com"})}))})),document.body.appendChild(e)})),document.body.appendChild(t);case 4:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},vs=hs,ms=(s("7734"),Object(p["a"])(vs,ds,ps,!1,null,"689b7819",null)),fs=ms.exports;v()(ms,{VCol:J["a"],VContainer:ee["a"],VRow:re["a"]});var gs=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"score"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:!e.scoreLoading,expression:"!scoreLoading"}],ref:"scorediv",staticClass:"ma-0",staticStyle:{height:"220px",width:"1000px"},attrs:{id:"score"}}),s("v-btn",{on:{click:e.changeBars}},[e._v("Change Bars")])],1)},bs=[],xs=s("2938"),ws={name:"OSMD",data:function(){return{scoreLoading:!1,osmd:null,from:1,to:2}},methods:{changeBars:function(){var e=this;return Object(D["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.from+=2,e.to+=2,e.osmd.setOptions({drawFromMeasureNumber:e.from,drawUpToMeasureNumber:e.to}),console.log(e.osmd.graphic),t.next=6,e.osmd.render();case 6:console.log(e.osmd.graphic);case 7:case"end":return t.stop()}}),t)})))()}},mounted:function(){var e=Object(D["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return xs["OpenSheetMusicDisplay"].prototype.preCalculate=function(){if(!this.graphic)throw new Error("OpenSheetMusicDisplay: Before rendering a music sheet, please load a MusicXML file");this.drawer&&this.drawer.clear();var e=this.container.offsetWidth;this.rules.RenderSingleHorizontalStaffline&&(e=32767),console.log("[OSMD] render width: "+e),this.sheet.pageWidth=e/this.zoom/10,this.rules.PageFormat&&!this.rules.PageFormat.IsUndefined?(this.rules.PageHeight=this.sheet.pageWidth/this.rules.PageFormat.aspectRatio,console.log("[OSMD] PageHeight: "+this.rules.PageHeight)):(console.log("[OSMD] endless/undefined pageformat, id: "+this.rules.PageFormat.idString),this.rules.PageHeight=100001),this.graphic.reCalculate(),this.drawingParameters.drawCursors&&(this.graphic.Cursors.length=0),this.createOrRefreshRenderBackend(),this.needBackendUpdate=!1,this.drawer.setZoom(this.zoom),this.drawer.drawSheet(this.graphic),this.enableOrDisableCursor(this.drawingParameters.drawCursors),this.drawingParameters.drawCursors&&this.cursor&&this.cursor.update(),this.zoomUpdated=!1},this.osmd=new xs["OpenSheetMusicDisplay"](this.$refs.scorediv,{drawFromMeasureNumber:1,drawUpToMeasureNumber:2,fillEmptyMeasuresWithWholeRest:!0,drawComposer:!1,drawTitle:!1,renderSingleHorizontalStaffline:!0,drawPartNames:!1,autoResize:!1,drawMetronomeMarks:!1,drawingParameters:"compacttight"}),this.scoreLoading=!0,e.next=5,A.a.get("https://rhythm-academy.s3-ap-southeast-1.amazonaws.com/twinkle-twinkle-little-star.musicxml");case 5:return t=e.sent,e.next=8,this.osmd.load(t.data);case 8:return this.scoreLoading=!1,e.next=11,this.$nextTick();case 11:return console.log(this.osmd.graphic),e.next=14,this.osmd.render();case 14:console.log(this.osmd.graphic);case 15:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},_s=ws,ys=Object(p["a"])(_s,gs,bs,!1,null,null,null),Cs=ys.exports;v()(ys,{VBtn:g["a"]});var ks,Ss=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.course&&e.lesson?s("div",[s("v-container",{staticClass:"pa-0",attrs:{fluid:""}},[s("v-row",{attrs:{"no-gutters":""}},[s("v-col",{staticClass:"text-left pa-0",attrs:{cols:"9"}},[s("v-row",{staticClass:"ma-0",staticStyle:{width:"100%"}},[s("v-col",{staticClass:"pa-0",attrs:{id:"title"}},[s("h1",{staticClass:"font-weight-bold pl-8 py-2"},[e._v(e._s(e.course.name))])])],1),s("v-row",{staticClass:"ma-0",staticStyle:{width:"100%"}},[s("v-col",{staticClass:"pa-0"},[e.isVideoContent?s("video-player",{attrs:{exercise:this.lesson.exercises[0],videoSrc:e.src}}):e._e()],1)],1),e.user.isStudent?s("v-container",{attrs:{id:"dicussion"}},[s("v-row",{staticClass:"justify-center"},[s("v-col",{staticClass:"text-left pb-0",attrs:{cols:"11"}},[s("h1",{staticClass:"font-weight-bold pt-2 pl-4"},[e._v("Ask your tutor!")])]),e.lesson.thread?s("v-col",{staticClass:"pb-0",attrs:{cols:"11"}},[e.lesson.thread.posts?s("v-list",e._l(e.lesson.thread.posts,(function(t,r){return s("v-list-item",{key:t.id},[s("v-list-item-content",{staticClass:"pb-0"},[s("v-container",{staticClass:"pt-0 pb-4 px-0",attrs:{fluid:""}},[0==r||t.updatedAt.substring(0,10)!=e.lesson.thread.posts[r-1].updatedAt.substring(0,10)?s("v-row",{staticClass:"py-0"},[s("v-col",{staticClass:"py-0"},[s("v-chip",{staticStyle:{"font-size":"12px"},attrs:{label:"",color:"indigo darken-3",dark:""}},[e._v(e._s(new Date(t.updatedAt).toLocaleString([],{year:"numeric",month:"numeric",day:"numeric"})))])],1)],1):e._e(),s("v-row",{staticClass:"mt-5"},[s("v-col",{staticClass:"pb-0",staticStyle:{"margin-bottom":"-3px"}},[s("video",{attrs:{width:"100%",height:"auto",controls:""}},[s("source",{attrs:{src:t.videoUrl,type:"video/mp4"}}),e._v("Your browser does not support HTML video.")])])],1),t.UserId!=e.user.id?s("v-row",{staticClass:"justify-end bottom-border mx-0 py-3"},[s("v-col",{staticClass:"pr-8 py-0",attrs:{cols:"6"}},[s("div",{staticClass:"speech-bubble-other"},[s("v-row",{staticClass:"ma-0",staticStyle:{width:"100%"}},[s("v-col",{staticClass:"text-left"},[s("div",[e._v(e._s(t.message))])])],1),s("div",{staticClass:"timestamp"},[e._v(e._s(new Date(t.updatedAt).toLocaleString([],{hour:"2-digit",minute:"2-digit"})))])],1)]),s("v-col",{staticClass:"text-center pa-0",attrs:{cols:"1"}},[s("v-avatar",{attrs:{color:"grey",size:"40"}},[s("v-icon",[e._v("mdi-account")])],1)],1)],1):s("v-row",{staticClass:"justify-start bottom-border mx-0 py-3"},[s("v-col",{staticClass:"text-center pa-0",attrs:{cols:"1"}},[s("v-avatar",{attrs:{color:"grey",size:"40"}},[s("v-icon",[e._v("mdi-account")])],1)],1),s("v-col",{staticClass:"pl-8 py-0",attrs:{cols:"6"}},[s("div",{staticClass:"speech-bubble-self"},[s("v-row",{staticClass:"ma-0",staticStyle:{width:"100%"}},[s("v-col",{staticClass:"text-left"},[s("div",[e._v(e._s(t.message))])])],1),s("div",{staticClass:"timestamp"},[e._v(e._s(new Date(t.updatedAt).toLocaleString([],{hour:"2-digit",minute:"2-digit"})))])],1)])],1)],1)],1)],1)})),1):e._e()],1):e._e()],1),s("v-row",{staticClass:"justify-center"},[s("v-col",{staticClass:"pt-0",attrs:{cols:"11"}},[s("v-form",{ref:"form",staticClass:"px-4"},[s("v-row",[s("v-col",{staticClass:"pt-0",attrs:{cols:"12"}},[s("v-textarea",{attrs:{outlined:"",name:"input-7-4",label:"Type your thoughts here..."},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}})],1),s("v-col",{attrs:{cols:"6"}},[s("v-file-input",{attrs:{accept:"video/mp4, video/ogg",placeholder:"Upload","prepend-icon":"mdi-video",label:"Upload Video"},model:{value:e.file,callback:function(t){e.file=t},expression:"file"}})],1)],1),s("v-row",[s("v-col",[s("v-btn",{attrs:{large:"",color:"#ec5252",dark:""},on:{click:e.create_post}},[e._v("Submit practice video")])],1)],1)],1)],1)],1)],1):e._e()],1),s("v-col",{staticClass:"pa-0",class:{"full-height":e.fullHeight,"partial-height":!e.fullHeight},staticStyle:{"border-bottom":"1px solid #BDBDBD","border-left":"1px solid #BDBDBD",position:"fixed",right:"0"},attrs:{cols:"3"}},[s("h1",{staticClass:"font-weight-bold pl-4 py-2",staticStyle:{"background-color":"#EEEEEE"}},[e._v("Lessons")]),s("v-list",{staticClass:"py-0"},e._l(e.course.lessons,(function(t,r){return s("v-list-item",{key:r,staticClass:"px-0"},[t==e.lesson?s("v-expansion-panels",{staticClass:"px-0",attrs:{accordion:"",flat:"",hover:"",tile:"",dense:"",multiple:""},model:{value:e.opened,callback:function(t){e.opened=t},expression:"opened"}},[s("v-expansion-panel",[s("v-expansion-panel-header",{staticClass:"py-0 pl-4 pr-2",staticStyle:{"font-size":"16px","background-color":"#B2DFDB"}},[e._v(e._s(r+1)+". "+e._s(t.name))]),s("v-expansion-panel-content",{staticClass:"pa-0"},[s("v-list",{staticClass:"py-0"},[s("v-list-item-group",{staticClass:"py-0"},[t.exercises[0].videoUrl?s("v-list-item",{staticClass:"px-0",on:{click:function(t){e.src="video"}}},[s("v-list-item-content",[s("div",{staticClass:"pl-4 text-decoration-underline",staticStyle:{"font-size":"14px",color:"#00897B"}},[e._v("Explanation")])])],1):e._e(),t.exercises[0].demoUrl?s("v-list-item",{staticClass:"px-0",on:{click:function(t){e.src="demo"}}},[s("v-list-item-content",[s("div",{staticClass:"pl-4 text-decoration-underline",staticStyle:{"font-size":"14px",color:"#00897B"}},[e._v("Demonstration")])])],1):e._e()],1)],1)],1)],1)],1):s("v-list-item-content",{staticClass:"py-0 link"},[s("a",{staticClass:"link pl-4 py-5",staticStyle:{"font-size":"16px"},on:{click:function(s){return e.goToLesson(s,t)}}},[e._v(e._s(r+1)+". "+e._s(t.name))])])],1)})),1)],1)],1),s("v-row",{directives:[{name:"show",rawName:"v-show",value:e.useScore,expression:"useScore"}],staticClass:"justify-center"},[e.useXml?s("v-col",{attrs:{cols:"12"}},[s("div",{attrs:{id:"osmd-wrapper-"+e.lesson.id}})]):s("v-col",{attrs:{cols:"12"}},[s("div",{attrs:{id:"vexflow-wrapper-"+e.lesson.id}})])],1)],1)],1):e._e()},Vs=[],Ts=(s("7db0"),s("c975"),s("4160"),s("caad"),s("90d7"),s("2532"),s("5319"),s("159b"),s("ade3")),Os=s("8cc4"),Ps=s.n(Os),Is=(ks={lowPass:new Ps.a.Filter({frequency:11e3}),noise:new Ps.a.NoiseSynth({volume:-12,noise:{type:"pink",playbackRate:3},envelope:{attack:.001,decay:.13,sustain:0,release:.03}}),poly:new Ps.a.PolySynth(6,Ps.a.Synth,{volume:-10,oscillator:{partials:[0,2,3,4]},envelope:{attack:.001,decay:.17,sustain:0,release:.05}}),freqEnv:[],started:!1,player:null},Object(Ts["a"])(ks,"started",!1),Object(Ts["a"])(ks,"initiated",!1),Object(Ts["a"])(ks,"idx",0),Object(Ts["a"])(ks,"notesToEvents",(function(e){var t=[],s=0;return e.forEach((function(e){var r=e.split("/")[2],n=!1,o=!1;(r.includes("d")||r.includes("r"))&&(r.includes("r")&&(r=r.replace("r",""),n=!0),r.includes("d")&&(r=r.replace("d",""),o=!0)),r+="n",o&&(r+="."),n||t.push(s),s+=Ps.a.Time(r)})),t})),Object(Ts["a"])(ks,"init",(function(){var e=this;return Object(D["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.initiated){t.next=2;break}return t.abrupt("return");case 2:if(e.initiated=!0,e.poly.voices.forEach((function(t,s){var r=new Ps.a.FrequencyEnvelope({attack:.001,decay:.08,release:.08,baseFrequency:Ps.a.Frequency("A4"),octaves:Math.log2(13),releaseCurve:"exponential",exponent:3.5});r.connect(t.oscillator.frequency),e.freqEnv[s]=r})),e.noise.connect(e.lowPass),e.lowPass.toMaster(),e.poly.toMaster(),null!=e.player){t.next=12;break}return e.player=new Ps.a.Player,t.next=11,e.player.load("https://cdn.jsdelivr.net/gh/R-D-D-D/Ground-Zero/web_frontend/src/resources/metronome_click.mp3");case 11:e.player.toMaster();case 12:case"end":return t.stop()}}),t)})))()})),Object(Ts["a"])(ks,"playSequence",(function(e,t,s,r,n){this.createAndRecordSequence(e,t,s,r,void 0,!0,n)})),Object(Ts["a"])(ks,"createAndRecordSequence",(function(e,t,s,r,n,o,i){var a=this;if(!this.started&&0!=r){this.started=!0,Ps.a.Transport.bpm.value=parseInt(t),this.notesToEvents([]);var l=e.split("/");Ps.a.Transport.timeSignature=[parseInt(l[0]),parseInt(l[1])],Ps.a.Context.latencyHint="fastest";var c=new Ps.a.Part((function(e){a.poly.voices.forEach((function(t,s){a.freqEnv[s].triggerAttackRelease("16n",e),t.envelope.triggerAttackRelease("16n",e)})),a.noise.triggerAttackRelease("16n",e)}),this.notesToEvents(s));c.start("1m");var u=r+"m";if(Ps.a.Transport.scheduleRepeat((function(){a.player.restart()}),"4n","0m"),o)Ps.a.Transport.schedule((function(e){console.log("stopped"),Ps.a.Transport.stop(),Ps.a.Transport.cancel(0),a.started=!1,a.idx=0}),u),Ps.a.Transport.start();else{var d=Ps.a.context,p=d.createMediaStreamDestination(),h=new MediaRecorder(p.stream);this.lowPass.connect(p),this.poly.connect(p),this.player.connect(p);var v=[];h.ondataavailable=function(e){return v.push(e.data)},h.onstop=function(e){var t=new Blob(v,{type:"audio/ogg; codecs=opus"});n.src=URL.createObjectURL(t)},Ps.a.Transport.schedule((function(e){h.stop(),console.log("stopped"),Ps.a.Transport.stop(),Ps.a.Transport.cancel(0),a.started=!1,a.idx=0}),u),h.start(),Ps.a.Transport.start()}}})),s("2909")),Bs={generateRhythmString:function(e){return void 0!=e?e.id.toString()+"&"+e.title+"&"+e.timeSignature+"&"+e.noOfBars.toString()+"&"+e.bpm.toString()+"&"+e.rhythm.join("-"):""},generateRhythmsString:function(e){for(var t="",s=0;s<e.length;s++)s==e.length-1?t+=this.generateRhythmString(e[s]):t+=this.generateRhythmString(e[s])+"$";return t},parseRhythmString:function(e){var t=e.split("&"),s={id:parseInt(t[0]),title:t[1],timeSignature:t[2],noOfBars:t[3],bpm:t[4],rhythm:t[5]?t[5].split("-"):[]};return s},parseRhythmsString:function(e){var t=this;if(0==e.length)return[];var s=e.split("$").map((function(e){return t.parseRhythmString(e)}));return s},cloneRhythms:function(e){for(var t=[],s=0;s<e.length;s++){var r={};r.id=e[s].id,r.title=e[s].title,r.timeSignature=e[s].timeSignature,r.noOfBars=e[s].noOfBars,r.bpm=e[s].bpm,r.rhythm=Object(Is["a"])(e[s].rhythm),t.push(r)}return t},cloneLesson:function(e){return{id:e.id,name:e.name,TutorId:e.TutorId,rhythms:this.cloneRhythms(e.rhythms),date:e.date}}},Ls=s("f0e2"),Es=(s("6922"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("video",{ref:"videoPlayer",staticClass:"vjs-big-play-centered video-js",attrs:{id:"video"}}),s("v-row",{directives:[{name:"show",rawName:"v-show",value:!e.hide,expression:"!hide"}],staticClass:"bpm-control pt-2",attrs:{id:"slider"}},[s("v-icon",{attrs:{color:"white",large:""}},[e._v("$vuetify.icons.custom_bpm")]),s("v-slider",{staticClass:"pb-2",attrs:{min:"20",max:"180",vertical:"",color:"white","track-color":"rgba(115, 133, 159, 0.5)","thumb-label":"always"},model:{value:e.playbackBpm,callback:function(t){e.playbackBpm=t},expression:"playbackBpm"}})],1)],1)}),Rs=[],Ms={name:"VideoPlayer",props:["exercise","videoSrc"],data:function(){return{numberOfBars:null,bpm:null,timeSignature:null,description:"",melody:[],useScore:!1,useXml:!1,notesInBars:null,playbackBpm:0,videoHandler:null,player:null,hide:!0,timePerTwoBars:0,timePerBar:0,demoStartTime:0,demoEndTime:null,currentDisplayedBar:0,videoOsmd:null,from:1,to:2}},methods:{timeUpdated:function(){var e=this.player.currentTime(),t=e-this.demoStartTime,s=Math.floor(t/this.timePerTwoBars);s!=this.currentDisplayedBar&&(s>=0&&s<Math.floor(this.numberOfBars/2)?(this.currentDisplayedBar=s,this.videoHandler.importNotes(this.notesInBars[2*s].concat(this.notesInBars[2*s+1]),this.timeSignature)):s<0&&0!=this.currentDisplayedBar?(this.currentDisplayedBar=0,this.videoHandler.importNotes(this.notesInBars[0].concat(this.notesInBars[1]),this.timeSignature)):s>Math.floor(this.numberOfBars/2)&&(this.numberOfBars<2?(this.currentDisplayedBar=0,this.videoHandler.importNotes(this.notesInBars[0].concat(this.notesInBars[1]),this.timeSignature)):(this.currentDisplayedBar=Math.floor(this.numberOfBars/2),this.videoHandler.importNotes(this.notesInBars[this.numberOfBars-1].concat(this.notesInBars[this.numberOfBars-1]),this.timeSignature))))},timeUpdatedOsmd:function(){var e=this;return Object(D["a"])(regeneratorRuntime.mark((function t(){var s,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(s=e.player.currentTime(),r=s-e.demoStartTime,n=Math.floor(r/e.timePerTwoBars),n==e.currentDisplayedBar){t.next=25;break}if(!(n>=0&&n<Math.floor(e.numberOfBars/2))){t.next=12;break}return console.log(n),e.videoOsmd.setOptions({drawFromMeasureNumber:2*n+1,drawUpToMeasureNumber:2*n+2}),e.currentDisplayedBar=n,t.next=10,e.videoOsmd.render();case 10:t.next=25;break;case 12:if(!(n<0&&0!=e.currentDisplayedBar)){t.next=20;break}return console.log(n),e.videoOsmd.setOptions({drawFromMeasureNumber:1,drawUpToMeasureNumber:2}),e.currentDisplayedBar=0,t.next=18,e.videoOsmd.render();case 18:t.next=25;break;case 20:if(!(n>Math.floor(e.numberOfBars/2))){t.next=25;break}return console.log(n,"from third clause"),e.numberOfBars<2?(e.videoOsmd.setOptions({drawFromMeasureNumber:0,drawUpToMeasureNumber:0}),e.currentDisplayedBar=0):(e.videoOsmd.setOptions({drawFromMeasureNumber:e.numberOfBars-1,drawUpToMeasureNumber:e.numberOfBars}),e.currentDisplayedBar=Math.floor((s-e.demoStartTime)/e.timePerTwoBars)),t.next=25,e.videoOsmd.render();case 25:case"end":return t.stop()}}),t)})))()},drawOsmdScores:function(){var e=this;return Object(D["a"])(regeneratorRuntime.mark((function t(){var s,r,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=document.createElement("div"),s.setAttribute("id","video-overlay-background"),s.style.position="absolute",s.style.background="#FAFAFA",s.style.top="0",s.style.left="0",s.style.right="0",s.style.height="130px",s.style.overflow="hidden",r=document.createElement("div"),r.setAttribute("id","video-osmd-wrapper"),r.style.position="absolute",r.style.background="#FAFAFA",r.style.top="0",r.style.left="0",r.style.right="0",n=document.createElement("div"),s.appendChild(r),r.appendChild(n),document.getElementById("video").appendChild(s),e.videoOsmd=new xs["OpenSheetMusicDisplay"](n,{drawFromMeasureNumber:e.from,drawUpToMeasureNumber:e.to,drawComposer:!1,drawTitle:!1,renderSingleHorizontalStaffline:!0,drawPartNames:!1,autoResize:!1,drawMetronomeMarks:!1,backend:"Canvas",drawingParameters:"compacttight"}),t.next=23,A.a.get(e.exercise.musicXmlUrl);case 23:return o=t.sent,t.next=26,e.videoOsmd.load(o.data);case 26:return t.next=28,e.$nextTick();case 28:return e.videoOsmd.zoom=1.2,t.next=31,e.videoOsmd.render();case 31:console.log(e.videoOsmd.graphic),console.log(e.videoOsmd.graphic.music);case 33:case"end":return t.stop()}}),t)})))()},drawScores:function(){var e=document.createElement("div");e.setAttribute("id","video-vexflow-wrapper"),e.style.position="absolute",e.style.background="#FAFAFA",e.style.top="0",e.style.left="0",e.style.right="0",this.videoHandler=new Ge["a"].Handler("video-vexflow-wrapper",{canEdit:!1,numberOfStaves:2,lessStaveHeight:!0,canvasProperties:{id:"video-vexflow-wrapper-canvas",width:this.$refs.videoPlayer.offsetWidth,height:80*Ge["a"].scale,tabindex:1}},e).init(),this.notesInBars=this.videoHandler.notesToBars(this.melody,this.timeSignature),this.videoHandler.importNotes(this.notesInBars[0].concat(this.notesInBars[1]),this.timeSignature),document.getElementById("video").appendChild(e)}},watch:{playbackBpm:function(e){this.bpm&&this.player.playbackRate(e/this.bpm)},videoSrc:function(e){"video"==e&&this.exercise.videoUrl?this.player.src()!=this.exercise.videoUrl&&this.player.src(this.exercise.videoUrl):"demo"==e&&this.exercise.demoUrl&&this.player.src()!=this.exercise.demoUrl&&this.player.src(this.exercise.demoUrl)}},mounted:function(){var e=Object(D["a"])(regeneratorRuntime.mark((function e(){var t,s,r,n,o=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t="",t=this.exercise.videoUrl||this.exercise.demoUrl?this.exercise.videoUrl?this.exercise.videoUrl:this.exercise.demoUrl:"undefined",s=Object(Ls["default"])(this.$refs.videoPlayer,{controls:!0,fluid:!0,sources:[{src:t,type:"video/mp4"}],playbackRates:[.8,.9,1,1.1,1.2],poster:this.exercise.demoPosterUrl?this.exercise.demoPosterUrl:null},(function(){s.hotkeys({volumeStep:.1,seekStep:2,enableModifiersForNumbers:!1,enableHoverScroll:!0}),o.exercise.useScore&&(s.on("userinactive",(function(){s.paused()?o.hide=!1:o.hide=!0})),s.on("useractive",(function(){o.hide=!1})),s.on("play",(function(){o.hide=!1})),s.on("firstplay",(function(){o.hide=!1})),s.on("ratechange",(function(){o.playbackBpm=o.bpm*o.player.playbackRate()})),o.exercise.useXml?s.on("timeupdate",(function(e){o.timeUpdatedOsmd(e)})):s.on("timeupdate",(function(e){o.timeUpdated(e)})))})),this.player=s,r=this.exercise,!r.useScore){e.next=31;break}if(this.useScore=r.useScore,this.useXml=r.useXml,this.bpm=parseInt(r.bpm),this.playbackBpm=this.bpm,this.demoStartTime=r.demoStartTime,!r.useXml){e.next=19;break}return e.next=14,this.drawOsmdScores();case 14:n=this.videoOsmd.sheet.sourceMeasures[0].activeTimeSignature,this.timeSignature="".concat(n.numerator,"/").concat(n.denominator),this.numberOfBars=this.videoOsmd.sheet.sourceMeasures.length,e.next=23;break;case 19:this.melody=r.melody.split("-"),this.timeSignature=r.timeSignature,this.numberOfBars=parseInt(r.numberOfBars),this.drawScores();case 23:this.timePerBar=parseInt(this.timeSignature.split("/")[0])/this.bpm*60,this.timePerTwoBars=2*this.timePerBar,this.demoEndTime=this.demoStartTime+this.timePerBar*this.numberOfBars,document.getElementById("video").appendChild(document.getElementById("slider")),document.getElementsByClassName("v-slider__track-container")[0].style.width="5px",document.getElementsByClassName("v-slider__thumb-label")[0].style.color="black",document.getElementsByClassName("v-slider__thumb-label")[0].style.boxShadow="0px 0px 5px black",this.hide=!1;case 31:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},Ns=Ms,Us=(s("e80c"),Object(p["a"])(Ns,Es,Rs,!1,null,"d34d6318",null)),Ds=Us.exports;v()(Us,{VIcon:b["a"],VRow:re["a"],VSlider:ot["a"]});var js={name:"ShowLesson",components:{"video-player":Ds},data:function(){return{numberOfBars:null,bpm:null,timeSignature:null,disable:!0,save_btn_loading:!1,add_btn_loading:!1,description:"",melody:[],useScore:!1,useXml:!1,notesInBars:null,playbackBpm:0,handler:{},videoHandler:null,thread:null,dialog:!1,requiredRules:[function(e){return!!e||"This field is required"}],message:null,file:null,grade:null,avatar:"https://cdn.vuetifyjs.com/images/lists/2.jpg",error:null,hide:!0,timePerTwoBars:0,timePerBar:0,demoStartTime:0,demoEndTime:null,currentDisplayedBar:0,isVideoContent:!0,osmd:null,videoOsmd:null,from:1,to:2,selected:null,course:null,lesson:null,fullHeight:!1,opened:[0],src:"video"}},watch:{bpm:function(e){this.bpm_label="BPM: "+e},no_bars:function(e){this.bars_label="No. Bars: "+e},"$route.params.lesson_id":function(e){this.$router.go()}},computed:Object(l["a"])({tutor:function(){return this.user.isStudent?this.$store.getters.tutorFromSubscribedTutors:null},is_student:function(){return this.user.isStudent}},Object(c["b"])(["user","students","subscribedTutors"])),methods:{timeUpdated:function(e){var t=this.player.currentTime(),s=t-this.demoStartTime,r=Math.floor(s/this.timePerTwoBars);r!=this.currentDisplayedBar&&(r>=0&&r<Math.floor(this.numberOfBars/2)?(this.currentDisplayedBar=r,this.videoHandler.importNotes(this.notesInBars[2*r].concat(this.notesInBars[2*r+1]),this.timeSignature)):r<0&&0!=this.currentDisplayedBar?(this.currentDisplayedBar=0,this.videoHandler.importNotes(this.notesInBars[0].concat(this.notesInBars[1]),this.timeSignature)):r>Math.floor(this.numberOfBars/2)&&(this.numberOfBars<2?(this.currentDisplayedBar=0,this.videoHandler.importNotes(this.notesInBars[0].concat(this.notesInBars[1]),this.timeSignature)):(this.currentDisplayedBar=Math.floor(this.numberOfBars/2),this.videoHandler.importNotes(this.notesInBars[this.numberOfBars-1].concat(this.notesInBars[this.numberOfBars-1]),this.timeSignature))))},timeUpdatedOsmd:function(e){var t=this;return Object(D["a"])(regeneratorRuntime.mark((function e(){var s,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s=t.player.currentTime(),r=s-t.demoStartTime,n=Math.floor(r/t.timePerTwoBars),n==t.currentDisplayedBar){e.next=25;break}if(!(n>=0&&n<Math.floor(t.numberOfBars/2))){e.next=12;break}return console.log(n),t.videoOsmd.setOptions({drawFromMeasureNumber:2*n+1,drawUpToMeasureNumber:2*n+2}),t.currentDisplayedBar=n,e.next=10,t.videoOsmd.render();case 10:e.next=25;break;case 12:if(!(n<0&&0!=t.currentDisplayedBar)){e.next=20;break}return console.log(n),t.videoOsmd.setOptions({drawFromMeasureNumber:1,drawUpToMeasureNumber:2}),t.currentDisplayedBar=0,e.next=18,t.videoOsmd.render();case 18:e.next=25;break;case 20:if(!(n>Math.floor(t.numberOfBars/2))){e.next=25;break}return console.log(n,"from third clause"),t.numberOfBars<2?(t.videoOsmd.setOptions({drawFromMeasureNumber:0,drawUpToMeasureNumber:0}),t.currentDisplayedBar=0):(t.videoOsmd.setOptions({drawFromMeasureNumber:t.numberOfBars-1,drawUpToMeasureNumber:t.numberOfBars}),t.currentDisplayedBar=Math.floor((s-t.demoStartTime)/t.timePerTwoBars)),e.next=25,t.videoOsmd.render();case 25:case"end":return e.stop()}}),e)})))()},update_rhythms:function(){var e=this;return Object(D["a"])(regeneratorRuntime.mark((function t(){var s,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.save_btn_loading=!0,s=e.lesson.rhythms.indexOf(e.active_rhythm),r={id:e.active_rhythm.id,title:e.active_rhythm_title,timeSignature:e.time_signature,noOfBars:e.no_bars,bpm:e.bpm,rhythm:e.handler.exportNotes()},n=Bs.cloneLesson(e.lesson),n.rhythms[s]=r,n.rhythms=Bs.generateRhythmsString(n.rhythms),t.next=8,e.$store.dispatch("editRhythm",{lesson:e.lesson,newLesson:n});case 8:e.save_btn_loading=!1,e.display_rhythm({},e.lesson.rhythms[s]);case 10:case"end":return t.stop()}}),t)})))()},enable_save_btn:function(){this.disable=!1},create_post:function(){var e=this;return Object(D["a"])(regeneratorRuntime.mark((function t(){var s,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.$refs.form.validate()){t.next=14;break}return s=new FormData,s.set("tid",e.lesson.thread.id),e.message&&s.set("message",e.message),e.grade&&s.set("grade",parseInt(e.grade)),e.file&&s.append("video",e.file),t.next=8,Zt.create(s);case 8:r=t.sent,e.lesson.thread.posts.splice(e.lesson.thread.posts.length,0,r.data.post),e.message="",e.file=null,t.next=15;break;case 14:return t.abrupt("return");case 15:case"end":return t.stop()}}),t)})))()},drawOsmdScores:function(){var e=this;return Object(D["a"])(regeneratorRuntime.mark((function t(){var s,r,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=document.createElement("div"),s.setAttribute("id","video-overlay-background-".concat(e.lesson.id)),s.style.position="absolute",s.style.background="#FAFAFA",s.style.top="0",s.style.left="0",s.style.right="0",s.style.height="130px",s.style.overflow="hidden",r=document.createElement("div"),r.setAttribute("id","video-osmd-wrapper-".concat(e.lesson.id)),r.style.position="absolute",r.style.background="#FAFAFA",r.style.top="0",r.style.left="0",r.style.right="0",n=document.createElement("div"),s.appendChild(r),r.appendChild(n),document.getElementById("video-".concat(e.lesson.id)).appendChild(s),e.videoOsmd=new xs["OpenSheetMusicDisplay"](n,{drawFromMeasureNumber:e.from,drawUpToMeasureNumber:e.to,drawComposer:!1,drawTitle:!1,renderSingleHorizontalStaffline:!0,drawPartNames:!1,autoResize:!1,drawMetronomeMarks:!1,backend:"Canvas",drawingParameters:"compacttight"}),t.next=23,A.a.get(e.lesson.exercises[0].musicXmlUrl);case 23:return o=t.sent,t.next=26,e.videoOsmd.load(o.data);case 26:return t.next=28,e.$nextTick();case 28:return e.videoOsmd.zoom=1.2,t.next=31,e.videoOsmd.render();case 31:return console.log(e.videoOsmd.graphic),console.log(e.videoOsmd.graphic.music),e.osmd=new xs["OpenSheetMusicDisplay"]("osmd-wrapper-".concat(e.lesson.id),{drawPartNames:!1,drawComposer:!1}),t.next=36,e.osmd.load(o.data);case 36:return t.next=38,e.$nextTick();case 38:return e.osmd.zoom=1.2,t.next=41,e.osmd.render();case 41:case"end":return t.stop()}}),t)})))()},drawScores:function(e){this.user.isStudent?this.handler=new Ge["a"].Handler("vexflow-wrapper-".concat(this.lesson.id),{numberOfStaves:parseInt(this.lesson.exercises[0].numberOfBars),canEdit:!1}).init():(console.log("vexflow-wrapper-".concat(this.lesson.id)),console.log(document.getElementById("vexflow-wrapper-".concat(this.lesson.id))),this.handler=new Ge["a"].Handler("vexflow-wrapper-".concat(this.lesson.id),{numberOfStaves:parseInt(this.lesson.exercises[0].numberOfBars)}).init()),this.handler.importNotes(this.melody,this.timeSignature),this.notesInBars=this.handler.notesToBars(this.melody,this.timeSignature);var t=document.createElement("div");t.setAttribute("id","video-vexflow-wrapper-".concat(this.lesson.id)),t.style.position="absolute",t.style.background="#FAFAFA",t.style.top="0",t.style.left="0",t.style.right="0",this.videoHandler=new Ge["a"].Handler("video-vexflow-wrapper-".concat(this.lesson.id),{canEdit:!1,numberOfStaves:2,lessStaveHeight:!0,canvasProperties:{id:"video-vexflow-wrapper-".concat(this.lesson.id)+"-canvas",width:this.$refs.videoPlayer.offsetWidth,height:80*Ge["a"].scale,tabindex:1}},t).init(),this.videoHandler.importNotes(this.notesInBars[0].concat(this.notesInBars[1]),this.timeSignature),document.getElementById("video-".concat(this.lesson.id)).appendChild(t)},goToLesson:function(e,t){this.$router.push({name:"showlesson",params:{course_id:this.course.id,lesson_id:t.id,course:this.course,lesson:t}})}},created:function(){var e=Object(D["a"])(regeneratorRuntime.mark((function e(){var t,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.course&&this.lesson){e.next=15;break}return e.next=3,W.show(this.$route.params.course_id);case 3:return t=e.sent,e.prev=4,e.next=7,Promise.all(t.data.course.lessons.map(function(){var e=Object(D["a"])(regeneratorRuntime.mark((function e(r){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=null,s.$store.dispatch("setNotifications",s.$store.state.notifications-t.data.course.unreadTutorPost),e.next=4,Le.show(r.id,s.user.id);case 4:return n=e.sent,r.thread=n.data.thread,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 7:t.data.course.lessons=e.sent,this.course=t.data.course,e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](4),console.log(e.t0);case 14:this.lesson=this.course.lessons.find((function(e){return e.id==s.$route.params.lesson_id}));case 15:this.selected=this.course.lessons.indexOf(this.lesson),this.lesson.exercises[0].videoUrl||this.lesson.exercises[0].demoUrl?this.lesson.exercises[0].videoUrl?this.src="video":this.src="demo":(this.isVideoContent=!1,this.src="undefined"),window.addEventListener("scroll",z.a.debounce((function(){0==window.pageYOffset?s.fullHeight=!1:window.pageYOffset>64&&(s.fullHeight=!0)}),200));case 18:case"end":return e.stop()}}),e,this,[[4,11]])})));function t(){return e.apply(this,arguments)}return t}(),beforeDestroy:function(){this.player&&this.player.dispose()}},As=js,Fs=(s("e550"),Object(p["a"])(As,Ss,Vs,!1,null,"bd050458",null)),$s=Fs.exports;v()(Fs,{VAvatar:es["a"],VBtn:g["a"],VChip:ts["a"],VCol:J["a"],VContainer:ee["a"],VExpansionPanel:Je["a"],VExpansionPanelContent:et["a"],VExpansionPanelHeader:tt["a"],VExpansionPanels:st["a"],VFileInput:rt["a"],VForm:de["a"],VIcon:b["a"],VList:x["a"],VListItem:w["a"],VListItemContent:C["a"],VListItemGroup:_["a"],VRow:re["a"],VTextarea:pt["a"]});var Hs=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.course?s("v-container",[s("v-row",{staticClass:"justify-center"},[s("v-col",{attrs:{cols:"12"}},[s("v-card",{staticClass:"text-left mb-12",attrs:{outlined:""}},[s("v-card-title",{staticClass:"display-1"},[e._v("Course Info")]),s("v-divider"),s("v-card-text",[s("v-form",{ref:"courseForm"},[s("v-row",[s("v-col",{attrs:{cols:"12",md:"4"}},[s("v-text-field",{attrs:{label:"Title*",name:"title",type:"text",outlined:"",clearable:"",color:"indigo"},model:{value:e.newCourse.name,callback:function(t){e.$set(e.newCourse,"name",t)},expression:"newCourse.name"}})],1),s("v-col",{attrs:{cols:"12",md:"4"}},[s("v-text-field",{attrs:{label:"Price*",name:"price","prepend-icon":"mdi-currency-usd",rules:e.priceRules,outlined:"",clearable:"",color:"indigo"},model:{value:e.newCourse.price,callback:function(t){e.$set(e.newCourse,"price",t)},expression:"newCourse.price"}})],1),s("v-col",{attrs:{cols:"12",md:"4"}},[s("v-text-field",{attrs:{label:"Tagline",name:"tagline",outlined:"",clearable:"",color:"indigo"},model:{value:e.newCourse.tagline,callback:function(t){e.$set(e.newCourse,"tagline",t)},expression:"newCourse.tagline"}})],1)],1),s("v-row",[s("v-col",{attrs:{cols:"12"}},[s("v-textarea",{attrs:{label:"Description","auto-grow":"",outlined:"",color:"indigo"},model:{value:e.newCourse.description,callback:function(t){e.$set(e.newCourse,"description",t)},expression:"newCourse.description"}})],1)],1),s("v-row",[s("v-col",{attrs:{cols:"12",md:"4"}},[s("v-select",{attrs:{label:"Level",items:e.levels,outlined:"",color:"indigo"},model:{value:e.newCourse.level,callback:function(t){e.$set(e.newCourse,"level",t)},expression:"newCourse.level"}})],1),s("v-col",{attrs:{cols:"12",md:"4"}},[s("v-select",{attrs:{label:"Instrument",items:e.instruments,outlined:"",color:"indigo"},model:{value:e.newCourse.instrument,callback:function(t){e.$set(e.newCourse,"instrument",t)},expression:"newCourse.instrument"}})],1),s("v-col",{attrs:{cols:"12",md:"4"}},[s("v-select",{attrs:{label:"Language",items:e.languages,outlined:"",color:"indigo"},model:{value:e.newCourse.language,callback:function(t){e.$set(e.newCourse,"language",t)},expression:"newCourse.language"}})],1)],1),s("v-row",[s("v-col",{attrs:{cols:"12",md:"6"}},[s("v-file-input",{attrs:{accept:"video/mp4, video/ogg",placeholder:e.course.previewVideoUrl?e.course.previewVideoUrl.split("/")[6]:"Upload a preview video, if none is supplied, the first lesson will be displayed as preview video","prepend-icon":"mdi-video",label:"Preview Video",outlined:"",color:"indigo"},model:{value:e.newCourse.previewVideo,callback:function(t){e.$set(e.newCourse,"previewVideo",t)},expression:"newCourse.previewVideo"}})],1),s("v-col",{attrs:{cols:"12",md:"6"}},[s("v-file-input",{attrs:{accept:"image/*",placeholder:e.course.coverPhotoUrl?e.course.coverPhotoUrl.split("/")[6]:"Choose coverpage for your newCourse","prepend-icon":"mdi-image",label:"Cover Photo",rules:e.requiredRules,outlined:"",color:"indigo"},model:{value:e.newCourse.coverPhoto,callback:function(t){e.$set(e.newCourse,"coverPhoto",t)},expression:"newCourse.coverPhoto"}})],1)],1),s("v-row",[s("v-col",{attrs:{cols:"12"}},[s("div",{staticStyle:{"font-size":"16px"}},[e._v("What will your students learn from the newCourse?")])]),e._l(e.newCourse.learningPoints,(function(t,r){return s("v-col",{staticClass:"py-1",attrs:{cols:"12"}},[s("v-text-field",{attrs:{color:"indigo",label:"Example: How to use pen tool in Photoshop",name:"tagline",outlined:"",clearable:"",dense:"","hide-details":"",rules:e.alphanumricRules},model:{value:e.newCourse.learningPoints[r],callback:function(t){e.$set(e.newCourse.learningPoints,r,t)},expression:"newCourse.learningPoints[idx]"}})],1)})),s("v-col",{attrs:{cols:"12"}},[s("v-btn",{attrs:{color:"indigo",text:""},on:{click:e.addLearningPoint}},[e._v("+ Add an answer")])],1)],2),s("v-row",[s("v-col",{attrs:{cols:"12"}},[s("div",{staticStyle:{"font-size":"16px"}},[e._v("Who are this newCourse for?")])]),e._l(e.newCourse.targetAudiences,(function(t,r){return s("v-col",{staticClass:"py-1",attrs:{cols:"12"}},[s("v-text-field",{attrs:{color:"indigo",label:"Example: Kids 6-8 years old",name:"tagline",outlined:"",clearable:"",dense:"","hide-details":"",rules:e.alphanumricRules},model:{value:e.newCourse.targetAudiences[r],callback:function(t){e.$set(e.newCourse.targetAudiences,r,t)},expression:"newCourse.targetAudiences[idx]"}})],1)})),s("v-col",{attrs:{cols:"12"}},[s("v-btn",{attrs:{color:"indigo",text:""},on:{click:e.addTargetAudience}},[e._v("+ Add an answer")])],1)],2),s("v-row",[s("v-col",{attrs:{cols:"12"}},[s("div",{staticStyle:{"font-size":"18px"}},[e._v("What are the requirements?")])]),e._l(e.newCourse.requirements,(function(t,r){return s("v-col",{staticClass:"py-1",attrs:{cols:"12"}},[s("v-text-field",{attrs:{color:"indigo",label:"Example: Photoshop software",name:"tagline",outlined:"",clearable:"",dense:"","hide-details":"",rules:e.alphanumricRules},model:{value:e.newCourse.requirements[r],callback:function(t){e.$set(e.newCourse.requirements,r,t)},expression:"newCourse.requirements[idx]"}})],1)})),s("v-col",{attrs:{cols:"12"}},[s("v-btn",{attrs:{color:"indigo",text:""},on:{click:e.addRequirement}},[e._v("+ Add an answer")])],1)],2)],1)],1)],1)],1)],1),s("v-row",{staticClass:"justify-center"},[s("v-col",{staticClass:"text-center"},[s("v-btn",{attrs:{color:"indigo",dark:"",loading:e.loading},on:{click:e.update}},[e._v("Save")]),s("v-btn",{attrs:{disabled:e.loading},on:{click:e.cancel}},[e._v("Cancel")])],1)],1)],1):e._e()},qs=[],Ws=(s("4de4"),{name:"CourseForm",data:function(){return{course:null,newCourse:{name:"",tagline:"",price:"",description:"",language:"",level:"",instrument:"",targetAudiences:[""],learningPoints:[""],requirements:[""],coverPhoto:null,previewVideo:null},instruments:["Piano","Guitar","Drum Set","Er Hu","Yang Qin","French Horn","Violin","Body Percussion"],levels:["Beginner","Intermediate","Advanced"],languages:["English","Chinese"],nameRules:[function(e){return!!e||"Title is required"}],alphanumricRules:[function(e){return new RegExp("^[a-zA-Z0-9 !@#$%^*_(){}-]{0,100}$").test(e)||"You can only input alphanumeric characters"}],requiredRules:[function(e){return!!e||"This field is required"}],priceRules:[function(e){return!!e||"Price is required"},function(e){return new RegExp(/^\d+(?:\.\d{0,2})$/).test(e)||"Price must be a number with maximum 2 decimal places"}],error:null,loading:!1}},methods:{update:function(){var e=this;return Object(D["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$refs.courseForm.validate()){t.next=2;break}return t.abrupt("return");case 2:return e.loading=!0,e.error="",t.prev=4,s=new FormData,s.set("name",e.newCourse.name),s.set("tagline",e.newCourse.tagline),s.set("price",e.newCourse.price),s.set("description",e.newCourse.description),s.set("level",e.newCourse.level),s.set("instrument",e.newCourse.instrument),s.set("targetAudiences",e.newCourse.targetAudiences.filter((function(e){return""!=e&&null!=e})).join("&")),s.set("learningPoints",e.newCourse.learningPoints.filter((function(e){return""!=e&&null!=e})).join("&")),s.set("requirements",e.newCourse.requirements.filter((function(e){return""!=e&&null!=e})).join("&")),s.set("id",e.course.id),e.newCourse.previewVideo&&s.append("previewVideo",e.newCourse.previewVideo),e.newCourse.coverPhoto&&s.append("coverPhoto",e.newCourse.coverPhoto),t.next=20,W.edit(s);case 20:e.$router.push("/course/edit/".concat(e.course.id)),t.next=26;break;case 23:t.prev=23,t.t0=t["catch"](4),e.error=t.t0.response.data.error;case 26:case"end":return t.stop()}}),t,null,[[4,23]])})))()},cancel:function(){this.$router.push("/course/edit/".concat(this.course.id))},addLearningPoint:function(){this.newCourse.learningPoints.push("")},addTargetAudience:function(){this.newCourse.targetAudiences.push("")},addRequirement:function(){this.newCourse.requirements.push("")}},mounted:function(){var e=Object(D["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,W.show(this.$route.params.course_id);case 2:this.course=e.sent.data.course,this.newCourse.name=this.course.name,this.newCourse.tagline=this.course.tagline,this.newCourse.price=this.course.price.toFixed(2),this.newCourse.description=this.course.description,this.newCourse.language=this.course.language,this.newCourse.level=this.course.level,this.newCourse.instrument=this.course.instrument,this.newCourse.targetAudiences=this.course.targetAudiences?this.course.targetAudiences.split("&"):[],this.newCourse.learningPoints=this.course.learningPoints?this.course.learningPoints.split("&"):[],this.newCourse.requirements=this.course.requirements?this.course.requirements.split("&"):[];case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}),Xs=Ws,zs=Object(p["a"])(Xs,Hs,qs,!1,null,null,null),Ks=zs.exports;v()(zs,{VBtn:g["a"],VCard:Z["a"],VCardText:Q["c"],VCardTitle:Q["d"],VCol:J["a"],VContainer:ee["a"],VDivider:te["a"],VFileInput:rt["a"],VForm:de["a"],VRow:re["a"],VSelect:nt["a"],VTextField:ve["a"],VTextarea:pt["a"]});var Ys=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-container",[e.$route.params.lesson_id&&e.lesson||e.$route.params.course_id?s("v-row",[s("v-col",[s("v-card",{staticClass:"text-left mb-12",attrs:{outlined:""}},[s("v-card-title",{staticClass:"display-1"},[e._v("Lesson")]),s("v-divider"),s("v-card-text",[s("v-form",{ref:"lessonForm",staticClass:"mt-5"},[s("v-row",[s("v-col",{attrs:{cols:"12",md:"4"}},[s("v-text-field",{attrs:{label:"Name",name:"name",type:"text",rules:e.requiredRules,outlined:"",clearable:"",color:"indigo"},model:{value:e.newLesson.name,callback:function(t){e.$set(e.newLesson,"name",t)},expression:"newLesson.name"}},[e._v("Title*")])],1),s("v-col",{attrs:{cols:"12",md:"4"}},[s("v-text-field",{attrs:{label:"Duration in minutes",name:"duration",rules:e.durationRules,outlined:"",clearable:"",color:"indigo"},model:{value:e.newLesson.duration,callback:function(t){e.$set(e.newLesson,"duration",t)},expression:"newLesson.duration"}})],1)],1),s("v-row",[s("v-col",{attrs:{cols:"12"}},[s("v-textarea",{attrs:{label:"Description","auto-grow":"",color:"indigo",outlined:""},model:{value:e.newLesson.description,callback:function(t){e.$set(e.newLesson,"description",t)},expression:"newLesson.description"}})],1)],1),s("v-row",[s("v-col",{attrs:{cols:"12",md:"6"}},[s("v-file-input",{attrs:{accept:"video/mp4, video/ogg",placeholder:e.lesson.Exercises[0].videoUrl?e.lesson.Exercises[0].videoUrl.split("/")[6]:"Choose explanation video","prepend-icon":"mdi-video",label:"Explanation Video",outlined:"",color:"indigo"},model:{value:e.newLesson.video,callback:function(t){e.$set(e.newLesson,"video",t)},expression:"newLesson.video"}})],1),s("v-col",{attrs:{cols:"12",md:"6"}},[s("v-file-input",{attrs:{accept:"image/*",placeholder:e.lesson.Exercises[0].videoPosterUrl?e.lesson.Exercises[0].videoPosterUrl.split("/")[6]:"Choose coverpage for video","prepend-icon":"mdi-image",label:"Explanation Video Poster",outlined:"",color:"indigo"},model:{value:e.newLesson.videoPoster,callback:function(t){e.$set(e.newLesson,"videoPoster",t)},expression:"newLesson.videoPoster"}})],1)],1),s("v-row",[s("v-col",{attrs:{cols:"12",md:"6"}},[s("v-file-input",{attrs:{accept:"video/mp4, video/ogg",placeholder:e.lesson.Exercises[0].demoUrl?e.lesson.Exercises[0].demoUrl.split("/")[6]:"Choose Demo Video","prepend-icon":"mdi-video",label:"Demo Video",outlined:"",color:"indigo"},model:{value:e.newLesson.demo,callback:function(t){e.$set(e.newLesson,"demo",t)},expression:"newLesson.demo"}})],1),s("v-col",{attrs:{cols:"12",md:"6"}},[s("v-file-input",{attrs:{accept:"image/*",placeholder:e.lesson.Exercises[0].demoPosterUrl?e.lesson.Exercises[0].demoPosterUrl.split("/")[6]:"Choose coverpage for demo video","prepend-icon":"mdi-image",label:"Demo Video Poster",outlined:"",color:"indigo"},model:{value:e.newLesson.demoPoster,callback:function(t){e.$set(e.newLesson,"demoPoster",t)},expression:"newLesson.demoPoster"}})],1)],1),s("v-row",[s("v-col",{attrs:{cols:"12",md:"6"}},[s("v-switch",{attrs:{label:"Overlay score on your demo video",color:"indigo"},on:{change:e.showVex},model:{value:e.newLesson.useScore,callback:function(t){e.$set(e.newLesson,"useScore",t)},expression:"newLesson.useScore"}})],1)],1),s("v-row",[e.newLesson.useScore?s("v-col",{attrs:{cols:"12",md:"6"}},[s("v-radio-group",{attrs:{mandatory:!0},model:{value:e.newLesson.useXml,callback:function(t){e.$set(e.newLesson,"useXml",t)},expression:"newLesson.useXml"}},[s("v-radio",{attrs:{label:"Upload musicXML file",value:!0,color:"indigo"}}),s("v-radio",{attrs:{label:"Design your own score",value:!1,color:"indigo"}})],1)],1):e._e(),e.newLesson.useScore?s("v-col",{attrs:{cols:"12",md:"6"}},[s("v-text-field",{attrs:{label:"Demo Start Time",clearable:"",color:"indigo","prepend-icon":"mdi-alarm","persistent-hint":"",hint:"At roughly which second did you start playing in demo video",rules:e.demoStartTimeRules},model:{value:e.newLesson.demoStartTime,callback:function(t){e.$set(e.newLesson,"demoStartTime",t)},expression:"newLesson.demoStartTime"}})],1):e._e()],1)],1),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.newLesson.useXml&&e.newLesson.useScore,expression:"!newLesson.useXml && newLesson.useScore"}],attrs:{id:"optionvex"}},[s("v-row",[s("v-col",{ref:"pannel",attrs:{id:"pannel-content"},on:{click:e.changeMelody}})],1),s("v-row",[s("v-col",{attrs:{cols:"12",md:"6"}},[s("v-subheader",{staticClass:"pl-0"},[e._v("No. Bars")]),s("v-slider",{attrs:{min:"0",max:"16","thumb-label":"","thumb-size":24,color:"indigo","track-color":"indigo lighten-3"},on:{change:e.changeBars},model:{value:e.newLesson.numberOfBars,callback:function(t){e.$set(e.newLesson,"numberOfBars",t)},expression:"newLesson.numberOfBars"}})],1),s("v-col",{attrs:{cols:"12",md:"6"}},[s("v-subheader",{staticClass:"pl-0"},[e._v("BPM")]),s("v-slider",{attrs:{min:"60",max:"120","thumb-label":"","thumb-size":24,color:"indigo","track-color":"indigo lighten-3"},model:{value:e.newLesson.bpm,callback:function(t){e.$set(e.newLesson,"bpm",t)},expression:"newLesson.bpm"}})],1),s("v-col",{attrs:{cols:"12",md:"6"}},[s("v-select",{attrs:{items:e.time_signatures,outlined:"",label:"Time Signature",color:"indigo"},on:{change:e.changeTimeSignature},model:{value:e.newLesson.timeSignature,callback:function(t){e.$set(e.newLesson,"timeSignature",t)},expression:"newLesson.timeSignature"}})],1)],1)],1),s("div",{directives:[{name:"show",rawName:"v-show",value:e.newLesson.useXml&&e.newLesson.useScore,expression:"newLesson.useXml && newLesson.useScore"}],attrs:{id:"optionxml"}},[s("v-row",[s("v-col",{attrs:{cols:"12",md:"6"}},[s("v-file-input",{attrs:{accept:"text/xml, .musicxml",placeholder:"Music XML file","prepend-icon":"mdi-file-document-outline",label:"Upload musicxml file"},model:{value:e.newLesson.musicXml,callback:function(t){e.$set(e.newLesson,"musicXml",t)},expression:"newLesson.musicXml"}})],1)],1),s("v-row",[s("v-col",{attrs:{cols:"12",md:"6"}},[s("v-subheader",{staticClass:"pl-0"},[e._v("BPM")]),s("v-slider",{attrs:{min:"60",max:"120","thumb-label":"","thumb-size":24,color:"indigo","track-color":"indigo lighten-3"},model:{value:e.lesson.bpm,callback:function(t){e.$set(e.lesson,"bpm",t)},expression:"lesson.bpm"}})],1)],1)],1)],1)],1)],1)],1):e._e(),s("v-row",{staticClass:"justify-center"},[s("v-col",{staticClass:"text-center"},[s("v-btn",{attrs:{color:"indigo",loading:e.loading,dark:""},on:{click:e.update}},[e._v("Save")]),s("v-btn",{attrs:{disabled:e.loading},on:{click:e.cancel}},[e._v("Cancel")])],1)],1)],1)},Gs=[],Zs={name:"LessonForm",data:function(){return{newLesson:{name:"",duration:"",description:"",video:null,videoPoster:null,demo:null,demoPoster:null,useScore:!0,timeSignature:"4/4",bpm:60,numberOfBars:4,melody:[],demoStartTime:"0",useXml:!1,musicXml:null},lesson:null,handler:null,requiredRules:[function(e){return!!e||"This field is required"}],durationRules:[function(e){return!!e||"Duration is required"},function(e){return new RegExp(/^\d+$/).test(e)||"Please input numbers only"}],demoStartTimeRules:[function(e){return!!e||"Demo Start Time is required"},function(e){return new RegExp(/^\d+$/).test(e)||"Please input numbers only"}],time_signatures:["4/4","3/4","2/4","3/8","6/8"],loading:!1,error:null}},methods:{showVex:function(){var e=document.createElement("div");e.id="vexflow-wrapper";var t=document.getElementById("pannel-content");t.appendChild(e),this.handler=new Ge["a"].Handler(e.id,{canvasProperties:{id:e.id+"-canvas",width:5*window.innerWidth/6,tabindex:1}}).init()},changeTimeSignature:function(){this.handler.setTimeSignature(this.newLesson.timeSignature)},changeBars:function(){this.handler.changeNumberOfBars(this.newLesson.numberOfBars,this.handler.exportNotes())},changeMelody:function(){this.newLesson.melody=this.handler.exportNotes()},update:function(){var e=this;return Object(D["a"])(regeneratorRuntime.mark((function t(){var s,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$refs.lessonForm.validate()){t.next=2;break}return t.abrupt("return");case 2:if(e.loading=!0,s=null,!e.$route.params.lesson_id){t.next=9;break}return t.next=7,$e.edit({id:e.lesson.id,name:e.newLesson.name,duration:Number(e.newLesson.duration),description:e.newLesson.description});case 7:t.next=12;break;case 9:return t.next=11,$e.create({name:e.newLesson.name,duration:Number(e.newLesson.duration),description:e.newLesson.description,cid:e.$route.params.course_id});case 11:s=t.sent;case 12:if(r=e.newLesson,n=new FormData,n.set("name",""),n.set("melody",r.melody.join("-")),n.set("timeSignature",r.timeSignature),n.set("bpm",r.bpm),n.set("numberOfBars",r.numberOfBars),n.set("demoStartTime",parseInt(r.demoStartTime)),n.set("useScore",r.useScore),r.useScore&&(r.useXml?n.set("useXml",!0):(n.set("useXml",!1),n.set("melody",r.melody.join("-")),n.set("timeSignature",r.timeSignature))),r.video&&n.append("video",r.video),r.videoPoster&&n.append("videoPoster",r.videoPoster),r.demo&&n.append("demo",r.demo),r.demoPoster&&n.append("demoPoster",r.demoPoster),r.musicXml&&n.append("musicXml",r.musicXml),console.log(n),!e.$route.params.lesson_id){t.next=34;break}return n.set("id",e.lesson.Exercises[0].id),t.next=32,Ye.edit(n);case 32:t.next=37;break;case 34:return n.set("lid",s.data.lesson.id),t.next=37,Ye.create(n);case 37:e.loading=!1,e.cancel();case 39:case"end":return t.stop()}}),t)})))()},cancel:function(){this.$route.params.lesson_id?this.$router.push("/course/edit/".concat(this.lesson.CourseId)):this.$router.push("/course/edit/".concat(course.id))}},mounted:function(){var e=Object(D["a"])(regeneratorRuntime.mark((function e(){var t,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.$route.params.lesson_id){e.next=24;break}return e.next=3,$e.show(this.$route.params.lesson_id);case 3:if(this.lesson=e.sent.data.lesson,this.newLesson.name=this.lesson.name,this.newLesson.duration=this.lesson.duration,this.newLesson.description=this.lesson.description,this.newLesson.useScore=this.lesson.Exercises[0].useScore,this.newLesson.useXml=this.lesson.Exercises[0].useXml,this.newLesson.demoStartTime=this.lesson.Exercises[0].demoStartTime,!this.newLesson.useScore){e.next=24;break}if(this.newLesson.useXml){e.next=24;break}return this.newLesson.timeSignature=this.lesson.Exercises[0].timeSignature,this.newLesson.bpm=this.lesson.Exercises[0].bpm,this.newLesson.numberOfBars=this.lesson.Exercises[0].numberOfBars,this.newLesson.melody=this.lesson.Exercises[0].melody.split("-"),e.next=18,this.$nextTick();case 18:t=document.createElement("div"),t.id="vexflow-wrapper",s=document.getElementById("pannel-content"),s.appendChild(t),this.handler=new Ge["a"].Handler(t.id,{numberOfStaves:this.newLesson.numberOfBars,canvasProperties:{id:t.id+"-canvas",width:5*window.innerWidth/6,tabindex:1}}).init(),this.handler.importNotes(this.newLesson.melody,this.newLesson.timeSignature);case 24:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},Qs=Zs,Js=Object(p["a"])(Qs,Ys,Gs,!1,null,null,null),er=Js.exports;v()(Js,{VBtn:g["a"],VCard:Z["a"],VCardText:Q["c"],VCardTitle:Q["d"],VCol:J["a"],VContainer:ee["a"],VDivider:te["a"],VFileInput:rt["a"],VForm:de["a"],VRadio:pe["a"],VRadioGroup:he["a"],VRow:re["a"],VSelect:nt["a"],VSlider:ot["a"],VSubheader:ut["a"],VSwitch:dt["a"],VTextField:ve["a"],VTextarea:pt["a"]}),r["a"].use(M["a"]);var tr=[{path:"/",name:"home",component:oe},{path:"/register",name:"register",component:fe},{path:"/login",name:"login",component:Pe},{path:"/student",name:"student",component:Ce},{path:"/course/show/:course_id",name:"showcourse",component:je,props:!0},{path:"/course/edit/:course_id",name:"editcourse",component:wt},{path:"/course/form/:course_id",name:"courseform",component:Ks},{path:"/lesson/edit-form/:lesson_id",component:er},{path:"/lesson/new-form/:course_id",component:er},{path:"/course/show/:course_id/lesson/:lesson_id",name:"showlesson",component:$s,props:!0},{path:"/course/index",name:"courseindex",component:Xe},{path:"/course/new/",name:"newcourse",component:vt},{path:"/user/index",name:"userindex",component:Tt},{path:"/video",name:"video",component:Nt},{path:"/courses/threads/index",component:$t},{path:"/course/threads/index/:course_id",component:Kt},{path:"/course/threads/show/:course_id/:student_id",name:"showthread",component:rs,props:!0},{path:"/payment/:course_id",name:"payment",component:us},{path:"/advanced-payment",component:fs},{path:"/osmd",component:Cs}],sr=new M["a"]({mode:"history",routes:tr});sr.beforeEach((function(e,t,s){"showcourse"==e.name||"login"==e.name||H.state.isUserLoggedIn||"home"==e.name||"register"==e.name?s():s({name:"login"})}));var rr=sr,nr=s("f309"),or=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("svg",{attrs:{id:"svg2",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 57.2 99.95"}},[s("title",[e._v("bg")]),s("g",{attrs:{id:"path3821"}},[s("rect",{attrs:{x:"34.97",y:"79.23",width:"22.23",height:"4"}}),s("rect",{attrs:{x:"34.97",y:"88.71",width:"22.23",height:"4"}}),s("path",{attrs:{d:"M25.4,0h4v83.1h-.07c.41,5.12-3.7,11.2-10.33,14.6-7.7,3.9-16,2.6-18.4-2.9s1.9-13.2,9.7-17.2c5.44-2.8,11.31-3,15.1-.73Z",transform:"translate(0.06 -0.04)"}})])])},ir=[],ar={name:"bpmIcon"},lr=ar,cr=(s("cb53"),Object(p["a"])(lr,or,ir,!1,null,"e41933a2",null)),ur=cr.exports;r["a"].use(nr["a"]);var dr=new nr["a"]({icons:{values:{custom_bpm:{component:ur}}}}),pr=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"panel"}},[s("v-row",{attrs:{align:"center",justify:"center"}},[s("v-col",{attrs:{cols:"12",sm:"10",md:e.md||6}},[s("v-card",{staticClass:"elevation-8"},[s("v-toolbar",{attrs:{light:""}},[s("v-toolbar-title",{staticClass:"text-h4"},[e._v(e._s(e.title))]),s("v-spacer")],1),e._t("default",[e._v("No slot defined")])],2)],1)],1)],1)},hr=[],vr={name:"Panel",props:["title","md"]},mr=vr,fr=Object(p["a"])(mr,pr,hr,!1,null,"03128dc8",null),gr=fr.exports;v()(fr,{VCard:Z["a"],VCol:J["a"],VRow:re["a"],VSpacer:S["a"],VToolbar:Ue["a"],VToolbarTitle:V["b"]}),r["a"].config.productionTip=!1,r["a"].component("panel",gr),new r["a"]({router:rr,store:H,vuetify:dr,render:function(e){return e(R)}}).$mount("#app")},"5de4":function(e,t,s){"use strict";var r=s("9b83"),n=s.n(r);n.a},"6ac5":function(e,t,s){"use strict";var r=s("3eaa"),n=s.n(r);n.a},7341:function(e,t,s){},7734:function(e,t,s){"use strict";var r=s("a7fa"),n=s.n(r);n.a},7763:function(e,t,s){},"8a23":function(e,t,s){},"9b83":function(e,t,s){},"9be2":function(e,t,s){"use strict";var r=s("33e9"),n=s.n(r);n.a},a729:function(e,t,s){},a7fa:function(e,t,s){},b020:function(e,t,s){e.exports=s.p+"img/play_button.3f8fd321.png"},be94:function(e,t,s){},c07b:function(e,t,s){"use strict";var r=s("7763"),n=s.n(r);n.a},c27a:function(e,t,s){},cb53:function(e,t,s){"use strict";var r=s("be94"),n=s.n(r);n.a},e550:function(e,t,s){"use strict";var r=s("1f1c"),n=s.n(r);n.a},e80c:function(e,t,s){"use strict";var r=s("14d8"),n=s.n(r);n.a},e9a0:function(e,t,s){}});
//# sourceMappingURL=app.751d86fb.js.map